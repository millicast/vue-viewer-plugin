(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["millicast-vue-viewer-plugin"]=t(require("vue")):e["millicast-vue-viewer-plugin"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"001d":function(e,t,n){},"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),o=n("c65b"),i=n("1626"),s=n("825a"),a=n("577e"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=/./.test;r({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=s(this),n=a(e),r=t.exec;if(!i(r))return o(u,t,n);var c=o(r,t,n);return null!==c&&(s(c),!0)}})},"00ee":function(e,t,n){"use strict";var r=n("b622"),o=r("toStringTag"),i={};i[o]="z",e.exports="[object z]"===String(i)},"01b4":function(e,t,n){"use strict";var r=function(){this.head=null,this.tail=null};r.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return null===t&&(this.tail=null),e.item}}},e.exports=r},"0366":function(e,t,n){"use strict";var r=n("4625"),o=n("59ed"),i=n("40d5"),s=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},"04f8":function(e,t,n){"use strict";var r=n("1212"),o=n("d039"),i=n("cfe9"),s=i.String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"057f":function(e,t,n){"use strict";var r=n("c6b6"),o=n("fc6a"),i=n("241c").f,s=n("f36a"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return i(e)}catch(t){return s(a)}};e.exports.f=function(e){return a&&"Window"===r(e)?c(e):i(o(e))}},"06cf":function(e,t,n){"use strict";var r=n("83ab"),o=n("c65b"),i=n("d1e7"),s=n("5c6c"),a=n("fc6a"),c=n("a04b"),u=n("1a2d"),l=n("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(n){}if(u(e,t))return s(!o(i.f,e,t),e[t])}},"07ac":function(e,t,n){"use strict";var r=n("23e7"),o=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},"07fa":function(e,t,n){"use strict";var r=n("50c4");e.exports=function(e){return r(e.length)}},"083a":function(e,t,n){"use strict";var r=n("0d51"),o=TypeError;e.exports=function(e,t){if(!delete e[t])throw new o("Cannot delete property "+r(t)+" of "+r(e))}},"0b0b":function(e,t,n){},"0b42":function(e,t,n){"use strict";var r=n("e8b5"),o=n("68ee"),i=n("861d"),s=n("b622"),a=s("species"),c=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,o(t)&&(t===c||r(t.prototype))?t=void 0:i(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?c:t}},"0b43":function(e,t,n){"use strict";var r=n("04f8");e.exports=r&&!!Symbol["for"]&&!!Symbol.keyFor},"0cb2":function(e,t,n){"use strict";var r=n("e330"),o=n("7b0b"),i=Math.floor,s=r("".charAt),a=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,f){var p=n+e.length,h=r.length,m=l;return void 0!==d&&(d=o(d),m=u),a(f,m,(function(o,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return o;if(l>h){var f=i(l/10);return 0===f?o:f<=h?void 0===r[f-1]?s(a,1):r[f-1]+s(a,1):o}u=r[l-1]}return void 0===u?"":u}))}},"0ccb":function(e,t,n){"use strict";var r=n("e330"),o=n("50c4"),i=n("577e"),s=n("1148"),a=n("1d80"),c=r(s),u=r("".slice),l=Math.ceil,d=function(e){return function(t,n,r){var s,d,f=i(a(t)),p=o(n),h=f.length,m=void 0===r?" ":i(r);return p<=h||""===m?f:(s=p-h,d=c(m,l(s/m.length)),d.length>s&&(d=u(d,0,s)),e?f+d:d+f)}};e.exports={start:d(!1),end:d(!0)}},"0cfb":function(e,t,n){"use strict";var r=n("83ab"),o=n("d039"),i=n("cc12");e.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"0d26":function(e,t,n){"use strict";var r=n("e330"),o=Error,i=r("".replace),s=function(e){return String(new o(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=i(e,a,"");return e}},"0d51":function(e,t,n){"use strict";var r=String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},"0f33":function(e,t,n){"use strict";var r=n("cfe9"),o=n("d039"),i=r.RegExp,s=!o((function(){var e=!0;try{i(".","d")}catch(u){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",o=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(s.hasIndices="d"),s)o(a,s[a]);var c=Object.getOwnPropertyDescriptor(i.prototype,"flags").get.call(t);return c!==r||n!==r}));e.exports={correct:s}},"107c":function(e,t,n){"use strict";var r=n("d039"),o=n("cfe9"),i=o.RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1148:function(e,t,n){"use strict";var r=n("5926"),o=n("577e"),i=n("1d80"),s=RangeError;e.exports=function(e){var t=o(i(this)),n="",a=r(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},1212:function(e,t,n){"use strict";var r,o,i=n("cfe9"),s=n("b5db"),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),e.exports=o},"12a8":function(e,t,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("eb1d"),s=n("59ed"),a=n("7b0b"),c=n("9bf2");o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},"131a":function(e,t,n){"use strict";var r=n("23e7"),o=n("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:o})},"13d2":function(e,t,n){"use strict";var r=n("e330"),o=n("d039"),i=n("1626"),s=n("1a2d"),a=n("83ab"),c=n("5e77").CONFIGURABLE,u=n("8925"),l=n("69f3"),d=l.enforce,f=l.get,p=String,h=Object.defineProperty,m=r("".slice),v=r("".replace),g=r([].join),b=a&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),y=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?h(e,"name",{value:t,configurable:!0}):e.name=t),b&&n&&s(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=d(e);return s(r,"source")||(r.source=g(y,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return i(this)&&f(this).source||u(this)}),"toString")},"13d5":function(e,t,n){"use strict";var r=n("23e7"),o=n("d58f").left,i=n("a640"),s=n("1212"),a=n("9adc"),c=!a&&s>79&&s<83,u=c||!i("reduce");r({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},"14c3":function(e,t,n){"use strict";var r=n("c65b"),o=n("825a"),i=n("1626"),s=n("c6b6"),a=n("9263"),c=TypeError;e.exports=function(e,t){var n=e.exec;if(i(n)){var u=r(n,e,t);return null!==u&&o(u),u}if("RegExp"===s(e))return r(a,e,t);throw new c("RegExp#exec called on incompatible receiver")}},"14d9":function(e,t,n){"use strict";var r=n("23e7"),o=n("7b0b"),i=n("07fa"),s=n("3a34"),a=n("3511"),c=n("d039"),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!l();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=o(this),n=i(t),r=arguments.length;a(n+r);for(var c=0;c<r;c++)t[n]=arguments[c],n++;return s(t,n),n}})},"14e5":function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("59ed"),s=n("f069"),a=n("e667"),c=n("2266"),u=n("5eed");r({target:"Promise",stat:!0,forced:u},{all:function(e){var t=this,n=s.f(t),r=n.resolve,u=n.reject,l=a((function(){var n=i(t.resolve),s=[],a=0,l=1;c(e,(function(e){var i=a++,c=!1;l++,o(n,t,e).then((function(e){c||(c=!0,s[i]=e,--l||r(s))}),u)})),--l||r(s)}));return l.error&&u(l.value),n.promise}})},"157a":function(e,t,n){"use strict";var r=n("cfe9"),o=n("83ab"),i=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!o)return r[e];var t=i(r,e);return t&&t.value}},"159b":function(e,t,n){"use strict";var r=n("cfe9"),o=n("fdbc"),i=n("785a"),s=n("17c2"),a=n("9112"),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in o)o[u]&&c(r[u]&&r[u].prototype);c(i)},1626:function(e,t,n){"use strict";var r="object"==typeof document&&document.all;e.exports="undefined"==typeof r&&void 0!==r?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},1787:function(e,t,n){"use strict";var r=n("861d");e.exports=function(e){return r(e)||null===e}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,o=n("a640"),i=o("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t,n){"use strict";var r=n("3a9b"),o=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new o("Incorrect invocation")}},"1a2d":function(e,t,n){"use strict";var r=n("e330"),o=n("7b0b"),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},"1be4":function(e,t,n){"use strict";var r=n("d066");e.exports=r("document","documentElement")},"1c7e":function(e,t,n){"use strict";var r=n("b622"),o=r("iterator"),i=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){i=!0}};a[o]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(c){return!1}var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1d80":function(e,t,n){"use strict";var r=n("7234"),o=TypeError;e.exports=function(e){if(r(e))throw new o("Can't call method on "+e);return e}},"1dde":function(e,t,n){"use strict";var r=n("d039"),o=n("b622"),i=n("1212"),s=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2266:function(e,t,n){"use strict";var r=n("0366"),o=n("c65b"),i=n("825a"),s=n("0d51"),a=n("e95a"),c=n("07fa"),u=n("3a9b"),l=n("9a1f"),d=n("35a1"),f=n("2a62"),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},m=h.prototype;e.exports=function(e,t,n){var v,g,b,y,w,S,E,C=n&&n.that,O=!(!n||!n.AS_ENTRIES),k=!(!n||!n.IS_RECORD),I=!(!n||!n.IS_ITERATOR),x=!(!n||!n.INTERRUPTED),T=r(t,C),j=function(e){return v&&f(v,"normal"),new h(!0,e)},P=function(e){return O?(i(e),x?T(e[0],e[1],j):T(e[0],e[1])):x?T(e,j):T(e)};if(k)v=e.iterator;else if(I)v=e;else{if(g=d(e),!g)throw new p(s(e)+" is not iterable");if(a(g)){for(b=0,y=c(e);y>b;b++)if(w=P(e[b]),w&&u(m,w))return w;return new h(!1)}v=l(e,g)}S=k?e.next:v.next;while(!(E=o(S,v)).done){try{w=P(E.value)}catch(R){f(v,"throw",R)}if("object"==typeof w&&w&&u(m,w))return w}return new h(!1)}},"23cb":function(e,t,n){"use strict";var r=n("5926"),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},"23e7":function(e,t,n){"use strict";var r=n("cfe9"),o=n("06cf").f,i=n("9112"),s=n("cb2d"),a=n("6374"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,d,f,p,h,m=e.target,v=e.global,g=e.stat;if(l=v?r:g?r[m]||a(m,{}):r[m]&&r[m].prototype,l)for(d in t){if(p=t[d],e.dontCallGetSet?(h=o(l,d),f=h&&h.value):f=l[d],n=u(v?d:m+(g?".":"#")+d,e.forced),!n&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&i(p,"sham",!0),s(l,d,p,e)}}},"241c":function(e,t,n){"use strict";var r=n("ca84"),o=n("7839"),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},2532:function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),i=n("5a34"),s=n("1d80"),a=n("577e"),c=n("ab13"),u=o("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(i(e)),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,n){"use strict";var r=n("5e77").PROPER,o=n("cb2d"),i=n("825a"),s=n("577e"),a=n("d039"),c=n("90d8"),u="toString",l=RegExp.prototype,d=l[u],f=a((function(){return"/a/b"!==d.call({source:"a",flags:"b"})})),p=r&&d.name!==u;(f||p)&&o(l,u,(function(){var e=i(this),t=s(e.source),n=s(c(e));return"/"+t+"/"+n}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),o=n("edd0"),i=n("b622"),s=n("83ab"),a=i("species");e.exports=function(e){var t=r(e);s&&t&&!t[a]&&o(t,a,{configurable:!0,get:function(){return this}})}},"2a62":function(e,t,n){"use strict";var r=n("c65b"),o=n("825a"),i=n("dc4a");e.exports=function(e,t,n){var s,a;o(e);try{if(s=i(e,"return"),!s){if("throw"===t)throw n;return n}s=r(s,e)}catch(c){a=!0,s=c}if("throw"===t)throw n;if(a)throw s;return o(s),n}},"2ad6":function(e,t,n){"use strict";var r,o;(function(i,s){r=s,o="function"===typeof r?r.call(t,n,t,e):r,void 0===o||(e.exports=o)})("undefined"!==typeof window&&window,(function(){if("undefined"===typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function r(e,t){var n=Object.prototype.toString.call(e),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!==typeof jQuery&&e instanceof jQuery||"undefined"!==typeof Elements&&e instanceof Elements,o=0,i=e.length;if(r)for(;o<i;o++)t(e[o]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function i(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var s=function(e,a){var c=0;function u(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(r){for(e=0,t=n.length;e<t;e++)n[e].call(this,r)},this.remove=function(r){var o=[];for(e=0,t=n.length;e<t;e++)n[e]!==r&&o.push(n[e]);n=o},this.length=function(){return n.length}}function l(e,n){if(e)if(e.resizedAttached)e.resizedAttached.add(n);else{e.resizedAttached=new u,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var r={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};i(e.resizeSensor,r);var a=document.createElement("div");a.className="resize-sensor-expand",i(a,r);var l=document.createElement("div");i(l,s),a.appendChild(l);var d=document.createElement("div");d.className="resize-sensor-shrink",i(d,r);var f=document.createElement("div");i(f,s),i(f,{width:"200%",height:"200%"}),d.appendChild(f),e.resizeSensor.appendChild(a),e.resizeSensor.appendChild(d),e.appendChild(e.resizeSensor);var p=window.getComputedStyle(e),h=p?p.getPropertyValue("position"):null;"absolute"!==h&&"relative"!==h&&"fixed"!==h&&"sticky"!==h&&(e.style.position="relative");var m=!1,v=0,g=o(e),b=0,y=0,w=!0;c=0;var S=function(){var t=e.offsetWidth,n=e.offsetHeight;l.style.width=t+10+"px",l.style.height=n+10+"px",a.scrollLeft=t+10,a.scrollTop=n+10,d.scrollLeft=t+10,d.scrollTop=n+10},E=function(){if(w){var n=0===e.offsetWidth&&0===e.offsetHeight;if(n)return void(c||(c=t((function(){c=0,E()}))));w=!1}S()};e.resizeSensor.resetSensor=E;var C=function(){v=0,m&&(b=g.width,y=g.height,e.resizedAttached&&e.resizedAttached.call(g))},O=function(){g=o(e),m=g.width!==b||g.height!==y,m&&!v&&(v=t(C)),E()},k=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};k(a,"scroll",O),k(d,"scroll",O),c=t((function(){c=0,E()}))}}r(e,(function(e){l(e,a)})),this.detach=function(t){c||(n(c),c=0),s.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(s.reset=function(e){r(e,(function(e){e.resizeSensor.resetSensor()}))},s.detach=function(e,t){r(e,(function(e){e&&(e.resizedAttached&&"function"===typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!==typeof MutationObserver){var a=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,r=0;r<n.length;r++)n[r].resizeSensor&&s.reset(n[r])}));document.addEventListener("DOMContentLoaded",(function(e){a.observe(document.body,{childList:!0,subtree:!0})}))}return s}))},"2ba4":function(e,t,n){"use strict";var r=n("40d5"),o=Function.prototype,i=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(i):function(){return s.apply(i,arguments)})},"2baa":function(e,t,n){"use strict";e.exports=function(e,t){var n="function"==typeof Iterator&&Iterator.prototype[e];if(n)try{n.call({next:null},t).next()}catch(r){return!0}}},"2cf4":function(e,t,n){"use strict";var r,o,i,s,a=n("cfe9"),c=n("2ba4"),u=n("0366"),l=n("1626"),d=n("1a2d"),f=n("d039"),p=n("1be4"),h=n("f36a"),m=n("cc12"),v=n("d6d6"),g=n("52c8"),b=n("9adc"),y=a.setImmediate,w=a.clearImmediate,S=a.process,E=a.Dispatch,C=a.Function,O=a.MessageChannel,k=a.String,I=0,x={},T="onreadystatechange";f((function(){r=a.location}));var j=function(e){if(d(x,e)){var t=x[e];delete x[e],t()}},P=function(e){return function(){j(e)}},R=function(e){j(e.data)},A=function(e){a.postMessage(k(e),r.protocol+"//"+r.host)};y&&w||(y=function(e){v(arguments.length,1);var t=l(e)?e:C(e),n=h(arguments,1);return x[++I]=function(){c(t,void 0,n)},o(I),I},w=function(e){delete x[e]},b?o=function(e){S.nextTick(P(e))}:E&&E.now?o=function(e){E.now(P(e))}:O&&!g?(i=new O,s=i.port2,i.port1.onmessage=R,o=u(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!f(A)?(o=A,a.addEventListener("message",R,!1)):o=T in m("script")?function(e){p.appendChild(m("script"))[T]=function(){p.removeChild(this),j(e)}}:function(e){setTimeout(P(e),0)}),e.exports={set:y,clear:w}},3143:function(e,t,n){"use strict";n("0b0b")},3410:function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("7b0b"),s=n("e163"),a=n("e177"),c=o((function(){s(1)}));r({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(e){return s(i(e))}})},3511:function(e,t,n){"use strict";var r=TypeError,o=9007199254740991;e.exports=function(e){if(e>o)throw r("Maximum allowed index exceeded");return e}},3529:function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("59ed"),s=n("f069"),a=n("e667"),c=n("2266"),u=n("5eed");r({target:"Promise",stat:!0,forced:u},{race:function(e){var t=this,n=s.f(t),r=n.reject,u=a((function(){var s=i(t.resolve);c(e,(function(e){o(s,t,e).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},"358f":function(e,t,n){},"35a1":function(e,t,n){"use strict";var r=n("f5df"),o=n("dc4a"),i=n("7234"),s=n("3f8c"),a=n("b622"),c=a("iterator");e.exports=function(e){if(!i(e))return o(e,c)||o(e,"@@iterator")||s[r(e)]}},"37e8":function(e,t,n){"use strict";var r=n("83ab"),o=n("aed9"),i=n("9bf2"),s=n("825a"),a=n("fc6a"),c=n("df75");t.f=r&&!o?Object.defineProperties:function(e,t){s(e);var n,r=a(t),o=c(t),u=o.length,l=0;while(u>l)i.f(e,n=o[l++],r[n]);return e}},"3a34":function(e,t,n){"use strict";var r=n("83ab"),o=n("e8b5"),i=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(o(e)&&!s(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"3a9b":function(e,t,n){"use strict";var r=n("e330");e.exports=r({}.isPrototypeOf)},"3bbe":function(e,t,n){"use strict";var r=n("1787"),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},"3bca":function(e,t,n){},"3c34":function(e,t,n){"use strict";n("e4ca")},"3c65":function(e,t,n){"use strict";var r=n("23e7"),o=n("7b0b"),i=n("07fa"),s=n("3a34"),a=n("083a"),c=n("3511"),u=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},d=u||!l();r({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(e){var t=o(this),n=i(t),r=arguments.length;if(r){c(n+r);var u=n;while(u--){var l=u+r;u in t?t[l]=t[u]:a(t,l)}for(var d=0;d<r;d++)t[d]=arguments[d]}return s(t,n+r)}})},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,o=n("577e"),i=n("69f3"),s=n("c6d2"),a=n("4754"),c="String Iterator",u=i.set,l=i.getterFor(c);s(String,"String",(function(e){u(this,{type:c,string:o(e),index:0})}),(function(){var e,t=l(this),n=t.string,o=t.index;return o>=n.length?a(void 0,!0):(e=r(n,o),t.index+=e.length,a(e,!1))}))},"3f7e":function(e,t,n){"use strict";var r=n("b5db"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"3f8c":function(e,t,n){"use strict";e.exports={}},"408a":function(e,t,n){"use strict";var r=n("e330");e.exports=r(1.1.valueOf)},"40d5":function(e,t,n){"use strict";var r=n("d039");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},4160:function(e,t,n){"use strict";var r=n("23e7"),o=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!==o},{forEach:o})},"428f":function(e,t,n){"use strict";var r=n("cfe9");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){"use strict";var r=n("e330"),o=n("d039"),i=n("c6b6"),s=Object,a=r("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?a(e,""):s(e)}:s},"44d2":function(e,t,n){"use strict";var r=n("b622"),o=n("7c73"),i=n("9bf2").f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&i(a,s,{configurable:!0,value:o(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,n){"use strict";e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(n){}}},"44e7":function(e,t,n){"use strict";var r=n("861d"),o=n("c6b6"),i=n("b622"),s=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"===o(e))}},"455f":function(e,t,n){"use strict";n("c236")},"45fc":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").some,i=n("a640"),s=i("some");r({target:"Array",proto:!0,forced:!s},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},4625:function(e,t,n){"use strict";var r=n("c6b6"),o=n("e330");e.exports=function(e){if("Function"===r(e))return o(e)}},"466d":function(e,t,n){"use strict";var r=n("c65b"),o=n("e330"),i=n("d784"),s=n("825a"),a=n("861d"),c=n("50c4"),u=n("577e"),l=n("1d80"),d=n("dc4a"),f=n("8aa5"),p=n("90d8"),h=n("14c3"),m=o("".indexOf);i("match",(function(e,t,n){return[function(t){var n=l(this),o=a(t)?d(t,e):void 0;return o?r(o,t,n):new RegExp(t)[e](u(n))},function(e){var r=s(this),o=u(e),i=n(t,r,o);if(i.done)return i.value;var a=u(p(r));if(-1===m(a,"g"))return h(r,o);var l=-1!==m(a,"u");r.lastIndex=0;var d,v=[],g=0;while(null!==(d=h(r,o))){var b=u(d[0]);v[g]=b,""===b&&(r.lastIndex=f(o,c(r.lastIndex),l)),g++}return 0===g?null:v}]}))},"46c4":function(e,t,n){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},4738:function(e,t,n){"use strict";var r=n("cfe9"),o=n("d256"),i=n("1626"),s=n("94ca"),a=n("8925"),c=n("b622"),u=n("8558"),l=n("c430"),d=n("1212"),f=o&&o.prototype,p=c("species"),h=!1,m=i(r.PromiseRejectionEvent),v=s("Promise",(function(){var e=a(o),t=e!==String(o);if(!t&&66===d)return!0;if(l&&(!f["catch"]||!f["finally"]))return!0;if(!d||d<51||!/native code/.test(e)){var n=new o((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};if(i[p]=r,h=n.then((function(){}))instanceof r,!h)return!0}return!t&&("BROWSER"===u||"DENO"===u)&&!m}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:m,SUBCLASSING:h}},4754:function(e,t,n){"use strict";e.exports=function(e,t){return{value:e,done:t}}},4840:function(e,t,n){"use strict";var r=n("825a"),o=n("5087"),i=n("7234"),s=n("b622"),a=s("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||i(n=r(s)[a])?t:o(n)}},"485a":function(e,t,n){"use strict";var r=n("c65b"),o=n("1626"),i=n("861d"),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&o(n=e.toString)&&!i(a=r(n,e)))return a;if(o(n=e.valueOf)&&!i(a=r(n,e)))return a;if("string"!==t&&o(n=e.toString)&&!i(a=r(n,e)))return a;throw new s("Can't convert object to primitive value")}},"4cb6":function(e,t,n){"use strict";n("358f")},"4d64":function(e,t,n){"use strict";var r=n("fc6a"),o=n("23cb"),i=n("07fa"),s=function(e){return function(t,n,s){var a=r(t),c=i(a);if(0===c)return!e&&-1;var u,l=o(s,c);if(e&&n!==n){while(c>l)if(u=a[l++],u!==u)return!0}else for(;c>l;l++)if((e||l in a)&&a[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").filter,i=n("1dde"),s=i("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),o=n("c65b"),i=n("7b0b"),s=n("9bdd"),a=n("e95a"),c=n("68ee"),u=n("07fa"),l=n("8418"),d=n("9a1f"),f=n("35a1"),p=Array;e.exports=function(e){var t=i(e),n=c(this),h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m;v&&(m=r(m,h>2?arguments[2]:void 0));var g,b,y,w,S,E,C=f(t),O=0;if(!C||this===p&&a(C))for(g=u(t),b=n?new this(g):p(g);g>O;O++)E=v?m(t[O],O):t[O],l(b,O,E);else for(b=n?new this:[],w=d(t,C),S=w.next;!(y=o(S,w)).done;O++)E=v?s(w,m,[y.value,O],!0):y.value,l(b,O,E);return b.length=O,b}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),i=n("59ed"),s=n("7b0b"),a=n("07fa"),c=n("083a"),u=n("577e"),l=n("d039"),d=n("addb"),f=n("a640"),p=n("3f7e"),h=n("99f4"),m=n("1212"),v=n("ea83"),g=[],b=o(g.sort),y=o(g.push),w=l((function(){g.sort(void 0)})),S=l((function(){g.sort(null)})),E=f("sort"),C=!l((function(){if(m)return m<70;if(!(p&&p>3)){if(h)return!0;if(v)return v<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:t+r,v:n})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),O=w||!S||!E||!C,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}};r({target:"Array",proto:!0,forced:O},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(C)return void 0===e?b(t):b(t,e);var n,r,o=[],u=a(t);for(r=0;r<u;r++)r in t&&y(o,t[r]);d(o,k(e)),n=a(o),r=0;while(r<n)t[r]=o[r++];while(r<u)c(t,r++);return t}})},"4fad":function(e,t,n){"use strict";var r=n("23e7"),o=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},5087:function(e,t,n){"use strict";var r=n("68ee"),o=n("0d51"),i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not a constructor")}},"50c4":function(e,t,n){"use strict";var r=n("5926"),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},"51eb":function(e,t,n){"use strict";var r=n("825a"),o=n("485a"),i=TypeError;e.exports=function(e){if(r(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw new i("Incorrect hint");return o(this,e)}},"52c8":function(e,t,n){"use strict";var r=n("b5db");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5306:function(e,t,n){},5319:function(e,t,n){"use strict";var r=n("2ba4"),o=n("c65b"),i=n("e330"),s=n("d784"),a=n("d039"),c=n("825a"),u=n("1626"),l=n("861d"),d=n("5926"),f=n("50c4"),p=n("577e"),h=n("1d80"),m=n("8aa5"),v=n("dc4a"),g=n("0cb2"),b=n("90d8"),y=n("14c3"),w=n("b622"),S=w("replace"),E=Math.max,C=Math.min,O=i([].concat),k=i([].push),I=i("".indexOf),x=i("".slice),T=function(e){return void 0===e?e:String(e)},j=function(){return"$0"==="a".replace(/./,"$0")}(),P=function(){return!!/./[S]&&""===/./[S]("a","$0")}(),R=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,n){var i=P?"$":"$0";return[function(e,n){var r=h(this),i=l(e)?v(e,S):void 0;return i?o(i,e,r,n):o(t,p(r),e,n)},function(e,o){var s=c(this),a=p(e);if("string"==typeof o&&-1===I(o,i)&&-1===I(o,"$<")){var l=n(t,s,a,o);if(l.done)return l.value}var h=u(o);h||(o=p(o));var v,w=p(b(s)),S=-1!==I(w,"g");S&&(v=-1!==I(w,"u"),s.lastIndex=0);var j,P=[];while(1){if(j=y(s,a),null===j)break;if(k(P,j),!S)break;var R=p(j[0]);""===R&&(s.lastIndex=m(a,f(s.lastIndex),v))}for(var A="",V=0,M=0;M<P.length;M++){j=P[M];for(var L,_=p(j[0]),D=E(C(d(j.index),a.length),0),N=[],B=1;B<j.length;B++)k(N,T(j[B]));var U=j.groups;if(h){var F=O([_],N,D,a);void 0!==U&&k(F,U),L=p(r(o,void 0,F))}else L=g(_,a,D,N,U,o);D>=V&&(A+=x(a,V,D)+L,V=D+_.length)}return A+x(a,V)}]}),!R||!j||P)},5646:function(e,t,n){},5692:function(e,t,n){"use strict";var r=n("c6cd");e.exports=function(e,t){return r[e]||(r[e]=t||{})}},"56ef":function(e,t,n){"use strict";var r=n("d066"),o=n("e330"),i=n("241c"),s=n("7418"),a=n("825a"),c=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=s.f;return n?c(t,n(e)):t}},"577e":function(e,t,n){"use strict";var r=n("f5df"),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},"57b9":function(e,t,n){"use strict";var r=n("c65b"),o=n("d066"),i=n("b622"),s=n("cb2d");e.exports=function(){var e=o("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=i("toPrimitive");t&&!t[a]&&s(t,a,(function(e){return r(n,this)}),{arity:1})}},5899:function(e,t,n){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){"use strict";var r=n("e330"),o=n("1d80"),i=n("577e"),s=n("5899"),a=r("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var n=i(o(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,u,"$1")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},5926:function(e,t,n){"use strict";var r=n("b42e");e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},5982:function(e,t,n){},"59ed":function(e,t,n){"use strict";var r=n("1626"),o=n("0d51"),i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not a function")}},"5a34":function(e,t,n){"use strict";var r=n("44e7"),o=TypeError;e.exports=function(e){if(r(e))throw new o("The method doesn't accept regular expressions");return e}},"5a47":function(e,t,n){"use strict";var r=n("23e7"),o=n("04f8"),i=n("d039"),s=n("7418"),a=n("7b0b"),c=!o||i((function(){s.f(1)}));r({target:"Object",stat:!0,forced:c},{getOwnPropertySymbols:function(e){var t=s.f;return t?t(a(e)):[]}})},"5c6c":function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5e77":function(e,t,n){"use strict";var r=n("83ab"),o=n("1a2d"),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,u=a&&(!r||r&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},"5e7e":function(e,t,n){"use strict";var r,o,i,s,a=n("23e7"),c=n("c430"),u=n("9adc"),l=n("cfe9"),d=n("428f"),f=n("c65b"),p=n("cb2d"),h=n("d2bb"),m=n("d44e"),v=n("2626"),g=n("59ed"),b=n("1626"),y=n("861d"),w=n("19aa"),S=n("4840"),E=n("2cf4").set,C=n("b575"),O=n("44de"),k=n("e667"),I=n("01b4"),x=n("69f3"),T=n("d256"),j=n("4738"),P=n("f069"),R="Promise",A=j.CONSTRUCTOR,V=j.REJECTION_EVENT,M=j.SUBCLASSING,L=x.getterFor(R),_=x.set,D=T&&T.prototype,N=T,B=D,U=l.TypeError,F=l.document,z=l.process,G=P.f,H=G,W=!!(F&&F.createEvent&&l.dispatchEvent),q="unhandledrejection",$="rejectionhandled",Q=0,K=1,X=2,Y=1,J=2,Z=function(e){var t;return!(!y(e)||!b(t=e.then))&&t},ee=function(e,t){var n,r,o,i=t.value,s=t.state===K,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{a?(s||(t.rejection===J&&ie(t),t.rejection=Y),!0===a?n=i:(l&&l.enter(),n=a(i),l&&(l.exit(),o=!0)),n===e.promise?u(new U("Promise-chain cycle")):(r=Z(n))?f(r,n,c,u):c(n)):u(i)}catch(d){l&&!o&&l.exit(),u(d)}},te=function(e,t){e.notified||(e.notified=!0,C((function(){var n,r=e.reactions;while(n=r.get())ee(n,e);e.notified=!1,t&&!e.rejection&&re(e)})))},ne=function(e,t,n){var r,o;W?(r=F.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!V&&(o=l["on"+e])?o(r):e===q&&O("Unhandled promise rejection",n)},re=function(e){f(E,l,(function(){var t,n=e.facade,r=e.value,o=oe(e);if(o&&(t=k((function(){u?z.emit("unhandledRejection",r,n):ne(q,n,r)})),e.rejection=u||oe(e)?J:Y,t.error))throw t.value}))},oe=function(e){return e.rejection!==Y&&!e.parent},ie=function(e){f(E,l,(function(){var t=e.facade;u?z.emit("rejectionHandled",t):ne($,t,e.value)}))},se=function(e,t,n){return function(r){e(t,r,n)}},ae=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=X,te(e,!0))},ce=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new U("Promise can't be resolved itself");var r=Z(t);r?C((function(){var n={done:!1};try{f(r,t,se(ce,n,e),se(ae,n,e))}catch(o){ae(n,o,e)}})):(e.value=t,e.state=K,te(e,!1))}catch(o){ae({done:!1},o,e)}}};if(A&&(N=function(e){w(this,B),g(e),f(r,this);var t=L(this);try{e(se(ce,t),se(ae,t))}catch(n){ae(t,n)}},B=N.prototype,r=function(e){_(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:Q,value:null})},r.prototype=p(B,"then",(function(e,t){var n=L(this),r=G(S(this,N));return n.parent=!0,r.ok=!b(e)||e,r.fail=b(t)&&t,r.domain=u?z.domain:void 0,n.state===Q?n.reactions.add(r):C((function(){ee(r,n)})),r.promise})),o=function(){var e=new r,t=L(e);this.promise=e,this.resolve=se(ce,t),this.reject=se(ae,t)},P.f=G=function(e){return e===N||e===i?new o(e):H(e)},!c&&b(T)&&D!==Object.prototype)){s=D.then,M||p(D,"then",(function(e,t){var n=this;return new N((function(e,t){f(s,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete D.constructor}catch(ue){}h&&h(D,B)}a({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:N}),i=d.Promise,m(N,R,!1,!0),v(R)},"5eed":function(e,t,n){"use strict";var r=n("d256"),o=n("1c7e"),i=n("4738").CONSTRUCTOR;e.exports=i||!o((function(e){r.all(e).then(void 0,(function(){}))}))},"60da":function(e,t,n){"use strict";var r=n("83ab"),o=n("e330"),i=n("c65b"),s=n("d039"),a=n("df75"),c=n("7418"),u=n("d1e7"),l=n("7b0b"),d=n("44ad"),f=Object.assign,p=Object.defineProperty,h=o([].concat);e.exports=!f||s((function(){if(r&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!==f({},e)[n]||a(f({},t)).join("")!==o}))?function(e,t){var n=l(e),o=arguments.length,s=1,f=c.f,p=u.f;while(o>s){var m,v=d(arguments[s++]),g=f?h(a(v),f(v)):a(v),b=g.length,y=0;while(b>y)m=g[y++],r&&!i(p,v,m)||(n[m]=v[m])}return n}:f},6374:function(e,t,n){"use strict";var r=n("cfe9"),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"64e5":function(e,t,n){"use strict";var r=n("e330"),o=n("d039"),i=n("0ccb").start,s=RangeError,a=isFinite,c=Math.abs,u=Date.prototype,l=u.toISOString,d=r(u.getTime),f=r(u.getUTCDate),p=r(u.getUTCFullYear),h=r(u.getUTCHours),m=r(u.getUTCMilliseconds),v=r(u.getUTCMinutes),g=r(u.getUTCMonth),b=r(u.getUTCSeconds);e.exports=o((function(){return"0385-07-25T07:06:39.999Z"!==l.call(new Date(-50000000000001))}))||!o((function(){l.call(new Date(NaN))}))?function(){if(!a(d(this)))throw new s("Invalid time value");var e=this,t=p(e),n=m(e),r=t<0?"-":t>9999?"+":"";return r+i(c(t),r?6:4,0)+"-"+i(g(e)+1,2,0)+"-"+i(f(e),2,0)+"T"+i(h(e),2,0)+":"+i(v(e),2,0)+":"+i(b(e),2,0)+"."+i(n,3,0)+"Z"}:l},6547:function(e,t,n){"use strict";var r=n("e330"),o=n("5926"),i=n("577e"),s=n("1d80"),a=r("".charAt),c=r("".charCodeAt),u=r("".slice),l=function(e){return function(t,n){var r,l,d=i(s(t)),f=o(n),p=d.length;return f<0||f>=p?e?"":void 0:(r=c(d,f),r<55296||r>56319||f+1===p||(l=c(d,f+1))<56320||l>57343?e?a(d,f):r:e?u(d,f,f+2):l-56320+(r-55296<<10)+65536)}};e.exports={codeAt:l(!1),charAt:l(!0)}},"65f0":function(e,t,n){"use strict";var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"68ee":function(e,t,n){"use strict";var r=n("e330"),o=n("d039"),i=n("1626"),s=n("f5df"),a=n("d066"),c=n("8925"),u=function(){},l=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=r(d.exec),p=!d.test(u),h=function(e){if(!i(e))return!1;try{return l(u,[],e),!0}catch(t){return!1}},m=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(d,c(e))}catch(t){return!0}};m.sham=!0,e.exports=!l||o((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?m:h},6964:function(e,t,n){"use strict";var r=n("cb2d");e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},"69f3":function(e,t,n){"use strict";var r,o,i,s=n("cdce"),a=n("cfe9"),c=n("861d"),u=n("9112"),l=n("1a2d"),d=n("c6cd"),f=n("f772"),p=n("d012"),h="Object already initialized",m=a.TypeError,v=a.WeakMap,g=function(e){return i(e)?o(e):r(e,{})},b=function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}};if(s||d.state){var y=d.state||(d.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,r=function(e,t){if(y.has(e))throw new m(h);return t.facade=e,y.set(e,t),t},o=function(e){return y.get(e)||{}},i=function(e){return y.has(e)}}else{var w=f("state");p[w]=!0,r=function(e,t){if(l(e,w))throw new m(h);return t.facade=e,u(e,w,t),t},o=function(e){return l(e,w)?e[w]:{}},i=function(e){return l(e,w)}}e.exports={set:r,get:o,has:i,enforce:g,getterFor:b}},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},"6e6d":function(e,t,n){"use strict";n("feb0")},"6f19":function(e,t,n){"use strict";var r=n("9112"),o=n("0d26"),i=n("b980"),s=Error.captureStackTrace;e.exports=function(e,t,n,a){i&&(s?s(e,t):r(e,"stack",o(n,a)))}},"6f53":function(e,t,n){"use strict";var r=n("83ab"),o=n("d039"),i=n("e330"),s=n("e163"),a=n("df75"),c=n("fc6a"),u=n("d1e7").f,l=i(u),d=i([].push),f=r&&o((function(){var e=Object.create(null);return e[2]=2,!l(e,2)})),p=function(e){return function(t){var n,o=c(t),i=a(o),u=f&&null===s(o),p=i.length,h=0,m=[];while(p>h)n=i[h++],r&&!(u?n in o:l(o,n))||d(m,e?[n,o[n]]:o[n]);return m}};e.exports={entries:p(!0),values:p(!1)}},7149:function(e,t,n){"use strict";var r=n("23e7"),o=n("d066"),i=n("c430"),s=n("d256"),a=n("4738").CONSTRUCTOR,c=n("cdf9"),u=o("Promise"),l=i&&!a;r({target:"Promise",stat:!0,forced:i||a},{resolve:function(e){return c(l&&this===u?s:this,e)}})},7156:function(e,t,n){"use strict";var r=n("1626"),o=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var s,a;return i&&r(s=t.constructor)&&s!==n&&o(a=s.prototype)&&a!==n.prototype&&i(e,a),e}},7234:function(e,t,n){"use strict";e.exports=function(e){return null===e||void 0===e}},7282:function(e,t,n){"use strict";var r=n("e330"),o=n("59ed");e.exports=function(e,t,n){try{return r(o(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(i){}}},7418:function(e,t,n){"use strict";t.f=Object.getOwnPropertySymbols},7442:function(e,t,n){"use strict";n("f45e")},"778f":function(e,t,n){"use strict";n("dd24")},"77ce":function(e,t,n){},7839:function(e,t,n){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,n){"use strict";var r=n("cc12"),o=r("span").classList,i=o&&o.constructor&&o.constructor.prototype;e.exports=i===Object.prototype?void 0:i},"7b0b":function(e,t,n){"use strict";var r=n("1d80"),o=Object;e.exports=function(e){return o(r(e))}},"7c73":function(e,t,n){"use strict";var r,o=n("825a"),i=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),d=">",f="<",p="prototype",h="script",m=l("IE_PROTO"),v=function(){},g=function(e){return f+h+d+e+f+"/"+h+d},b=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=u("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&r?b(r):y():b(r);var e=s.length;while(e--)delete w[p][s[e]];return w()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[p]=o(e),n=new v,v[p]=null,n[m]=e):n=w(),void 0===t?n:i.f(n,t)}},"7d09":function(e,t,n){"use strict";n("908e")},"7d54":function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("2266"),s=n("59ed"),a=n("825a"),c=n("46c4"),u=n("2a62"),l=n("f99f"),d=l("forEach",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){a(this);try{s(e)}catch(r){u(this,"throw",r)}if(d)return o(d,this,e);var t=c(this),n=0;i(t,(function(t){e(t,n++)}),{IS_RECORD:!0})}})},"7db0":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").find,i=n("44d2"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},8131:function(e,t,n){},8172:function(e,t,n){"use strict";var r=n("e065"),o=n("57b9");r("toPrimitive"),o()},"81a0":function(e,t,n){},"825a":function(e,t,n){"use strict";var r=n("861d"),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not an object")}},"83ab":function(e,t,n){"use strict";var r=n("d039");e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("83ab"),o=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){r?o.f(e,t,i(0,n)):e[t]=n}},8558:function(e,t,n){"use strict";var r=n("cfe9"),o=n("b5db"),i=n("c6b6"),s=function(e){return o.slice(0,e.length)===e};e.exports=function(){return s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"}()},"861d":function(e,t,n){"use strict";var r=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},"87d4":function(e,t,n){e.exports={ResizeSensor:n("2ad6"),ElementQueries:n("ae72")}},8925:function(e,t,n){"use strict";var r=n("e330"),o=n("1626"),i=n("c6cd"),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8bbf":function(t,n){t.exports=e},"908e":function(e,t,n){},"90d8":function(e,t,n){"use strict";var r=n("c65b"),o=n("1a2d"),i=n("3a9b"),s=n("0f33"),a=n("ad6d"),c=RegExp.prototype;e.exports=s.correct?function(e){return e.flags}:function(e){return s.correct||!i(c,e)||o(e,"flags")?e.flags:r(a,e)}},"90e3":function(e,t,n){"use strict";var r=n("e330"),o=0,i=Math.random(),s=r(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},"910d":function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("59ed"),s=n("825a"),a=n("46c4"),c=n("c5cc"),u=n("9bdd"),l=n("c430"),d=n("2a62"),f=n("2baa"),p=n("f99f"),h=!l&&!f("filter",(function(){})),m=!l&&!h&&p("filter",TypeError),v=l||h||m,g=c((function(){var e,t,n,r=this.iterator,i=this.predicate,a=this.next;while(1){if(e=s(o(a,r)),t=this.done=!!e.done,t)return;if(n=e.value,u(r,i,[n,this.counter++],!0))return n}}));r({target:"Iterator",proto:!0,real:!0,forced:v},{filter:function(e){s(this);try{i(e)}catch(t){d(this,"throw",t)}return m?o(m,this,e):new g(a(this),{predicate:e})}})},9112:function(e,t,n){"use strict";var r=n("83ab"),o=n("9bf2"),i=n("5c6c");e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9224:function(e){e.exports=JSON.parse('{"a":"1.6.3"}')},9263:function(e,t,n){"use strict";var r=n("c65b"),o=n("e330"),i=n("577e"),s=n("ad6d"),a=n("9f7f"),c=n("5692"),u=n("7c73"),l=n("69f3").get,d=n("fce3"),f=n("107c"),p=c("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,m=h,v=o("".charAt),g=o("".indexOf),b=o("".replace),y=o("".slice),w=function(){var e=/a/,t=/b*/g;return r(h,e,"a"),r(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),S=a.BROKEN_CARET,E=void 0!==/()??/.exec("")[1],C=w||E||S||d||f;C&&(m=function(e){var t,n,o,a,c,d,f,C=this,O=l(C),k=i(e),I=O.raw;if(I)return I.lastIndex=C.lastIndex,t=r(m,I,k),C.lastIndex=I.lastIndex,t;var x=O.groups,T=S&&C.sticky,j=r(s,C),P=C.source,R=0,A=k;if(T&&(j=b(j,"y",""),-1===g(j,"g")&&(j+="g"),A=y(k,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==v(k,C.lastIndex-1))&&(P="(?: "+P+")",A=" "+A,R++),n=new RegExp("^(?:"+P+")",j)),E&&(n=new RegExp("^"+P+"$(?!\\s)",j)),w&&(o=C.lastIndex),a=r(h,T?n:C,A),T?a?(a.input=y(a.input,R),a[0]=y(a[0],R),a.index=C.lastIndex,C.lastIndex+=a[0].length):C.lastIndex=0:w&&a&&(C.lastIndex=C.global?a.index+a[0].length:o),E&&a&&a.length>1&&r(p,a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&x)for(a.groups=d=u(null),c=0;c<x.length;c++)f=x[c],d[f[0]]=a[f[1]];return a}),e.exports=m},9485:function(e,t,n){"use strict";var r=n("23e7"),o=n("2266"),i=n("59ed"),s=n("825a"),a=n("46c4"),c=n("2a62"),u=n("f99f"),l=n("2ba4"),d=n("d039"),f=TypeError,p=d((function(){[].keys().reduce((function(){}),void 0)})),h=!p&&u("reduce",f);r({target:"Iterator",proto:!0,real:!0,forced:p||h},{reduce:function(e){s(this);try{i(e)}catch(d){c(this,"throw",d)}var t=arguments.length<2,n=t?void 0:arguments[1];if(h)return l(h,this,t?[e]:[e,n]);var r=a(this),u=0;if(o(r,(function(r){t?(t=!1,n=r):n=e(n,r,u),u++}),{IS_RECORD:!0}),t)throw new f("Reduce of empty iterator with no initial value");return n}})},"94ca":function(e,t,n){"use strict";var r=n("d039"),o=n("1626"),i=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n===l||n!==u&&(o(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),s=n("861d"),a=n("7b0b"),c=n("07fa"),u=n("3511"),l=n("8418"),d=n("65f0"),f=n("1dde"),p=n("b622"),h=n("1212"),m=p("isConcatSpreadable"),v=h>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),g=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)},b=!v||!f("concat");r({target:"Array",proto:!0,arity:1,forced:b},{concat:function(e){var t,n,r,o,i,s=a(this),f=d(s,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?s:arguments[t],g(i))for(o=c(i),u(p+o),n=0;n<o;n++,p++)n in i&&l(f,p,i[n]);else u(p+1),l(f,p++,i);return f.length=p,f}})},"99f4":function(e,t,n){"use strict";var r=n("b5db");e.exports=/MSIE|Trident/.test(r)},"9a1f":function(e,t,n){"use strict";var r=n("c65b"),o=n("59ed"),i=n("825a"),s=n("0d51"),a=n("35a1"),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(o(n))return i(r(n,e));throw new c(s(e)+" is not iterable")}},"9adc":function(e,t,n){"use strict";var r=n("8558");e.exports="NODE"===r},"9bdd":function(e,t,n){"use strict";var r=n("825a"),o=n("2a62");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){o(e,"throw",s)}}},"9bf2":function(e,t,n){"use strict";var r=n("83ab"),o=n("0cfb"),i=n("aed9"),s=n("825a"),a=n("a04b"),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=r?i?function(e,t,n){if(s(e),t=a(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=l(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(s(e),t=a(t),s(n),o)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9f7f":function(e,t,n){"use strict";var r=n("d039"),o=n("cfe9"),i=o.RegExp,s=r((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=s||r((function(){return!i("a","y").sticky})),c=s||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:s}},a04b:function(e,t,n){"use strict";var r=n("c04e"),o=n("d9b5");e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},a15b:function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),i=n("44ad"),s=n("fc6a"),a=n("a640"),c=o([].join),u=i!==Object,l=u||!a("join",",");r({target:"Array",proto:!0,forced:l},{join:function(e){return c(s(this),void 0===e?",":e)}})},a2a5:function(e,t,n){"use strict";n("81a0")},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("7b0b"),i=n("23cb"),s=n("5926"),a=n("07fa"),c=n("3a34"),u=n("3511"),l=n("65f0"),d=n("8418"),f=n("083a"),p=n("1dde"),h=p("splice"),m=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,p,h,g,b,y=o(this),w=a(y),S=i(e,w),E=arguments.length;for(0===E?n=r=0:1===E?(n=0,r=w-S):(n=E-2,r=v(m(s(t),0),w-S)),u(w+n-r),p=l(y,r),h=0;h<r;h++)g=S+h,g in y&&d(p,h,y[g]);if(p.length=r,n<r){for(h=S;h<w-r;h++)g=h+r,b=h+n,g in y?y[b]=y[g]:f(y,b);for(h=w;h>w-r+n;h--)f(y,h-1)}else if(n>r)for(h=w-r;h>S;h--)g=h+r-1,b=h+n-1,g in y?y[b]=y[g]:f(y,b);for(h=0;h<n;h++)y[h+S]=arguments[h+2];return c(y,w-r+n),p}})},a4d3:function(e,t,n){"use strict";n("d9f5"),n("b4f8"),n("c513"),n("e9c4"),n("5a47")},a630:function(e,t,n){"use strict";var r=n("23e7"),o=n("4df4"),i=n("1c7e"),s=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:s},{from:o})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},a706:function(e,t,n){"use strict";n("001d")},a732:function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("2266"),s=n("59ed"),a=n("825a"),c=n("46c4"),u=n("2a62"),l=n("f99f"),d=l("some",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(e){a(this);try{s(e)}catch(r){u(this,"throw",r)}if(d)return o(d,this,e);var t=c(this),n=0;return i(t,(function(t,r){if(e(t,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},a9e3:function(e,t,n){"use strict";var r=n("23e7"),o=n("c430"),i=n("83ab"),s=n("cfe9"),a=n("428f"),c=n("e330"),u=n("94ca"),l=n("1a2d"),d=n("7156"),f=n("3a9b"),p=n("d9b5"),h=n("c04e"),m=n("d039"),v=n("241c").f,g=n("06cf").f,b=n("9bf2").f,y=n("408a"),w=n("58a8").trim,S="Number",E=s[S],C=a[S],O=E.prototype,k=s.TypeError,I=c("".slice),x=c("".charCodeAt),T=function(e){var t=h(e,"number");return"bigint"==typeof t?t:j(t)},j=function(e){var t,n,r,o,i,s,a,c,u=h(e,"number");if(p(u))throw new k("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=w(u),t=x(u,0),43===t||45===t){if(n=x(u,2),88===n||120===n)return NaN}else if(48===t){switch(x(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(i=I(u,2),s=i.length,a=0;a<s;a++)if(c=x(i,a),c<48||c>o)return NaN;return parseInt(i,r)}return+u},P=u(S,!E(" 0o1")||!E("0b1")||E("+0x1")),R=function(e){return f(O,e)&&m((function(){y(e)}))},A=function(e){var t=arguments.length<1?0:E(T(e));return R(this)?d(Object(t),this,A):t};A.prototype=O,P&&!o&&(O.constructor=A),r({global:!0,constructor:!0,wrap:!0,forced:P},{Number:A});var V=function(e,t){for(var n,r=i?v(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;r.length>o;o++)l(t,n=r[o])&&!l(e,n)&&b(e,n,g(t,n))};o&&C&&V(a[S],C),(P||o)&&V(a[S],E)},aa1f:function(e,t,n){"use strict";var r=n("83ab"),o=n("d039"),i=n("825a"),s=n("e391"),a=Error.prototype.toString,c=o((function(){if(r){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==a.call(e))return!0}return"2: 1"!==a.call({message:1,name:2})||"Error"!==a.call({})}));e.exports=c?function(){var e=i(this),t=s(e.name,"Error"),n=s(e.message);return t?n?t+": "+n:t:n}:a},aaf0:function(e,t,n){"use strict";n("b858")},ab13:function(e,t,n){"use strict";var r=n("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},ab36:function(e,t,n){"use strict";var r=n("861d"),o=n("9112");e.exports=function(e,t){r(t)&&"cause"in t&&o(e,"cause",t.cause)}},ab43:function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("59ed"),s=n("825a"),a=n("46c4"),c=n("c5cc"),u=n("9bdd"),l=n("2a62"),d=n("2baa"),f=n("f99f"),p=n("c430"),h=!p&&!d("map",(function(){})),m=!p&&!h&&f("map",TypeError),v=p||h||m,g=c((function(){var e=this.iterator,t=s(o(this.next,e)),n=this.done=!!t.done;if(!n)return u(e,this.mapper,[t.value,this.counter++],!0)}));r({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(e){s(this);try{i(e)}catch(t){l(this,"throw",t)}return m?o(m,this,e):new g(a(this),{mapper:e})}})},ab8b:function(e,t,n){},ac1f:function(e,t,n){"use strict";var r=n("23e7"),o=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},accc:function(e,t,n){"use strict";var r=n("23e7"),o=n("64e5");r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},addb:function(e,t,n){"use strict";var r=n("f36a"),o=Math.floor,i=function(e,t){var n=e.length;if(n<8){var s,a,c=1;while(c<n){a=c,s=e[c];while(a&&t(e[a-1],s)>0)e[a]=e[--a];a!==c++&&(e[a]=s)}}else{var u=o(n/2),l=i(r(e,0,u),t),d=i(r(e,u),t),f=l.length,p=d.length,h=0,m=0;while(h<f||m<p)e[h+m]=h<f&&m<p?t(l[h],d[m])<=0?l[h++]:d[m++]:h<f?l[h++]:d[m++]}return e};e.exports=i},ae72:function(e,t,n){"use strict";var r,o,i;(function(s,a){o=[n("2ad6")],r=a,i="function"===typeof r?r.apply(t,o):r,void 0===i||(e.exports=i)})("undefined"!==typeof window&&window,(function(e){var t=function(){var t,n={},r=[];function o(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function i(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function s(e,t){var n=t.split(/\d/),r=n[n.length-1];switch(t=parseFloat(t),r){case"px":return t;case"em":return t*o(e);case"rem":return t*o();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var i=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100,a=Math["vmin"===r?"min":"max"];return t*a(i,s);default:return t}}function a(e,t){var r,o,a,c,u,l,d,f;this.element=e;var p=["min-width","min-height","max-width","max-height"];this.call=function(){for(r in a=i(this.element),l={},n[t])n[t].hasOwnProperty(r)&&(o=n[t][r],c=s(this.element,o.value),u="width"===o.property?a.width:a.height,f=o.mode+"-"+o.property,d="","min"===o.mode&&u>=c&&(d+=o.value),"max"===o.mode&&u<=c&&(d+=o.value),l[f]||(l[f]=""),d&&-1===(" "+l[f]+" ").indexOf(" "+d+" ")&&(l[f]+=" "+d));for(var e in p)p.hasOwnProperty(e)&&(l[p[e]]?this.element.setAttribute(p[e],l[p[e]].substr(1)):this.element.removeAttribute(p[e]))}}function c(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new a(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function u(e,o,i,s){if("undefined"===typeof n[e]){n[e]=[];var a=r.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+a+"px;}",r.push(e)}n[e].push({mode:o,property:i,value:s})}function l(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"===typeof $$||(t=$$),t||"undefined"===typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function d(e){var t=l(e);for(var r in n)if(n.hasOwnProperty(r))for(var o=t(r,e),i=0,s=o.length;i<s;i++)c(o[i],r)}function f(t){var n=[],r=[],o=[],i=0,s=-1,a=[];for(var c in t.children)if(t.children.hasOwnProperty(c)&&t.children[c].tagName&&"img"===t.children[c].tagName.toLowerCase()){n.push(t.children[c]);var u=t.children[c].getAttribute("min-width")||t.children[c].getAttribute("data-min-width"),l=t.children[c].getAttribute("data-src")||t.children[c].getAttribute("url");o.push(l);var d={minWidth:u};r.push(d),u?t.children[c].style.display="none":(i=n.length-1,t.children[c].style.display="block")}function f(){var e,c=!1;for(e in n)n.hasOwnProperty(e)&&r[e].minWidth&&t.offsetWidth>r[e].minWidth&&(c=e);if(c||(c=i),s!==c)if(a[c])n[s].style.display="none",n[c].style.display="block",s=c;else{var u=new Image;u.onload=function(){n[c].src=o[c],n[s].style.display="none",n[c].style.display="block",a[c]=!0,s=c},u.src=o[c]}else n[c].src=o[c]}s=i,t.resizeSensorInstance=new e(t,f),f()}function p(){for(var e=l(),t=e("[data-responsive-image],[responsive-image]"),n=0,r=t.length;n<r;n++)f(t[n])}var h=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,m=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function v(e){var t,n,r,o;e=e.replace(/'/g,'"');while(null!==(t=h.exec(e))){n=t[1]+t[3],r=t[2];while(null!==(o=m.exec(r)))u(n,o[1],o[2],o[3])}}function g(e){var t="";if(e)if("string"===typeof e)e=e.toLowerCase(),-1===e.indexOf("min-width")&&-1===e.indexOf("max-width")||v(e);else for(var n=0,r=e.length;n<r;n++)1===e[n].type?(t=e[n].selectorText||e[n].cssText,-1!==t.indexOf("min-height")||-1!==t.indexOf("max-height")?v(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||v(t)):4===e[n].type?g(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&g(e[n].styleSheet.cssRules)}var b=!1;this.init=function(){var n="animationstart";"undefined"!==typeof document.documentElement.style["webkitAnimationName"]?n="webkitAnimationStart":"undefined"!==typeof document.documentElement.style["MozAnimationName"]?n="mozanimationstart":"undefined"!==typeof document.documentElement.style["OAnimationName"]&&(n="oanimationstart"),document.body.addEventListener(n,(function(t){var n=t.target,o=n&&window.getComputedStyle(n,null),i=o&&o.getPropertyValue("animation-name"),s=i&&-1!==i.indexOf("element-queries");if(s){n.elementQueriesSensor=new e(n,(function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()}));var a=window.getComputedStyle(n.resizeSensor,null),u=a.getPropertyValue("min-width");u=parseInt(u.replace("px","")),c(t.target,r[u])}})),b||(t=document.createElement("style"),t.type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),b=!0);for(var o=0,i=document.styleSheets.length;o<i;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),g(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(s){}p()},this.findElementQueriesElements=function(e){d(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};var n=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){n(t.init)},t}))},ae93:function(e,t,n){"use strict";var r,o,i,s=n("d039"),a=n("1626"),c=n("861d"),u=n("7c73"),l=n("e163"),d=n("cb2d"),f=n("b622"),p=n("c430"),h=f("iterator"),m=!1;[].keys&&(i=[].keys(),"next"in i?(o=l(l(i)),o!==Object.prototype&&(r=o)):m=!0);var v=!c(r)||s((function(){var e={};return r[h].call(e)!==e}));v?r={}:p&&(r=u(r)),a(r[h])||d(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},aeb0:function(e,t,n){"use strict";var r=n("9bf2").f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},aed9:function(e,t,n){"use strict";var r=n("83ab"),o=n("d039");e.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b041:function(e,t,n){"use strict";var r=n("00ee"),o=n("f5df");e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},b3ad:function(e,t,n){"use strict";n("77ce")},b42e:function(e,t,n){"use strict";var r=Math.ceil,o=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?o:r)(t)}},b4f8:function(e,t,n){"use strict";var r=n("23e7"),o=n("d066"),i=n("1a2d"),s=n("577e"),a=n("5692"),c=n("0b43"),u=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=s(e);if(i(u,t))return u[t];var n=o("Symbol")(t);return u[t]=n,l[n]=t,n}})},b575:function(e,t,n){"use strict";var r,o,i,s,a,c=n("cfe9"),u=n("157a"),l=n("0366"),d=n("2cf4").set,f=n("01b4"),p=n("52c8"),h=n("ebc1"),m=n("ec87"),v=n("9adc"),g=c.MutationObserver||c.WebKitMutationObserver,b=c.document,y=c.process,w=c.Promise,S=u("queueMicrotask");if(!S){var E=new f,C=function(){var e,t;v&&(e=y.domain)&&e.exit();while(t=E.get())try{t()}catch(n){throw E.head&&r(),n}e&&e.enter()};p||v||m||!g||!b?!h&&w&&w.resolve?(s=w.resolve(void 0),s.constructor=w,a=l(s.then,s),r=function(){a(C)}):v?r=function(){y.nextTick(C)}:(d=l(d,c),r=function(){d(C)}):(o=!0,i=b.createTextNode(""),new g(C).observe(i,{characterData:!0}),r=function(){i.data=o=!o}),S=function(e){E.head||r(),E.add(e)}}e.exports=S},b5db:function(e,t,n){"use strict";var r=n("cfe9"),o=r.navigator,i=o&&o.userAgent;e.exports=i?String(i):""},b622:function(e,t,n){"use strict";var r=n("cfe9"),o=n("5692"),i=n("1a2d"),s=n("90e3"),a=n("04f8"),c=n("fdbf"),u=r.Symbol,l=o("wks"),d=c?u["for"]||u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=a&&i(u,e)?u[e]:d("Symbol."+e)),l[e]}},b64b:function(e,t,n){"use strict";var r=n("23e7"),o=n("7b0b"),i=n("df75"),s=n("d039"),a=s((function(){i(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return i(o(e))}})},b64e:function(e,t,n){"use strict";var r=n("2a62");e.exports=function(e,t,n){for(var o=e.length-1;o>=0;o--)if(void 0!==e[o])try{n=r(e[o].iterator,t,n)}catch(i){t="throw",n=i}if("throw"===t)throw n;return n}},b680:function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),i=n("5926"),s=n("408a"),a=n("1148"),c=n("d039"),u=RangeError,l=String,d=Math.floor,f=o(a),p=o("".slice),h=o(1.1.toFixed),m=function(e,t,n){return 0===t?n:t%2===1?m(e,t-1,n*e):m(e*e,t/2,n)},v=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},g=function(e,t,n){var r=-1,o=n;while(++r<6)o+=t*e[r],e[r]=o%1e7,o=d(o/1e7)},b=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=d(r/t),r=r%t*1e7},y=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=l(e[t]);n=""===n?r:n+f("0",7-r.length)+r}return n},w=c((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!c((function(){h({})}));r({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,n,r,o,a=s(this),c=i(e),d=[0,0,0,0,0,0],h="",w="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(a!==a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(h="-",a=-a),a>1e-21)if(t=v(a*m(2,69,1))-69,n=t<0?a*m(2,-t,1):a/m(2,t,1),n*=4503599627370496,t=52-t,t>0){g(d,0,n),r=c;while(r>=7)g(d,1e7,0),r-=7;g(d,m(10,r,1),0),r=t-1;while(r>=23)b(d,1<<23),r-=23;b(d,1<<r),g(d,1,1),b(d,2),w=y(d)}else g(d,0,n),g(d,1<<-t,0),w=y(d)+f("0",c);return c>0?(o=w.length,w=h+(o<=c?"0."+f("0",c-o)+w:p(w,0,o-c)+"."+p(w,o-c))):w=h+w,w}})},b727:function(e,t,n){"use strict";var r=n("0366"),o=n("e330"),i=n("44ad"),s=n("7b0b"),a=n("07fa"),c=n("65f0"),u=o([].push),l=function(e){var t=1===e,n=2===e,o=3===e,l=4===e,d=6===e,f=7===e,p=5===e||d;return function(h,m,v,g){for(var b,y,w=s(h),S=i(w),E=a(S),C=r(m,v),O=0,k=g||c,I=t?k(h,E):n||f?k(h,0):void 0;E>O;O++)if((p||O in S)&&(b=S[O],y=C(b,O,w),e))if(t)I[O]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return O;case 2:u(I,b)}else switch(e){case 4:return!1;case 7:u(I,b)}return d?-1:o||l?l:I}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},b858:function(e,t,n){},b980:function(e,t,n){"use strict";var r=n("d039"),o=n("5c6c");e.exports=!r((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},c03e:function(e,t,n){"use strict";n("e444")},c04e:function(e,t,n){"use strict";var r=n("c65b"),o=n("861d"),i=n("d9b5"),s=n("dc4a"),a=n("485a"),c=n("b622"),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n,c=s(e,l);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!o(n)||i(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},c1f9:function(e,t,n){"use strict";var r=n("23e7"),o=n("2266"),i=n("8418");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},c20d:function(e,t,n){"use strict";var r=n("cfe9"),o=n("d039"),i=n("e330"),s=n("577e"),a=n("58a8").trim,c=n("5899"),u=r.parseInt,l=r.Symbol,d=l&&l.iterator,f=/^[+-]?0x/i,p=i(f.exec),h=8!==u(c+"08")||22!==u(c+"0x16")||d&&!o((function(){u(Object(d))}));e.exports=h?function(e,t){var n=a(s(e));return u(n,t>>>0||(p(f,n)?16:10))}:u},c236:function(e,t,n){},c430:function(e,t,n){"use strict";e.exports=!1},c513:function(e,t,n){"use strict";var r=n("23e7"),o=n("1a2d"),i=n("d9b5"),s=n("0d51"),a=n("5692"),c=n("0b43"),u=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!i(e))throw new TypeError(s(e)+" is not a symbol");if(o(u,e))return u[e]}})},c5cc:function(e,t,n){"use strict";var r=n("c65b"),o=n("7c73"),i=n("9112"),s=n("6964"),a=n("b622"),c=n("69f3"),u=n("dc4a"),l=n("ae93").IteratorPrototype,d=n("4754"),f=n("2a62"),p=n("b64e"),h=a("toStringTag"),m="IteratorHelper",v="WrapForValidIterator",g="normal",b="throw",y=c.set,w=function(e){var t=c.getterFor(e?v:m);return s(o(l),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return d(void 0,!0);try{var r=n.nextHandler();return n.returnHandlerResult?r:d(r,n.done)}catch(o){throw n.done=!0,o}},return:function(){var n=t(this),o=n.iterator;if(n.done=!0,e){var i=u(o,"return");return i?r(i,o):d(void 0,!0)}if(n.inner)try{f(n.inner.iterator,g)}catch(s){return f(o,b,s)}if(n.openIters)try{p(n.openIters,g)}catch(s){return f(o,b,s)}return o&&f(o,g),d(void 0,!0)}})},S=w(!0),E=w(!1);i(E,h,"Iterator Helper"),e.exports=function(e,t,n){var r=function(r,o){o?(o.iterator=r.iterator,o.next=r.next):o=r,o.type=t?v:m,o.returnHandlerResult=!!n,o.nextHandler=e,o.counter=0,o.done=!1,y(this,o)};return r.prototype=t?S:E,r}},c65b:function(e,t,n){"use strict";var r=n("40d5"),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},c6b6:function(e,t,n){"use strict";var r=n("e330"),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},c6cd:function(e,t,n){"use strict";var r=n("c430"),o=n("cfe9"),i=n("6374"),s="__core-js_shared__",a=e.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.45.1",mode:r?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},c6d2:function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("c430"),s=n("5e77"),a=n("1626"),c=n("dcc3"),u=n("e163"),l=n("d2bb"),d=n("d44e"),f=n("9112"),p=n("cb2d"),h=n("b622"),m=n("3f8c"),v=n("ae93"),g=s.PROPER,b=s.CONFIGURABLE,y=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,S=h("iterator"),E="keys",C="values",O="entries",k=function(){return this};e.exports=function(e,t,n,s,h,v,I){c(n,t,s);var x,T,j,P=function(e){if(e===h&&L)return L;if(!w&&e&&e in V)return V[e];switch(e){case E:return function(){return new n(this,e)};case C:return function(){return new n(this,e)};case O:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",A=!1,V=e.prototype,M=V[S]||V["@@iterator"]||h&&V[h],L=!w&&M||P(h),_="Array"===t&&V.entries||M;if(_&&(x=u(_.call(new e)),x!==Object.prototype&&x.next&&(i||u(x)===y||(l?l(x,y):a(x[S])||p(x,S,k)),d(x,R,!0,!0),i&&(m[R]=k))),g&&h===C&&M&&M.name!==C&&(!i&&b?f(V,"name",C):(A=!0,L=function(){return o(M,this)})),h)if(T={values:P(C),keys:v?L:P(E),entries:P(O)},I)for(j in T)(w||A||!(j in V))&&p(V,j,T[j]);else r({target:t,proto:!0,forced:w||A},T);return i&&!I||V[S]===L||p(V,S,L,{name:h}),m[t]=L,T}},c740:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),s="findIndex",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},c7df:function(e,t,n){"use strict";n("5646")},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c975:function(e,t,n){"use strict";var r=n("23e7"),o=n("4625"),i=n("4d64").indexOf,s=n("a640"),a=o([].indexOf),c=!!a&&1/a([1],1,-0)<0,u=c||!s("indexOf");r({target:"Array",proto:!0,forced:u},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?a(this,e,t)||0:i(this,e,t)}})},ca84:function(e,t,n){"use strict";var r=n("e330"),o=n("1a2d"),i=n("fc6a"),s=n("4d64").indexOf,a=n("d012"),c=r([].push);e.exports=function(e,t){var n,r=i(e),u=0,l=[];for(n in r)!o(a,n)&&o(r,n)&&c(l,n);while(t.length>u)o(r,n=t[u++])&&(~s(l,n)||c(l,n));return l}},caad:function(e,t,n){"use strict";var r=n("23e7"),o=n("4d64").includes,i=n("d039"),s=n("44d2"),a=i((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:a},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cb2d:function(e,t,n){"use strict";var r=n("1626"),o=n("9bf2"),i=n("13d2"),s=n("6374");e.exports=function(e,t,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(r(n)&&i(n,u,a),a.global)c?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},cc12:function(e,t,n){"use strict";var r=n("cfe9"),o=n("861d"),i=r.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},cc98:function(e,t,n){"use strict";var r=n("23e7"),o=n("c430"),i=n("4738").CONSTRUCTOR,s=n("d256"),a=n("d066"),c=n("1626"),u=n("cb2d"),l=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&c(s)){var d=a("Promise").prototype["catch"];l["catch"]!==d&&u(l,"catch",d,{unsafe:!0})}},cca6:function(e,t,n){"use strict";var r=n("23e7"),o=n("60da");r({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},cd74:function(e,t,n){},cdce:function(e,t,n){"use strict";var r=n("cfe9"),o=n("1626"),i=r.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},cdf9:function(e,t,n){"use strict";var r=n("825a"),o=n("861d"),i=n("f069");e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e),s=n.resolve;return s(t),n.promise}},cfe9:function(e,t,n){"use strict";(function(t){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},d012:function(e,t,n){"use strict";e.exports={}},d039:function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){"use strict";var r=n("cfe9"),o=n("1626"),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},d256:function(e,t,n){"use strict";var r=n("cfe9");e.exports=r.Promise},d28b:function(e,t,n){"use strict";var r=n("e065");r("iterator")},d2bb:function(e,t,n){"use strict";var r=n("7282"),o=n("861d"),i=n("1d80"),s=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),s(r),o(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0)},d3b7:function(e,t,n){"use strict";var r=n("00ee"),o=n("cb2d"),i=n("b041");r||o(Object.prototype,"toString",i,{unsafe:!0})},d401:function(e,t,n){"use strict";var r=n("cb2d"),o=n("aa1f"),i=Error.prototype;i.toString!==o&&r(i,"toString",o)},d44e:function(e,t,n){"use strict";var r=n("9bf2").f,o=n("1a2d"),i=n("b622"),s=i("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!o(e,s)&&r(e,s,{configurable:!0,value:t})}},d58f:function(e,t,n){"use strict";var r=n("59ed"),o=n("7b0b"),i=n("44ad"),s=n("07fa"),a=TypeError,c="Reduce of empty array with no initial value",u=function(e){return function(t,n,u,l){var d=o(t),f=i(d),p=s(d);if(r(n),0===p&&u<2)throw new a(c);var h=e?p-1:0,m=e?-1:1;if(u<2)while(1){if(h in f){l=f[h],h+=m;break}if(h+=m,e?h<0:p<=h)throw new a(c)}for(;e?h>=0:p>h;h+=m)h in f&&(l=n(l,f[h],h,d));return l}};e.exports={left:u(!1),right:u(!0)}},d6d6:function(e,t,n){"use strict";var r=TypeError;e.exports=function(e,t){if(e<t)throw new r("Not enough arguments");return e}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("c65b"),o=n("cb2d"),i=n("9263"),s=n("d039"),a=n("b622"),c=n("9112"),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var f=a(e),p=!s((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),h=p&&!s((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!h||n){var m=/./[f],v=t(f,""[e],(function(e,t,n,o,s){var a=t.exec;return a===i||a===l.exec?p&&!s?{done:!0,value:r(m,t,n,o)}:{done:!0,value:r(e,n,t,o)}:{done:!1}}));o(String.prototype,e,v[0]),o(l,f,v[1])}d&&c(l[f],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,i=n("1dde"),s=i("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},d8d3:function(e,t,n){"use strict";n("3bca")},d9b5:function(e,t,n){"use strict";var r=n("d066"),o=n("1626"),i=n("3a9b"),s=n("fdbf"),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&i(t.prototype,a(e))}},d9e2:function(e,t,n){"use strict";var r=n("23e7"),o=n("cfe9"),i=n("2ba4"),s=n("e5cb"),a="WebAssembly",c=o[a],u=7!==new Error("e",{cause:7}).cause,l=function(e,t){var n={};n[e]=s(e,t,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},d=function(e,t){if(c&&c[e]){var n={};n[e]=s(a+"."+e,t,u),r({target:a,stat:!0,constructor:!0,arity:1,forced:u},n)}};l("Error",(function(e){return function(t){return i(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return i(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return i(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return i(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return i(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return i(e,this,arguments)}})),l("URIError",(function(e){return function(t){return i(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return i(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return i(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return i(e,this,arguments)}}))},d9f5:function(e,t,n){"use strict";var r=n("23e7"),o=n("cfe9"),i=n("c65b"),s=n("e330"),a=n("c430"),c=n("83ab"),u=n("04f8"),l=n("d039"),d=n("1a2d"),f=n("3a9b"),p=n("825a"),h=n("fc6a"),m=n("a04b"),v=n("577e"),g=n("5c6c"),b=n("7c73"),y=n("df75"),w=n("241c"),S=n("057f"),E=n("7418"),C=n("06cf"),O=n("9bf2"),k=n("37e8"),I=n("d1e7"),x=n("cb2d"),T=n("edd0"),j=n("5692"),P=n("f772"),R=n("d012"),A=n("90e3"),V=n("b622"),M=n("e538"),L=n("e065"),_=n("57b9"),D=n("d44e"),N=n("69f3"),B=n("b727").forEach,U=P("hidden"),F="Symbol",z="prototype",G=N.set,H=N.getterFor(F),W=Object[z],q=o.Symbol,$=q&&q[z],Q=o.RangeError,K=o.TypeError,X=o.QObject,Y=C.f,J=O.f,Z=S.f,ee=I.f,te=s([].push),ne=j("symbols"),re=j("op-symbols"),oe=j("wks"),ie=!X||!X[z]||!X[z].findChild,se=function(e,t,n){var r=Y(W,t);r&&delete W[t],J(e,t,n),r&&e!==W&&J(W,t,r)},ae=c&&l((function(){return 7!==b(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?se:J,ce=function(e,t){var n=ne[e]=b($);return G(n,{type:F,tag:e,description:t}),c||(n.description=t),n},ue=function(e,t,n){e===W&&ue(re,t,n),p(e);var r=m(t);return p(n),d(ne,r)?(n.enumerable?(d(e,U)&&e[U][r]&&(e[U][r]=!1),n=b(n,{enumerable:g(0,!1)})):(d(e,U)||J(e,U,g(1,b(null))),e[U][r]=!0),ae(e,r,n)):J(e,r,n)},le=function(e,t){p(e);var n=h(t),r=y(n).concat(me(n));return B(r,(function(t){c&&!i(fe,n,t)||ue(e,t,n[t])})),e},de=function(e,t){return void 0===t?b(e):le(b(e),t)},fe=function(e){var t=m(e),n=i(ee,this,t);return!(this===W&&d(ne,t)&&!d(re,t))&&(!(n||!d(this,t)||!d(ne,t)||d(this,U)&&this[U][t])||n)},pe=function(e,t){var n=h(e),r=m(t);if(n!==W||!d(ne,r)||d(re,r)){var o=Y(n,r);return!o||!d(ne,r)||d(n,U)&&n[U][r]||(o.enumerable=!0),o}},he=function(e){var t=Z(h(e)),n=[];return B(t,(function(e){d(ne,e)||d(R,e)||te(n,e)})),n},me=function(e){var t=e===W,n=Z(t?re:h(e)),r=[];return B(n,(function(e){!d(ne,e)||t&&!d(W,e)||te(r,ne[e])})),r};u||(q=function(){if(f($,this))throw new K("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=A(e),n=function(e){var r=void 0===this?o:this;r===W&&i(n,re,e),d(r,U)&&d(r[U],t)&&(r[U][t]=!1);var s=g(1,e);try{ae(r,t,s)}catch(a){if(!(a instanceof Q))throw a;se(r,t,s)}};return c&&ie&&ae(W,t,{configurable:!0,set:n}),ce(t,e)},$=q[z],x($,"toString",(function(){return H(this).tag})),x(q,"withoutSetter",(function(e){return ce(A(e),e)})),I.f=fe,O.f=ue,k.f=le,C.f=pe,w.f=S.f=he,E.f=me,M.f=function(e){return ce(V(e),e)},c&&(T($,"description",{configurable:!0,get:function(){return H(this).description}}),a||x(W,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),B(y(oe),(function(e){L(e)})),r({target:F,stat:!0,forced:!u},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!c},{create:de,defineProperty:ue,defineProperties:le,getOwnPropertyDescriptor:pe}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:he}),_(),D(q,F),R[U]=!0},da1f:function(e,t,n){"use strict";n("5982")},da96:function(e,t,n){},daa2:function(e,t,n){"use strict";n("8131")},dc4a:function(e,t,n){"use strict";var r=n("59ed"),o=n("7234");e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},dcc3:function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,o=n("7c73"),i=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=o(r,{next:i(+!u,n)}),s(e,l,!1,!0),a[l]=c,e}},dd24:function(e,t,n){},ddb0:function(e,t,n){"use strict";var r=n("cfe9"),o=n("fdbc"),i=n("785a"),s=n("e260"),a=n("9112"),c=n("d44e"),u=n("b622"),l=u("iterator"),d=s.values,f=function(e,t){if(e){if(e[l]!==d)try{a(e,l,d)}catch(r){e[l]=d}if(c(e,t,!0),o[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(r){e[n]=s[n]}}};for(var p in o)f(r[p]&&r[p].prototype,p);f(i,"DOMTokenList")},df75:function(e,t,n){"use strict";var r=n("ca84"),o=n("7839");e.exports=Object.keys||function(e){return r(e,o)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(o(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===i(e,-1);return e=n(o(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return u=u.concat(i.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(t=e.charCodeAt(i),47===t){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(o=!1,r=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e014:function(e,t,n){(function(n,r){var o,i,s;(function(n,r){typeof e<"u"?r(t):(i=[t],o=r,s="function"===typeof o?o.apply(t,i):o,void 0===s||(e.exports=s))})(0,(function(e){"use strict";var t,o=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))u.call(t,n)&&l(e,n,t[n]);return e},f=(e,t)=>i(e,s(t)),p=(e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n},h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n<"u"?n:typeof self<"u"?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v,g={exports:{}},b=g.exports;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */function y(){return v||(v=1,function(e){(function(t){var n,r={VERSION:"1.6.1"},o={},i=function(e,t){return function(){return t.apply(e,arguments)}},s=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},a=function(e,t){return{value:e,name:t}};r.TRACE=a(1,"TRACE"),r.DEBUG=a(2,"DEBUG"),r.INFO=a(3,"INFO"),r.TIME=a(4,"TIME"),r.WARN=a(5,"WARN"),r.ERROR=a(8,"ERROR"),r.OFF=a(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,s({level:e},this.context))}};var u=new c({filterLevel:r.OFF});(function(){var e=r;e.enabledFor=i(u,u.enabledFor),e.trace=i(u,u.trace),e.debug=i(u,u.debug),e.time=i(u,u.time),e.timeEnd=i(u,u.timeEnd),e.info=i(u,u.info),e.warn=i(u,u.warn),e.error=i(u,u.error),e.log=e.info})(),r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in u.setLevel(e),o)o.hasOwnProperty(t)&&o[t].setLevel(e)},r.getLevel=function(){return u.getLevel()},r.get=function(e){return o[e]||(o[e]=new c(s({name:e},u.context)))},r.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return typeof console>"u"?function(){}:function(o,i){o=Array.prototype.slice.call(o);var s,a=console.log;i.level===r.TIME?(s=(i.name?"["+i.name+"] ":"")+o[0],"start"===o[1]?console.time?console.time(s):t[s]=(new Date).getTime():console.timeEnd?console.timeEnd(s):n(a,[s+": "+((new Date).getTime()-t[s])+"ms"])):(i.level===r.WARN&&console.warn?a=console.warn:i.level===r.ERROR&&console.error?a=console.error:i.level===r.INFO&&console.info?a=console.info:i.level===r.DEBUG&&console.debug?a=console.debug:i.level===r.TRACE&&console.trace&&(a=console.trace),e.formatter(o,i),n(a,o))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)})(b)}(g)),g.exports}var w=y();const S=m(w),E="0.6.0-RC-8",C=60,O=(null==(t=null==window?void 0:window.navigator)?void 0:t.userAgent)||"No user agent available";let k="",I="",x="",T="",j="",P="",R="",A=0;const V=[];function M(e){function t(e,t){return{ts:Math.round(t.timestamp)||"",ot:"audio"===e?"a":"v",bl:t.jitterBufferDelay||0,br:Math.round(t.bitrateBitsPerSecond||0),pld:t.packetsLostDeltaPerSecond||0,j:t.jitter||0,mtp:t.packetRate||0,mid:t.mid||"",mimeType:t.mimeType||""}}return e.stats=e.stats.reduce((e,n)=>{const r=0!==n.audio.inbounds.length?n.audio.inbounds.map(e=>t("audio",e)):n.audio.outbounds.map(e=>t("audio",e)),o=0!==n.video.inbounds.length?n.video.inbounds.map(e=>t("video",e)):n.video.outbounds.map(e=>t("video",e));return e.concat([...r,...o])},[]),e}const L={initAccountId:e=>{k=""===k?e:k},initStreamName:e=>{I=""===I?e:I},initSubscriberId:e=>{x=""===x?e:x},initStreamViewId:e=>{T=""===T?e:T},initFeedId:e=>{j=""===j?e:j},setConnectionTime:e=>{A=0===A?e:A},setConnectionState:e=>{P=e},setClusterId:e=>{R=""===R?e:R},addStats:e=>{V.length===C&&V.shift(),V.push(e)},get:(e=C,t="JSON")=>{let n;n=!Number.isInteger(e)||e>C||e<=0?C:e;const r={client:"@millicast/millicast-sdk",version:E,timestamp:(new Date).toISOString(),userAgent:O,clusterId:R,accountId:k,streamName:I,subscriberId:x,connection:P,stats:V.slice(-n),connectionDurationMs:(new Date).getTime()-A};return""!==j?r.feedId=j:""!==T&&(r.streamViewId=T),"CMCD"===t?M(r):r}};S.useDefaults({defaultLevel:S.TRACE});const _=["TRACE","DEBUG","INFO","WARN","ERROR"],D=(e,t)=>{e.unshift("[".concat(t.name||"Global","] ").concat((new Date).toISOString()," - ").concat(t.level.name," -"))},N=(e,t)=>t?e.value>=H[t].value:e.value>=G.value,B=(e,t)=>{e=Array.prototype.slice.call(e),e=e.map(e=>"object"==typeof e?JSON.stringify(e):e),D(e,t),0!==F?(z.push(e.join(" ")),z.length>=F&&(z=z.slice(-F))):z=[]},U=S.createDefaultHandler({formatter:D});S.setHandler((e,t)=>{B(e,t),N(t.level,t.name)&&U(e,t);for(const{handler:n,level:r}of W)t.level.value>=r.value&&n(e,t)});let F=1e4,z=[],G=S.OFF;const H={},W=[],q=f(d({},S),{enabledFor:N,getHistory:()=>z,getHistoryMaxSize:()=>F,setHistoryMaxSize:e=>{F=e},setLevel:e=>{G=e;for(const t in H)H[t]=e},getLevel:()=>G,get:e=>{H[e]||(H[e]=G);const t=S.get(e);return t.setLevel=t=>{H[e]=t},t.getLevel=()=>H[e],t},setHandler:(e,t)=>{W.push({handler:e,level:t})},diagnose:(e={})=>{let t;const n={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof e?(n.statsCount=e,t=n):t=d(d({},n),e);const{statsCount:r,historySize:o,minLogLevel:i,statsFormat:s}=t,a=L.get(r,s),c=q.getHistory();if(!Number.isInteger(o)||o<=0)throw new Error("Invalid Argument Exception : historySize must be a positive integer.");if(!_.includes(i.toUpperCase()))throw new Error('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(_.includes(i.toUpperCase())){const e=_.slice(_.indexOf(i.toUpperCase())),t=c.filter(t=>e.some(e=>t.includes(e)));a.history=t.slice(-o)}return a},JSON:"JSON",CMCD:"CMCD",VERSION:E});var Q,K={exports:{}};function X(){if(Q)return K.exports;Q=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}K.exports=i,K.exports.once=g,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,o){var i,s,u;if(a(n),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),u=s[t]),void 0===u)u=s[t]=n,++e._eventsCount;else if("function"==typeof u?u=s[t]=o?[n,u]:[u,n]:o?u.unshift(n):u.push(n),i=c(e),i>0&&u.length>i&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?v(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function g(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}y(e,t,i,{once:!0}),"error"!==t&&b(e,o,{once:!0})}))}function b(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,l=h(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():m(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)o=i[r],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},K.exports}var Y=X();const J=m(Y);var Z,ee={exports:{}};function te(){if(Z)return ee.exports;Z=1,ee.exports=t,ee.exports.filter=n;var e=X().EventEmitter;function t(e,t,n){Array.isArray(n)||(n=[n]);var r=[];return n.forEach((function(n){var o=function(){var e=[].slice.call(arguments);e.unshift(n),t.emit.apply(t,e)};r.push(o),e.on(n,o)})),function(){n.forEach((function(t,n){e.removeListener(t,r[n])}))}}function n(n,r){var o=new e;return t(n,o,r),o}return ee.exports}var ne=te();const re=m(ne);var oe,ie={exports:{}};/*! For license information please see webrtc-stats.js.LICENSE.txt */function se(){return oe||(oe=1,function(e,t){(function(t,n){e.exports=n()})(self,()=>{return e={7:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,i,s,u;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=h(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},156:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var s=n(586);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return i(s).default}}),o(n(284),t),o(n(280),t),o(n(738),t),o(n(767),t)},185:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePacketsLostRatio=t.calculateRate=t.getMediaKind=void 0,t.getMediaKind=e=>{let t=e.kind||e.mediaType;return["audio","video"].includes(t)||"inbound-rtp"!==e.type||(t=e.id.toLocaleLowerCase().includes("video")?"video":"audio"),t},t.calculateRate=(e,t,n,r)=>n&&r?(t-r)/((e-n)/1e3):0,t.calculatePacketsLostRatio=(e,t,n,r)=>{const o=e-(null!=n?n:0),i=o+(t-(null!=r?r:0));return 0===i?0:o/i}},280:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},284:function(e,t,n){var r,o,i,s,a,c,u,l,d,f,p,h,m,v,g,b,y=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},w=this&&this.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},S=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},E=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCStats=void 0;const C=n(7),O=E(n(586)),k=n(738),I=n(185);class x extends C.EventEmitter{constructor(e){super(),r.add(this),o.set(this,void 0),i.set(this,void 0),s.set(this,void 0),a.set(this,null),c.set(this,void 0),u.set(this,null),this.start=()=>{S(this,c,"f").info("WebRTC statistics collection is starting..."),w(this,u,null,"f"),w(this,a,setInterval(S(this,l,"f"),S(this,i,"f")),"f")},this.stop=()=>{S(this,a,"f")&&(clearInterval(S(this,a,"f")),w(this,a,null,"f"),S(this,c,"f").info("WebRTC statistics collection has stopped."))},l.set(this,()=>y(this,void 0,void 0,(function*(){let e,t;try{S(this,c,"f").trace("Requesting WebRTC statistics..."),e=yield S(this,o,"f").call(this),t=(new Date).toISOString()}catch(a){return S(this,c,"f").error("Problem collecting the WebRTC statistics.",a),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(a))}const n=Array.from(e.values()),i={timestamp:t,input:{audio:[],video:[]},output:{audio:[],video:[]}};S(this,s,"f")&&(i.rawStats=e);for(let o=0;o<Object.keys(n).length;o++){const t=n[o];switch(t.type){case"outbound-rtp":const n=t,o=(0,I.getMediaKind)(n);"audio"===o?yield S(this,r,"m",p).call(this,e,n,i):"video"===o&&(yield S(this,r,"m",h).call(this,e,n,i));break;case"inbound-rtp":const s=t;let a=(0,I.getMediaKind)(s);"audio"===a?yield S(this,r,"m",v).call(this,e,s,i):"video"===a&&(yield S(this,r,"m",g).call(this,e,s,i));break;case"candidate-pair":const c=t;c.nominated&&S(this,r,"m",b).call(this,c,i)}}w(this,u,i,"f"),this.emit("stats",i)}))),w(this,c,O.default.get("WebRTCStats"),"f"),w(this,o,e.getStats,"f"),w(this,i,e.getStatsInterval||1e3,"f"),w(this,s,!!e.includeRawStats,"f")}}t.WebRTCStats=x,o=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,r=new WeakSet,d=function(e,t){if(t){const n=e.get(t);if(n)return{mimeType:n.mimeType}}return{}},f=function(e,t,n){return y(this,void 0,void 0,(function*(){var o,i,s,a;const c=(0,I.calculateRate)(t.timestamp,t.bytesSent,null==n?void 0:n.timestamp,null==n?void 0:n.totalBytesSent),u=(0,I.calculateRate)(t.timestamp,t.packetsSent,null==n?void 0:n.timestamp,null==n?void 0:n.totalPacketsSent),l=S(this,r,"m",d).call(this,e,t.codecId);return Object.assign({id:t.id,timestamp:t.timestamp,mid:t.mid,totalBytesSent:t.bytesSent,bytesSentDelta:t.bytesSent-(null!==(o=null==n?void 0:n.totalBytesSent)&&void 0!==o?o:0),totalPacketsSent:t.packetsSent,packetsSentDelta:t.packetsSent-(null!==(i=null==n?void 0:n.totalPacketsSent)&&void 0!==i?i:0),bitrate:c,packetRate:u,targetBitrate:t.targetBitrate,retransmittedPacketsSent:t.retransmittedPacketsSent,retransmittedPacketsSentDelta:t.retransmittedPacketsSent-(null!==(s=null==n?void 0:n.retransmittedPacketsSent)&&void 0!==s?s:0),retransmittedBytesSent:t.retransmittedBytesSent,retransmittedBytesSentDelta:t.retransmittedBytesSent-(null!==(a=null==n?void 0:n.retransmittedBytesSent)&&void 0!==a?a:0)},l)}))},p=function(e,t,n){return y(this,void 0,void 0,(function*(){var o;const i=null===(o=S(this,u,"f"))||void 0===o?void 0:o.output.audio.find(e=>e.id===t.id);if(i&&t.timestamp-i.timestamp<=0)return;const s=yield S(this,r,"m",f).call(this,e,t,i),a=Object.assign({},s);n.output.audio.push(a)}))},h=function(e,t,n){return y(this,void 0,void 0,(function*(){var o;const i=null===(o=S(this,u,"f"))||void 0===o?void 0:o.output.video.find(e=>e.id===t.id);if(i&&t.timestamp-i.timestamp<=0)return;const s=yield S(this,r,"m",f).call(this,e,t,i);let a=k.QualityLimitationReason.none;t.qualityLimitationReason&&(a=t.qualityLimitationReason);const c=Object.assign(Object.assign({},s),{frameWidth:t.frameWidth,frameHeight:t.frameHeight,framesPerSecond:t.framesPerSecond,framesSent:t.framesSent,qualityLimitationReason:a,qualityLimitationDurations:t.qualityLimitationDurations});n.output.video.push(c)}))},m=function(e,t,n){return y(this,void 0,void 0,(function*(){var o,i;const s=(0,I.calculateRate)(t.timestamp,t.bytesReceived,null==n?void 0:n.timestamp,null==n?void 0:n.totalBytesReceived),a=(0,I.calculateRate)(t.timestamp,t.packetsReceived,null==n?void 0:n.timestamp,null==n?void 0:n.totalPacketsReceived),c=(0,I.calculatePacketsLostRatio)(t.packetsLost,t.packetsReceived,null==n?void 0:n.totalPacketsLost,null==n?void 0:n.totalPacketsReceived),u=(null!==(o=t.packetsLost)&&void 0!==o?o:0)-(null!==(i=null==n?void 0:n.totalPacketsLost)&&void 0!==i?i:0),l=S(this,r,"m",d).call(this,e,t.codecId);return Object.assign({id:t.id,timestamp:t.timestamp,mid:t.mid,trackIdentifier:t.trackIdentifier,jitter:t.jitter,jitterBufferDelay:t.jitterBufferDelay,jitterBufferEmittedCount:t.jitterBufferEmittedCount,totalBytesReceived:t.bytesReceived,totalPacketsReceived:t.packetsReceived,totalPacketsLost:t.packetsLost,bitrate:s,packetRate:a,packetLossRatio:c,packetLossDelta:u},l)}))},v=function(e,t,n){return y(this,void 0,void 0,(function*(){var o;const i=null===(o=S(this,u,"f"))||void 0===o?void 0:o.input.audio.find(e=>e.id===t.id);if(i&&t.timestamp-i.timestamp<=0)return;const s=yield S(this,r,"m",m).call(this,e,t,i);n.input.audio.push(s)}))},g=function(e,t,n){return y(this,void 0,void 0,(function*(){var o;const i=null===(o=S(this,u,"f"))||void 0===o?void 0:o.input.video.find(e=>e.id===t.id);if(i&&t.timestamp-i.timestamp<=0)return;const s=yield S(this,r,"m",m).call(this,e,t,i),a=Object.assign(Object.assign({},s),{keyFramesDecoded:t.keyFramesDecoded,frameHeight:t.frameHeight,frameWidth:t.frameWidth,framesDecoded:t.framesDecoded,framesDropped:t.framesDropped,framesPerSecond:t.framesPerSecond,framesReceived:t.framesReceived});n.input.video.push(a)}))},b=function(e,t){t.totalRoundTripTime=e.totalRoundTripTime,t.currentRoundTripTime=e.currentRoundTripTime,t.responsesReceived=e.responsesReceived,t.availableOutgoingBitrate=e.availableOutgoingBitrate,t.availableIncomingBitrate=e.availableIncomingBitrate}},586:function(e,t,n){var r,o;(function(){var i,s={VERSION:"1.6.1"},a={},c=function(e,t){return function(){return t.apply(e,arguments)}},u=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},l=function(e,t){return{value:e,name:t}};s.TRACE=l(1,"TRACE"),s.DEBUG=l(2,"DEBUG"),s.INFO=l(3,"INFO"),s.TIME=l(4,"TIME"),s.WARN=l(5,"WARN"),s.ERROR=l(8,"ERROR"),s.OFF=l(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){i&&this.enabledFor(e)&&i(t,u({level:e},this.context))}};var f,p=new d({filterLevel:s.OFF});(f=s).enabledFor=c(p,p.enabledFor),f.trace=c(p,p.trace),f.debug=c(p,p.debug),f.time=c(p,p.time),f.timeEnd=c(p,p.timeEnd),f.info=c(p,p.info),f.warn=c(p,p.warn),f.error=c(p,p.error),f.log=f.info,s.setHandler=function(e){i=e},s.setLevel=function(e){for(var t in p.setLevel(e),a)a.hasOwnProperty(t)&&a[t].setLevel(e)},s.getLevel=function(){return p.getLevel()},s.get=function(e){return a[e]||(a[e]=new d(u({name:e},p.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return typeof console>"u"?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,a=console.log;o.level===s.TIME?(i=(o.name?"["+o.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(a,[i+": "+((new Date).getTime()-t[i])+"ms"])):(o.level===s.WARN&&console.warn?a=console.warn:o.level===s.ERROR&&console.error?a=console.error:o.level===s.INFO&&console.info?a=console.info:o.level===s.DEBUG&&console.debug?a=console.debug:o.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,o),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},s.setDefaults=s.useDefaults,void 0===(o="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=o)})()},738:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QualityLimitationReason=void 0,function(e){e[e.none=0]="none",e[e.cpu=1]="cpu",e[e.bandwidth=2]="bandwidth",e[e.other=3]="other"}(n||(t.QualityLimitationReason=n={}))},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})}},t={},function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(156);var e,t})}(ie)),ie.exports}var ae=se();const ce=q.get("PeerConnectionStats"),ue={stats:"stats"},le=e=>{const t=e,{input:n,output:r,rawStats:o}=t,i=p(t,["input","output","rawStats"]);return f(d({},i),{audio:{inbounds:e.input.audio.map(e=>{var t=e,{packetLossRatio:n,packetLossDelta:r,bitrate:o}=t,i=p(t,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:n,packetsLostDeltaPerSecond:r,bitrateBitsPerSecond:8*o,bitrate:o},i)}),outbounds:e.output.audio.map(e=>{var t=e,{packetLossRatio:n,packetLossDelta:r,bitrate:o}=t,i=p(t,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:n,packetsLostDeltaPerSecond:r,bitrateBitsPerSecond:8*o,bitrate:o},i)})},video:{inbounds:e.input.video.map(e=>{var t=e,{packetLossRatio:n,packetLossDelta:r,bitrate:o}=t,i=p(t,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:n,packetsLostDeltaPerSecond:r,bitrateBitsPerSecond:8*o,bitrate:o},i)}),outbounds:e.output.video.map(e=>{var t=e,{packetLossRatio:n,packetLossDelta:r,bitrate:o}=t,i=p(t,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:n,packetsLostDeltaPerSecond:r,bitrateBitsPerSecond:8*o,bitrate:o},i)})},raw:e.rawStats})};class de extends J{constructor(e,t={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=e,this.collection=null,this.initialized=!1,t.autoInitStats&&this.init(t.statsIntervalMs)}init(e){if(this.initialized)return void ce.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");ce.info("Initializing peer connection stats");const t=this.peer;try{this.collection=new ae.WebRTCStats({getStatsInterval:e,getStats:()=>t.getStats(),includeRawStats:!0}),this.collection.on("stats",e=>{const t=le(e);L.addStats(t),this.emit(ue.stats,t)}),this.collection.start(),this.initialized=!0}catch(n){ce.error(n)}}parseStats(e){return ce.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){ce.info("Stopping peer connection stats"),this.collection.stop()}}var fe,pe,he,me,ve,ge,be,ye,we,Se,Ee,Ce,Oe,ke,Ie,xe,Te,je,Pe,Re,Ae,Ve={},Me={},Le={},_e={exports:{}};function De(){if(fe)return _e.exports;fe=1;var e=_e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach((function(t){var n=e[t];n.forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),_e.exports}function Ne(){return pe||(pe=1,function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r,o){if(o&&!r)n[o]=t(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(n[r[i]]=t(e[i+1]))},r=function(e,t,r){var o=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:o&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:o?t[e.name]:t;n(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},o=De(),i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},n=[],s=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),s=n[n.length-1]);for(var a=0;a<(o[t]||[]).length;a+=1){var c=o[t][a];if(c.reg.test(i))return r(c,s,i)}})),t.media=n,t};var s=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),o=0;o<r.length;o+=3)n.push({component:r[o],ip:r[o+1],port:r[o+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(Le)),Le}function Be(){if(me)return he;me=1;var e=De(),t=/%[sdv%]/g,n=function(e){var n=1,r=arguments,o=r.length;return e.replace(t,(function(e){if(n>=o)return e;var t=r[n];switch(n+=1,e){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}}))},r=function(e,t,r){var o=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,i=[e+"="+o];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?i.push(r[t.name][a]):i.push(r[t.names[s]])}else i.push(r[t.name]);return n.apply(null,i)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],i=["i","c","b","a"];return he=function(t,n){n=n||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var s=n.outerOrder||o,a=n.innerOrder||i,c=[];return s.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?c.push(r(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){c.push(r(n,e,t))}))}))})),t.media.forEach((function(t){c.push(r("m",e.m[0],t)),a.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?c.push(r(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){c.push(r(n,e,t))}))}))}))})),c.join("\r\n")+"\r\n"},he}function Ue(){if(ve)return Me;ve=1;var e=Ne(),t=Be();return Me.write=t,Me.parse=e.parse,Me.parseParams=e.parseParams,Me.parseFmtpConfig=e.parseFmtpConfig,Me.parsePayloads=e.parsePayloads,Me.parseRemoteCandidates=e.parseRemoteCandidates,Me.parseImageAttributes=e.parseImageAttributes,Me.parseSimulcastStreamList=e.parseSimulcastStreamList,Me}function Fe(){return be||(be=1,ge=function(e){const t=new Intl.Collator(e,{sensitivity:"base"});return(e,n)=>0==t.compare(e,n)}),ge}function ze(){if(we)return ye;we=1;class e{constructor(e,t,n,r,o,i,s,a,c){this.foundation=e,this.componentId=t,this.transport=n,this.priority=r,this.address=o,this.port=i,this.type=s,this.relAddr=a,this.relPort=c}equals(e){return e.foundation===this.foundation&&e.componentId===this.componentId&&e.transport===this.transport&&e.priority===this.priority&&e.address===this.address&&e.port===this.port&&e.type===this.type&&e.relAddr===this.relAddr&&e.relPort===this.relPort}clone(){return new e(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const e={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(e.relAddr=this.relAddr),this.relPort&&(e.relPort=this.relPort),e}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}}return e.expand=function(t){return"CandidateInfo"===t.constructor.name?t:(t=t,new e(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort))},e.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():e.expand(t)},ye=e,ye}function Ge(){if(Ee)return Se;Ee=1;class e{constructor(e,t){this.id=e,this.params=t||[]}clone(){return new e(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}}return e.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:(t=t,new e(t.id,t.params))},e.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():e.expand(t)},Se=e,Se}function He(){if(Oe)return Ce;Oe=1;const e=Ge();class t{constructor(e,t,n){this.codec=e,this.type=t,this.params={},this.rtcpfbs=new Set,n&&this.addParams(n)}clone(){const e=new t(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const e={codec:this.codec,type:this.type};this.rtx&&(e.rtx=this.rtx),this.channels&&(e.channels=this.channels),Object.keys(this.params).length&&(e.params=this.params);for(const t of this.rtcpfbs)e.rtcpfbs||(e.rtcpfbs=[]),e.rtcpfbs.push(t.plain());return e}setRTX(e){this.rtx=e}getType(){return this.type}setType(e){this.type=e}getCodec(){return this.codec}getParams(){return this.params}addParams(e){for(const t in e)this.params[t]=e[t]}addParam(e,t){this.params[e]=t}hasParam(e){return Object.hasOwnProperty.call(this.params,e)}getParam(e,t){if(this.hasParam(e))return this.params[e];if(void 0===t)throw new Error("param ".concat(e," not found and no default value provided"));return""+t}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(e){this.channels=e}addRTCPFeedback(e){this.rtcpfbs.add(e)}getRTCPFeedbacks(){return this.rtcpfbs}}return t.expand=function(n){if("CodecInfo"===n.constructor.name)return n;n=n;const r=new t(n.codec,n.type,n.params);n.rtx&&r.setRTX(n.rtx),n.channels&&r.setChannels(n.channels);for(const t of n.rtcpfbs||[]){const n=e.expand(t);r.addRTCPFeedback(n)}return r},t.clone=function(e){return"CodecInfo"===e.constructor.name?e.clone():t.expand(e)},t.MapFromNames=function(n,r,o){var i;const s=new Map;let a=96;for(const c of n){let n;const u=c.split(";"),l=u.shift().toLowerCase().trim();n="pcmu"===l?0:"pcma"===l?8:++a;const d=new t(l,n);"opus"===l?d.setChannels(2):"multiopus"===l&&d.setChannels(6),r&&"ulpfec"!==l&&"flexfec-03"!==l&&"red"!==l&&d.setRTX(++a);for(const t of o||[])d.addRTCPFeedback(new e(t.id,t.params));for(const e of u){let t=e.split("=");d.addParam(t[0].trim(),null===(i=t[1])||void 0===i?void 0:i.trim())}s.set(n,d)}return s},Ce=t,Ce}function We(){if(Ie)return ke;function e(){var t=this;if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(e){t[e]=Symbol.for("MEDOOZE_SEMANTIC_SDP_"+e)}))}return Ie=1,ke=e,ke}function qe(){if(Te)return xe;Te=1;const e=We()("ACTIVE","PASSIVE","ACTPASS","INACTIVE");return e.byValue=function(t){switch(t){case e.ACTIVE:case e.PASSIVE:case e.ACTPASS:case e.INACTIVE:return t}return e[t.toUpperCase()]},e.toString=function(t){switch(t){case e.ACTIVE:return"active";case e.PASSIVE:return"passive";case e.ACTPASS:return"actpass";case e.INACTIVE:return"inactive"}},e.reverse=function(t,n){switch(t){case e.ACTIVE:return e.PASSIVE;case e.PASSIVE:return e.ACTIVE;case e.ACTPASS:return n?e.ACTIVE:e.PASSIVE;case e.INACTIVE:return e.INACTIVE}},xe=e,xe}function $e(){if(Pe)return je;Pe=1;const e=qe();class t{constructor(e,t,n){this.setup=e,this.hash=t,this.fingerprint=n}clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:e.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(e){this.setup=e}}return t.expand=function(n){return"DTLSInfo"===n.constructor.name?n:(n=n,new t(n.setup?e.byValue(n.setup):e.ACTPASS,n.hash,n.fingerprint))},t.clone=function(e){return"DTLSInfo"===e.constructor.name?e.clone():t.expand(e)},je=t,je}function Qe(){if(Ae)return Re;Ae=1;class e{constructor(e,t,n,r){this.tag=e,this.suite=t,this.keyParams=n,this.sessionParams=r}clone(){return new e(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}}return e.expand=function(t){return"CryptoInfo"===t.constructor.name?t:(t=t,new e(t.tag,t.suite,t.keyParams,t.sessionParams))},e.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():e.expand(t)},Re=e,Re}var Ke,Xe={exports:{}},Ye={exports:{}},Je={},Ze={};function et(){if(Ke)return Ze;Ke=1,Ze.byteLength=a,Ze.toByteArray=u,Ze.fromByteArray=f;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)e[o]=r[o],t[r.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function a(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function c(e,t,n){return 3*(t+n)/4-n}function u(e){var r,o,i=s(e),a=i[0],u=i[1],l=new n(c(e,a,u)),d=0,f=u>0?a-4:a;for(o=0;o<f;o+=4)r=t[e.charCodeAt(o)]<<18|t[e.charCodeAt(o+1)]<<12|t[e.charCodeAt(o+2)]<<6|t[e.charCodeAt(o+3)],l[d++]=r>>16&255,l[d++]=r>>8&255,l[d++]=255&r;return 2===u&&(r=t[e.charCodeAt(o)]<<2|t[e.charCodeAt(o+1)]>>4,l[d++]=255&r),1===u&&(r=t[e.charCodeAt(o)]<<10|t[e.charCodeAt(o+1)]<<4|t[e.charCodeAt(o+2)]>>2,l[d++]=r>>8&255,l[d++]=255&r),l}function l(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function d(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(l(r));return o.join("")}function f(t){for(var n,r=t.length,o=r%3,i=[],s=16383,a=0,c=r-o;a<c;a+=s)i.push(d(t,a,a+s>c?c:a+s));return 1===o?(n=t[r-1],i.push(e[n>>2]+e[n<<4&63]+"==")):2===o&&(n=(t[r-2]<<8)+t[r-1],i.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),i.join("")}return t[45]=62,t[95]=63,Ze}var tt,nt,rt,ot,it,st,at,ct,ut,lt,dt,ft,pt,ht,mt,vt,gt,bt,yt,wt,St,Et,Ct,Ot,kt,It,xt,Tt,jt,Pt,Rt,At,Vt,Mt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Lt(){return tt||(tt=1,Mt.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+d],d+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)},Mt.write=function(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*m}),Mt}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function _t(){return nt||(nt=1,function(e){const t=et(),n=Lt(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const o=2147483647;function i(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return f(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);const o=v(e);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}function d(e){return u(e),s(e<0?0:0|g(e))}function f(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|y(e,t);let r=s(n);const o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function p(e){const t=e.length<0?0:0|g(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(oe(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return p(e)}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function v(e){if(a.isBuffer(e)){const t=0|g(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||ie(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}function g(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ne(e).length;default:if(o)return r?-1:Z(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return V(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return j(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ie(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:C(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,r,o){let i,s=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let r=-1;for(i=n;i<a;i++)if(u(e,i)===u(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(u(e,i+r)!==u(t,r)){n=!1;break}if(n)return i}return-1}function O(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;const i=t.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(ie(r))return s;e[n+s]=r}return s}function k(e,t,n,r){return re(Z(t,e.length-n),e,n,r)}function I(e,t,n,r){return re(ee(t),e,n,r)}function x(e,t,n,r){return re(ne(t),e,n,r)}function T(e,t,n,r){return re(te(t,e.length-n),e,n,r)}function j(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function P(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128===(192&n)&&(c=(31&t)<<6|63&n,c>127&&(i=c));break;case 3:n=e[o+1],r=e[o+2],128===(192&n)&&128===(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return A(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return l(e,t,n)},a.allocUnsafe=function(e){return d(e)},a.allocUnsafeSlow=function(e){return d(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(oe(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=a.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(oe(t,Uint8Array))o+t.length>r.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!a.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},a.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},a.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},a.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(oe(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;let i=o-r,s=n-t;const c=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n);for(let a=0;a<c;++a)if(u[a]!==l[a]){i=u[a],s=l[a];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return O(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function A(e){const t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=R));return n}function V(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function M(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function L(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=t;i<n;++i)o+=se[e[i]];return o}function _(e,t,n){const r=e.slice(t,n);let o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,o){Q(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function U(e,t,n,r,o){Q(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function F(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,t,r,4),n.write(e,t,r,o,23,4),r+4}function G(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,t,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){const n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=ae((function(e){e>>>=0,K(e,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&X(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),a.prototype.readBigUInt64BE=ae((function(e){e>>>=0,K(e,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&X(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=ae((function(e){e>>>=0,K(e,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&X(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),a.prototype.readBigInt64BE=ae((function(e){e>>>=0,K(e,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&X(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=ae((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=ae((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=ae((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=ae((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=a.isBuffer(e)?e:a.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this};const H={};function W(e,t,n){H[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function q(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function $(e,t,n){K(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&X(t,e.length-(n+1))}function Q(e,t,n,r,o,i){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(i+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(i+1)-1).concat(n,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(n),new H.ERR_OUT_OF_RANGE("value",r,e)}$(r,o,i)}function K(e,t){if("number"!=typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,n){throw Math.floor(e)!==e?(K(e,n),new H.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(t),e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){let r='The value of "'.concat(e,'" is out of range.'),o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=q(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=q(o)),o+="n"),r+=" It must be ".concat(t,". Received ").concat(o),r}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function J(e){if(e=e.split("=")[0],e=e.trim().replace(Y,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Z(e,t){let n;t=t||1/0;const r=e.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function ee(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function te(e,t){let n,r,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function ne(e){return t.toByteArray(J(e))}function re(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ie(e){return e!==e}const se=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function ae(e){return typeof BigInt>"u"?ce:e}function ce(){throw new Error("BigInt not supported")}}(Je)),Je}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function Dt(){return rt||(rt=1,function(e,t){var n=_t(),r=n.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=i),i.prototype=Object.create(r.prototype),o(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(Ye,Ye.exports)),Ye.exports}function Nt(){if(ot)return Xe.exports;ot=1;var e=65536,t=4294967295;function n(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var o=Dt().Buffer,i=h.crypto||h.msCrypto;function s(n,s){if(n>t)throw new RangeError("requested too many random bytes");var a=o.allocUnsafe(n);if(n>0)if(n>e)for(var c=0;c<n;c+=e)i.getRandomValues(a.slice(c,c+e));else i.getRandomValues(a);return"function"==typeof s?r.nextTick((function(){s(null,a)})):a}return i&&i.getRandomValues?Xe.exports=s:Xe.exports=n,Xe.exports}function Bt(){if(st)return it;st=1;const e=Nt();class t{constructor(e,t){this.ufrag=e,this.pwd=t,this.lite=!1,this.endOfCandidates=!1}clone(){const e=new t(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const e={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(e.lite=this.lite),this.endOfCandidates&&(e.endOfCandidates=this.endOfCandidates),e}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(e){this.lite=e}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(e){this.endOfCandidates=e}}return t.generate=function(n){const r=new t,o=e(8),i=e(24);return r.ufrag=o.toString("hex"),r.pwd=i.toString("hex"),r.lite=n,r},t.expand=function(e){if("ICEInfo"===e.constructor.name)return e;e=e;const n=new t(e.ufrag,e.pwd);return n.setLite(e.lite),n.setEndOfCandidates(e.endOfCandidates),n},t.clone=function(e){return"ICEInfo"===e.constructor.name?e.clone():t.expand(e)},it=t,it}function Ut(){if(ct)return at;ct=1;const e=We()("SEND","RECV");return e.byValue=function(t){return e[t.toUpperCase()]},e.toString=function(t){switch(t){case e.SEND:return"send";case e.RECV:return"recv"}},e.reverse=function(t){switch(t){case e.SEND:return e.RECV;case e.RECV:return e.SEND}},at=e,at}function Ft(){if(lt)return ut;lt=1;const e=Ut();class t{constructor(e,t){this.id=e,this.direction=t,this.formats=[],this.params=new Map}clone(){var e=new t(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var t={id:this.id,direction:e.toString(this.direction)};for(var[n,r]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[n]=r;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(e){this.direction=e}getFormats(){return this.formats}setFormats(e){this.formats=[];for(let t=0;t<e.length;++t)this.formats.push(parseInt(e[t]))}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}}return t.expand=function(n){if("RIDInfo"===n.constructor.name)return n;n=n;const r=new t(n.id,e.byValue(n.direction));for(const[e,t]of Object.entries(n.params||{}))r.addParam(e,t);return n.formats&&r.setFormats(n.formats),r},t.clone=function(e){return"RIDInfo"===e.constructor.name?e.clone():t.expand(e)},ut=t,ut}function zt(){if(ft)return dt;ft=1;class e{constructor(e,t){this.paused=t,this.id=e}clone(){return new e(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}}return e.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:(t=t,new e(t.id,t.paused))},e.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():e.expand(t)},dt=e,dt}function Gt(){if(ht)return pt;ht=1;const e=zt(),t=Ut();class n{constructor(){this.send=[],this.recv=[]}clone(){const e=new n;for(const n of this.send)e.addSimulcastAlternativeStreams(t.SEND,n.map(e=>e.clone()));for(const n of this.recv)e.addSimulcastAlternativeStreams(t.RECV,n.map(e=>e.clone()));return e}plain(){const e={send:[],recv:[]};for(const t of this.send)e.send.push(t.map(e=>e.plain()));for(const t of this.recv)e.recv.push(t.map(e=>e.plain()));return e}addSimulcastAlternativeStreams(e,n){return e===t.SEND?this.send.push(n):this.recv.push(n)}addSimulcastStream(e,n){return e===t.SEND?this.send.push([n]):this.recv.push([n])}getSimulcastStreams(e){return e===t.SEND?this.send:this.recv}}return n.expand=function(r){if("SimulcastInfo"===r.constructor.name)return r;r=r;const o=new n;for(const n of r.send||[])o.addSimulcastAlternativeStreams(t.SEND,n.map(e.expand));for(const n of r.recv||[])o.addSimulcastAlternativeStreams(t.RECV,n.map(e.expand));return o},n.clone=function(e){return"SimulcastInfo"===e.constructor.name?e.clone():n.expand(e)},pt=n,pt}function Ht(){if(vt)return mt;vt=1;const e=We()("SENDRECV","SENDONLY","RECVONLY","INACTIVE");return e.byValue=function(t){return e[t.toUpperCase()]},e.toString=function(t){switch(t){case e.SENDRECV:return"sendrecv";case e.SENDONLY:return"sendonly";case e.RECVONLY:return"recvonly";case e.INACTIVE:return"inactive"}},e.reverse=function(t){switch(t){case e.SENDRECV:return e.SENDRECV;case e.SENDONLY:return e.RECVONLY;case e.RECVONLY:return e.SENDONLY;case e.INACTIVE:return e.INACTIVE}},mt=e,mt}function Wt(){if(bt)return gt;bt=1;class e{constructor(e,t){this.port=e,this.maxMessageSize=t}clone(){return new e(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}}return e.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:(t=t,new e(t.port,t.maxMessageSize))},e.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():e.expand(t)},gt=e,gt}function qt(){if(wt)return yt;wt=1;const e=He(),t=Ft(),n=Gt(),r=Ht(),o=Ut();Ge();const i=Wt();class s{constructor(e,t){this.id=e,this.type=t,this.direction=r.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}clone(){const e=new s(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,n]of this.extensions.entries())e.addExtension(t,n);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDataChannel(this.dataChannel.clone()),e}plain(){const e={id:this.id,type:this.type,direction:r.toString(this.direction),codecs:[]};this.dataChannel&&(e.dataChannel=this.dataChannel.plain()),this.bitrate&&(e.bitrate=this.bitrate);for(const t of this.codecs.values())e.codecs.push(t.plain());for(const[t,n]of this.extensions.entries())e.extensions||(e.extensions={}),e.extensions[t]=n;for(const t of this.rids.values())e.rids||(e.rids=[]),e.rids.push(t.plain());return this.simulcast&&(e.simulcast=this.simulcast.plain()),this.control&&(e.control=this.control),e}getType(){return this.type}getId(){return this.id}setId(e){this.id=e}addExtension(e,t){this.extensions.set(e,t)}addRID(e){this.rids.set(e.getId(),e)}addCodec(e){this.codecs.set(e.getType(),e)}setCodecs(e){this.codecs=e}getCodecForType(e){return this.codecs.get(e)}getCodec(e){for(const t of this.codecs.values())if(t.getCodec().toLowerCase()===e.toLowerCase())return t;return null}hasCodec(e){return null!==this.getCodec(e)}getCodecs(){return this.codecs}hasRTX(){for(const e of this.codecs.values())if(e.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(e){return this.rids.get(e)}getBitrate(){return this.bitrate}setBitrate(e){this.bitrate=e}getDirection(){return this.direction}setDirection(e){this.direction=e}hasControl(){return!!this.control}getControl(){return this.control}setControl(e){this.control=e}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(e){this.dataChannel=e}answer(t){const a=new s(this.id,this.type);if(t){a.setDirection(r.reverse(this.direction));const{codecs:s,dataChannel:c}=t;if(s){let n;n=Array.isArray(s)?e.MapFromNames(s,t.rtx,t.rtcpfbs):s;for(let e of this.codecs.values())for(let t of n.values()){if(t.getCodec().toLowerCase()!==e.getCodec().toLowerCase()||"h264"===t.getCodec()&&t.hasParam("packetization-mode")&&t.getParam("packetization-mode")!=e.getParam("packetization-mode","0")||"h264"===t.getCodec()&&t.hasParam("profile-level-id")&&e.hasParam("profile-level-id")&&t.getParam("profile-level-id")!=e.getParam("profile-level-id")||"multiopus"===t.getCodec()&&t.hasParam("num_streams")&&e.hasParam("num_streams")&&t.getParam("num_streams")!=e.getParam("num_streams"))continue;const n=t.clone();n.setType(e.getType()),n.hasRTX()&&n.setRTX(e.getRTX()),e.hasChannels()&&n.setChannels(e.getChannels()),n.addParams(e.getParams()),a.addCodec(n);break}}const u=new Set(t.extensions);for(let[e,t]of this.extensions)u.has(t)&&a.addExtension(e,t);if(t.simulcast&&this.simulcast){const e=new n,t=this.simulcast.getSimulcastStreams(o.SEND);if(t)for(const n of t){const t=n.map(e=>e.clone());e.addSimulcastAlternativeStreams(o.RECV,t)}const r=this.simulcast.getSimulcastStreams(o.RECV);if(r)for(const n of r){const t=n.map(e=>e.clone());e.addSimulcastAlternativeStreams(o.SEND,t)}for(const n of this.rids.values()){const e=n.clone();e.setDirection(o.reverse(n.getDirection())),a.addRID(e)}a.setSimulcast(e)}if(c&&this.dataChannel){const e=new i(this.dataChannel.getPort(),c.maxMessageSize?c.maxMessageSize:this.dataChannel.getMaxMessageSize());a.setDataChannel(e)}}else a.setDirection(r.INACTIVE);return a}getSimulcast(){return this.simulcast}setSimulcast(e){this.simulcast=e}}function a(e){const t=e.toString();if(!/^\d+$/.test(t))throw new Error("invalid integer ".concat(t));return parseInt(t)}return s.create=function(t,n,o){!o&&"string"!=typeof n&&(o=n,n=t);const i=new s(t,n);if(o){const{codecs:t}=o;t&&(Array.isArray(t)?i.setCodecs(e.MapFromNames(t,o.rtx,o.rtcpfbs)):i.setCodecs(t))}else i.setDirection(r.INACTIVE);return i},s.expand=function(o){if("MediaInfo"===o.constructor.name)return o;o=o;const c=new s(o.id,o.type);if(o.direction&&c.setDirection(r.byValue(o.direction)),c.setBitrate(o.bitrate),o.dataChannel){const e=i.expand(o.dataChannel);e&&c.setDataChannel(e)}for(const[e,t]of Object.entries(o.extensions))c.addExtension(a(e),t);for(const t of o.codecs){const n=e.expand(t);n&&c.addCodec(n)}for(const e of o.rids||[]){const n=t.expand(e);c.addRID(n)}return o.simulcast&&c.setSimulcast(n.expand(o.simulcast)),o.control&&c.setControl(o.control),c},s.clone=function(e){return"MediaInfo"===e.constructor.name?e.clone():s.expand(e)},yt=s,yt}function $t(){if(Et)return St;Et=1;class e{constructor(e,t){this.semantics=e,this.ssrcs=[];for(let n=0;n<t.length;++n)this.ssrcs.push(parseInt(t[n]))}clone(){return new e(this.semantics,this.ssrcs)}plain(){const e={semantics:this.semantics,ssrcs:[]};for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);return e}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}}return e.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:(t=t,new e(t.semantics,t.ssrcs))},e.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():e.expand(t)},St=e,St}function Qt(){if(Ot)return Ct;Ot=1;class e{constructor(e){this.ssrc=e}clone(){const t=new e(this.ssrc);return t.setCName(this.cname),t.setStreamId(this.streamId),t.setTrackId(this.trackId),t}plain(){const e={ssrc:this.ssrc};return this.cname&&(e.cname=this.cname),this.streamId&&(e.streamId=this.streamId),this.trackId&&(e.trackId=this.trackId),e}getCName(){return this.cname}setCName(e){this.cname=e}getStreamId(){return this.streamId}setStreamId(e){this.streamId=e}getTrackId(){return this.trackId}setTrackId(e){this.trackId=e}getSSRC(){return this.ssrc}}return e.expand=function(t){if("SourceInfo"===t.constructor.name)return t;t=t;const n=new e(t.ssrc);return n.setCName(t.cname),n.setStreamId(t.streamId),n.setTrackId(t.trackId),n},e.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():e.expand(t)},Ct=e,Ct}function Kt(){if(It)return kt;It=1;const e=He();class t{constructor(e,t=!1){this.id=e,this.paused=t,this.codecs=new Map,this.params=new Map}clone(){var e=new t(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var e={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[t,n]of this.codecs.entries())e.codecs[t]=n.plain();for(var[t,r]of this.params.entries())e.params[t]=r;return e}getId(){return this.id}getCodecs(){return this.codecs}addCodec(e){this.codecs.set(e.getType(),e)}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}isPaused(){return this.paused}}return t.expand=function(n){if("TrackEncodingInfo"===n.constructor.name)return n;n=n;const r=new t(n.id,n.paused);for(const t of Object.values(n.codecs||{}))r.addCodec(e.expand(t));for(const[e,t]of Object.entries(n.params||{}))r.addParam(e,t);return r},t.clone=function(e){return"TrackEncodingInfo"===e.constructor.name?e.clone():t.expand(e)},kt=t,kt}function Xt(){if(Tt)return xt;Tt=1;const e=$t(),t=Kt();class n{constructor(e,t){this.media=e,this.id=t,this.ssrcs=[],this.groups=[],this.encodings=[]}clone(){const e=new n(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const n=[];for(let e=0;e<this.encodings[t].length;++e)n.push(this.encodings[t][e].clone());e.addAlternativeEncodings(n)}return e}plain(){const e={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(e.mediaId=this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.groups||(e.groups=[]),e.groups.push(this.groups[t].plain());for(let t=0;t<this.encodings.length;++t){const n=[];for(let e=0;e<this.encodings[t].length;++e)n.push(this.encodings[t][e].plain());n.length&&(e.encodings||(e.encodings=[]),e.encodings.push(n))}return e}getMedia(){return this.media}setMediaId(e){this.mediaId=e}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(e){this.ssrcs.push(e)}getSSRCs(){return this.ssrcs}addSourceGroup(e){this.groups.push(e)}getSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return t;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(e){return this.groups.filter(t=>t.getSSRCs()[0]===e)}hasSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(e){this.encodings.push([e])}addAlternativeEncodings(e){this.encodings.push(e)}setEncodings(e){this.encodings=e}getEncodingSources(){const e=[];if(this.encodings.length)for(const t of this.encodings)for(const n of t){const t={id:n.getId(),rid:n.getId()},r=n.getParams(),o=null==r?void 0:r.get("ssrc");if(void 0!==o){t.media=parseInt(o);for(const e of this.getSourceGroupsForMediaSSRC(t.media))switch(e.getSemantics()){case"FID":t.rtx=e.getSSRCs()[1];break;case"FEC-FR":t.fec=e.getSSRCs()[1];break}}e.push(t)}else if(this.hasSourceGroup("SIM")){const t=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const n of t){const t={id:String(n),media:n};for(const e of this.getSourceGroupsForMediaSSRC(t.media))switch(e.getSemantics()){case"FID":t.rtx=e.getSSRCs()[1];break;case"FEC-FR":t.fec=e.getSSRCs()[1];break}e.push(t)}}else{const t={id:""};if(this.ssrcs.length){t.media=this.ssrcs[0];for(const e of this.getSourceGroupsForMediaSSRC(t.media))switch(e.getSemantics()){case"FID":t.rtx=e.getSSRCs()[1];break;case"FEC-FR":t.fec=e.getSSRCs()[1];break}}e.push(t)}return e}}return n.expand=function(r){var o,i;if("TrackInfo"===r.constructor.name)return r;r=r;const s=new n(r.media,r.id);if(r.mediaId&&s.setMediaId(r.mediaId),Array.isArray(r.ssrcs))for(const e of r.ssrcs)s.addSSRC(e);else if(void 0!==(null===(o=r.ssrcs)||void 0===o?void 0:o.media)){const t=r.ssrcs.media;if(s.addSSRC(t),void 0!==r.ssrcs.rtx){const n=r.ssrcs.rtx;s.addSSRC(n),s.addSourceGroup(new e("FID",[t,n]))}if(void 0!==r.ssrcs.fec){const n=r.ssrcs.fec;s.addSSRC(n),s.addSourceGroup(new e("FEC-FR",[t,n]))}}if(r.rid){const e=new t(r.rid);void 0!==(null===(i=r.ssrcs)||void 0===i?void 0:i.media)&&e.addParam("ssrc",r.ssrcs.media),s.addAlternativeEncodings([e])}for(const t of r.groups||[])s.addSourceGroup(e.expand(t));for(const e of r.encodings||[]){const n=[];for(const r of e)n.push(t.expand(r));s.addAlternativeEncodings(n)}return s},n.clone=function(e){return"TrackInfo"===e.constructor.name?e.clone():n.expand(e)},xt=n,xt}function Yt(){if(Pt)return jt;Pt=1;const e=Xt();class t{constructor(e){this.id=e,this.tracks=new Map}clone(){const e=new t(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const e={id:this.id,tracks:[]};for(const t of this.tracks.values())e.tracks.push(t.plain());return e}getId(){return this.id}addTrack(e){this.tracks.set(e.getId(),e)}removeTrack(e){return this.tracks.delete(e.getId())}removeTrackById(e){return this.tracks.delete(e)}getFirstTrack(e){for(let t of this.tracks.values())if(t.getMedia().toLowerCase()===e.toLowerCase())return t;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(e){return this.tracks.get(e)}}return t.expand=function(n){if("StreamInfo"===n.constructor.name)return n;n=n;const r=new t(n.id);for(const t of n.tracks||[]){const n=e.expand(t);n&&r.addTrack(n)}return r},t.clone=function(e){return"StreamInfo"===e.constructor.name?e.clone():t.expand(e)},jt=t,jt}function Jt(){if(At)return Rt;At=1;const e=Ue(),t=Fe()("en-US"),n=ze(),r=He(),o=Ge(),i=$e(),s=Qe(),a=Bt(),c=qt(),u=qe(),l=Ht(),d=Ut(),f=$t(),p=Qt(),h=Yt(),m=Xt(),v=Kt(),g=Gt(),b=zt(),y=Ft(),w=Wt();class S{constructor(e){this.version=e||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}clone(){const e=new S(this.version);for(const t of this.medias)e.addMedia(t.clone());for(const t of this.streams.values())e.addStream(t.clone());for(const t of this.candidates)e.addCandidate(t.clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExtmapAllowMixed(this.extmapAllowMixed),e}plain(){const e={version:this.version,streams:[],medias:[],candidates:[]};for(const t of this.medias)e.medias.push(t.plain());for(const t of this.streams.values())e.streams.push(t.plain());for(const t of this.candidates)e.candidates.push(t.plain());return this.ice&&(e.ice=this.ice.plain()),this.dtls&&(e.dtls=this.dtls.plain()),this.crypto&&(e.crypto=this.crypto.plain()),this.extmapAllowMixed||(e.extmapAllowMixedNotSupported=!this.extmapAllowMixed),e}unify(){const e=new S(this.version);for(const n of this.medias)e.addMedia(n.clone());const t={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const n of this.streams.values()){const r=n.clone();for(const n of r.getTracks().values()){let r=t[n.getMedia()].pop();r||(r=this.getMedia(n.getMedia()).clone(),r.setId(n.getId()),e.addMedia(r)),n.setMediaId(r.getId())}e.addStream(r)}for(const n of this.candidates)e.addCandidate(n.clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(e){this.version=e}addMedia(e){this.medias.push(e)}getMedia(e){for(let n in this.medias){let r=this.medias[n];if(t(r.getType(),e))return r}return null}getMediasByType(e){let n=[];for(let r in this.medias){let o=this.medias[r];t(o.getType(),e)&&n.push(o)}return n}getMediaById(e){for(const n of this.medias)if(t(n.getId(),e))return n;return null}replaceMedia(e){for(let t in this.medias)if(this.medias[t].getId()==e.getId())return this.medias[t]=e,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(e){this.dtls=e}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(e){this.crypto=e}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(e){this.ice=e}addCandidate(e){for(const t of this.candidates)if(t.equals(e))return;this.candidates.push(e)}addCandidates(e){for(const t of e)this.addCandidate(t)}getCandidates(){return this.candidates}getStream(e){return this.streams.get(e)}getStreams(){return this.streams}getFirstStream(){for(const e of this.streams.values())return e;return null}addStream(e){this.streams.set(e.getId(),e)}removeStream(e){return this.streams.delete(e.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(e){let n=[];for(const r of this.streams.values())for(const[o,i]of r.getTracks())t(i.getMedia(),e)&&n.push(i);return n}getTrackByMediaId(e){for(const t of this.streams.values())for(const[n,r]of t.getTracks())if(r.getMediaId()==e)return r;return null}getStreamByMediaId(e){for(const t of this.streams.values())for(const[n,r]of t.getTracks())if(r.getMediaId()==e)return t;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(e){this.extmapAllowMixed=e}answer(e){const t=new S;e.ice&&(e.ice instanceof a?t.setICE(e.ice.clone()):t.setICE(a.expand(e.ice))),e.dtls&&(e.dtls instanceof i?t.setDTLS(e.dtls):t.setDTLS(i.expand(e.dtls))),e.crypto&&(e.crypto instanceof s?t.setCrypto(e.crypto):t.setCrypto(s.expand(e.crypto)));for(let r=0;e.candidates&&r<e.candidates.length;++r)e.candidates[r]instanceof n?t.addCandidate(e.candidates[r].clone()):t.addCandidate(n.expand(e.candidates[r]));for(const n of this.medias){const r=e&&e.capabilities&&e.capabilities[n.getType()];t.addMedia(n.answer(r))}return t.setExtmapAllowMixed(this.extmapAllowMixed),t}toString(){let n={version:0,media:[]};n.version=0,n.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},n.name="semantic-sdp",n.connection={version:4,ip:"0.0.0.0"},n.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(n.icelite="ice-lite"),n.msidSemantic={semantic:"WMS",token:"*"},n.groups=[],this.extmapAllowMixed&&(n.extmapAllowMixed="extmap-allow-mixed");const r=[];for(const e of this.medias){let o={type:e.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};o.direction=l.toString(e.getDirection()),this.extmapAllowMixed&&(o.extmapAllowMixed="extmap-allow-mixed"),o.mid=e.getId(),r.push(e.getId()),e.hasControl()&&(o.control=e.getControl()),e.getBitrate()>0&&(o.bandwidth.push({type:"AS",limit:e.getBitrate()}),o.bandwidth.push({type:"TIAS",limit:1e3*e.getBitrate()}));let i=this.getCandidates();for(const e of i)o.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});if(this.getICE()&&(o.iceUfrag=this.getICE().getUfrag(),o.icePwd=this.getICE().getPwd()),t("audio",e.getType())||t("video",e.getType())){o.rtcpMux="rtcp-mux",o.rtcpRsize="rtcp-rsize",this.getDTLS()?(o.protocol="UDP/TLS/RTP/SAVPF",o.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},o.setup=u.toString(this.getDTLS().getSetup())):this.getCrypto()?(o.protocol="RTP/SAVPF",o.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):o.protocol="RTP/AVP";for(const i of e.getCodecs().values()){t("video",e.getType())?o.rtp.push({payload:i.getType(),codec:i.getCodec().toUpperCase(),rate:9e4}):t("opus",i.getCodec())||t("multiopus",i.getCodec())?o.rtp.push({payload:i.getType(),codec:i.getCodec(),rate:48e3,encoding:i.getChannels()}):o.rtp.push({payload:i.getType(),codec:i.getCodec(),rate:8e3});for(const e of i.getRTCPFeedbacks())o.rtcpFb.push({payload:i.getType(),type:e.getId(),subtype:e.getParams().join(" ")});i.hasRTX()&&(o.rtp.push({payload:i.getRTX(),codec:"rtx",rate:9e4}),o.fmtp.push({payload:i.getRTX(),config:"apt="+i.getType()}));const n=i.getParams();if(Object.keys(n).length){const e={payload:i.getType(),config:""};for(const t in n)e.config.length&&(e.config+=";"),Object.hasOwnProperty.call(n,t)?e.config+=t+"="+n[t]:e.config+=t;o.fmtp.push(e)}}const n=[];for(const e of o.rtp)n.push(e.payload);o.payloads=n.join(" ");for(let[t,i]of e.getExtensions().entries())o.ext.push({value:t,uri:i});for(let t of e.getRIDs().values()){let e={id:t.getId(),direction:d.toString(t.getDirection()),params:""};t.getFormats().length&&(e.params="pt="+t.getFormats().join(","));for(let[n,r]of t.getParams().entries())e.params+=(e.params.length?";":"")+n+"="+r;o.rids.push(e)}const r=e.getSimulcast();if(r){let e=1;o.simulcast={};const t=r.getSimulcastStreams(d.SEND),n=r.getSimulcastStreams(d.RECV);if(t&&t.length){let n="";for(const e of t){let t="";for(const n of e)t+=(t.length?",":"")+(n.isPaused()?"~":"")+n.getId();n+=(n.length?";":"")+t}o.simulcast["dir"+e]="send",o.simulcast["list"+e]=n,e++}if(n&&n.length){let t="";for(const e of n){let n="";for(const t of e)n+=(n.length?",":"")+(t.isPaused()?"~":"")+t.getId();t+=(t.length?";":"")+n}o.simulcast["dir"+e]="recv",o.simulcast["list"+e]=t,e++}}}else if(e.hasDataChannel()){o.protocol="UDP/DTLS/SCTP",o.payloads="webrtc-datachannel";const t=e.getDataChannel();o.sctpPort=t.getPort(),o.maxMessageSize=t.getMaxMessageSize()}n.media.push(o)}for(let e of this.streams.values())for(let r of e.getTracks().values())for(let o in n.media){let i=n.media[o];if(r.getMediaId()){if(r.getMediaId()==i.mid){let t=r.getSourceGroups();for(let e in t){let n=t[e];i.ssrcGroups.push({semantics:n.getSemantics(),ssrcs:n.getSSRCs().join(" ")})}let n=r.getSSRCs();for(let o in n)i.ssrcs.push({id:n[o],attribute:"cname",value:e.getId()}),i.ssrcs.push({id:n[o],attribute:"msid",value:e.getId()+" "+r.getId()});i.msid=e.getId()+" "+r.getId();break}}else if(t(i.type,r.getMedia())){let t=r.getSourceGroups();for(let e in t){let n=t[e];i.ssrcGroups.push({semantics:n.getSemantics(),ssrcs:n.getSSRCs().join(" ")})}let n=r.getSSRCs();for(let o in n)i.ssrcs.push({id:n[o],attribute:"cname",value:e.getId()}),i.ssrcs.push({id:n[o],attribute:"msid",value:e.getId()+" "+r.getId()});break}}const o={type:"BUNDLE",mids:r.join(" ")};return n.groups.push(o),e.write(n)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const e of this.getCandidates())t.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});return e.write(t).slice(10)}}return S.create=function(e){var t;const r=new S;if(e.streams)for(const n of e.streams)r.addStream(h.expand(n));e.ice&&(e.ice instanceof a?r.setICE(e.ice.clone()):r.setICE(a.expand(e.ice))),e.dtls&&(e.dtls instanceof i?r.setDTLS(e.dtls):r.setDTLS(i.expand(e.dtls))),e.crypto&&(e.crypto instanceof s?r.setCrypto(e.crypto):r.setCrypto(s.expand(e.crypto)));for(const i of e.candidates||[])i instanceof n?r.addCandidate(i.clone()):r.addCandidate(n.expand(i));let o=96,u=1,l=0;for(const[n,i]of Object.entries(e.capabilities||{}))if(e.unified&&null!==(t=e.streams)&&void 0!==t&&t.length)for(const e of r.getTracksByMediaType(n)){const t=c.create(e.getMediaId(),n,i);for(const[e,n]of t.getCodecs())n.getType()>=96&&n.setType(o++),n.getRTX()&&n.setRTX(o++);if(i.extensions)for(let e of i.extensions)15===u&&u++,t.addExtension(u++,e);r.addMedia(t)}else{const t=c.create(e.unified?String(l++):n,n,i);for(const[e,n]of t.getCodecs())n.getType()>=96&&n.setType(o++),n.getRTX()&&n.setRTX(o++);if(i.extensions)for(let e of i.extensions)15===u&&u++,t.addExtension(u++,e);r.addMedia(t)}return r},S.expand=function(e){if("SDPInfo"===e.constructor.name)return e;e=e;const t=new S(e.version);for(const n of e.medias||[]){const e=c.expand(n);e&&t.addMedia(e)}for(const n of e.streams||[]){const e=h.expand(n);e&&t.addStream(e)}for(const r of e.candidates||[]){const e=n.expand(r);e&&t.addCandidate(e)}return e.ice&&t.setICE(a.expand(e.ice)),e.dtls&&t.setDTLS(i.expand(e.dtls)),e.crypto&&t.setCrypto(s.expand(e.crypto)),e.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!e.extmapAllowMixedNotSupported),t},S.clone=function(e){return"SDPInfo"===e.constructor.name?e.clone():S.expand(e)},S.process=function(e){return S.parse(e)},S.parse=function(E){const C=e.parse(E),O=new S;if(O.setVersion(C.version),C.iceUfrag&&C.icePwd){const e=String(C.iceUfrag),t=String(C.icePwd),n=new a(e,t);n.setLite("ice-lite"==C.icelite),n.setEndOfCandidates("end-of-candidates"==C.endOfCandidates),O.setICE(n)}for(let S in C.media){const E=C.media[S],k=E.type,I=E.mid?E.mid.toString():S,x=new c(I,k);if(E.iceUfrag&&E.icePwd){const e=String(E.iceUfrag),t=String(E.icePwd),n=new a(e,t);n.setLite("ice-lite"==C.icelite),n.setEndOfCandidates("end-of-candidates"==E.endOfCandidates),O.setICE(n)}for(let e=0;E.candidates&&e<E.candidates.length;++e){const t=E.candidates[e],r=new n(t.foundation,t.component,t.transport,t.priority,t.ip,t.port,t.type,t.raddr,t.rport);O.addCandidate(r)}const T=E.fingerprint||C.fingerprint;if(T){const e=T.type,t=T.hash;let n=u.ACTPASS;E.setup&&(n=u.byValue(E.setup)),O.setDTLS(new i(n,e,t))}if(E.crypto){const e=E.crypto[0];O.setCrypto(new s(e.id,e.suite,e.config,e.sessionConfig))}let j=l.SENDRECV;E.direction&&(j=l.byValue(E.direction),x.setDirection(j)),E.control&&x.setControl(E.control),O.setExtmapAllowMixed("extmap-allow-mixed"==E.extmapAllowMixed||"extmap-allow-mixed"==C.extmapAllowMixed);const P=new Map;for(let e in E.rtp){const t=E.rtp[e],n=t.payload,o=t.codec;if("RED"===o.toUpperCase()||"ULPFEC"===o.toUpperCase())continue;let i={};for(let e in E.fmtp){const t=E.fmtp[e];if(t.payload===n){const e=t.config.split(";");for(let t in e){const n=e[t].split("="),r=n[0].trim(),o=n.splice(1).join("=").trim();i[r]=o}}}if("RTX"===o.toUpperCase())P.set(parseInt(i.apt),n);else{const e=new r(o,n,i);t.encoding>1&&e.setChannels(t.encoding),x.addCodec(e)}}for(let e of P.entries()){const t=x.getCodecForType(e[0]);t&&t.setRTX(e[1])}for(let e=0;E.rtcpFb&&e<E.rtcpFb.length;++e){const t=x.getCodecForType(E.rtcpFb[e].payload);if(t){const n=E.rtcpFb[e].type,r=E.rtcpFb[e].subtype?E.rtcpFb[e].subtype.split(" "):null;t.addRTCPFeedback(new o(n,r))}}const R=E.ext;for(let e in R){const t=R[e];x.addExtension(t.value,t.uri)}const A=E.rids;for(let t in A){const n=A[t],r=new y(n.id,d.byValue(n.direction));let o=[];const i=new Map;if(n.params){const t=e.parseParams(n.params);for(let e in t)"pt"===e?o=t[e].split(","):i.set(e,t[e]);r.setFormats(o),r.setParams(i)}x.addRID(r)}const V=[];if(E.simulcast){const t=new g;if(E.simulcast.dir1){const n=d.byValue(E.simulcast.dir1),r=e.parseSimulcastStreamList(E.simulcast.list1);for(let e=0;e<r.length;++e){const o=[];for(let t=0;t<r[e].length;++t)o.push(new b(r[e][t].scid,r[e][t].paused));t.addSimulcastAlternativeStreams(n,o)}}if(E.simulcast.dir2){const n=d.byValue(E.simulcast.dir2),r=e.parseSimulcastStreamList(E.simulcast.list2);for(let e=0;e<r.length;++e){const o=[];for(let t=0;t<r[e].length;++t)o.push(new b(r[e][t].scid,r[e][t].paused));t.addSimulcastAlternativeStreams(n,o)}}for(let e of t.getSimulcastStreams(d.SEND)){const t=[];for(let n=0;n<e.length;n++){const r=new v(e[n].getId(),e[n].isPaused()),o=x.getRID(r.getId());if(o){const e=o.getFormats();for(let t=0;e&&t<e.length;++t){const n=x.getCodecForType(e[t]);n&&r.addCodec(n)}r.setParams(o.getParams()),t.push(r)}}t.length&&V.push(t)}x.setSimulcast(t)}const M=new Map;if(E.ssrcs)for(let e in E.ssrcs){let n=E.ssrcs[e],r=n.id,o=n.attribute,i=n.value,s=M.get(r);if(s||(s=new p(r),M.set(s.getSSRC(),s)),t("cname",o))s.setCName(i);else if(t("msid",o)){let e=i.split(" "),t=e[0],n=e[1];s.setStreamId(t),s.setTrackId(n);let o=O.getStream(t);o||(o=new h(t),O.addStream(o));let a=o.getTrack(n);a||(a=new m(k,n),a.setMediaId(I),a.setEncodings(V),o.addTrack(a)),a.addSSRC(r)}}if(E.msid){let e=E.msid.split(" "),t=e[0],n=e[1],r=O.getStream(t);r||(r=new h(t),O.addStream(r));let o=r.getTrack(n);o||(o=new m(k,n),o.setMediaId(I),o.setEncodings(V),r.addTrack(o));for(let[i,s]of M.entries())s.getStreamId()||(s.setStreamId(t),s.setTrackId(n),o.addSSRC(i))}for(let[e,t]of M.entries())if(!t.getStreamId()){let n=t.getCName(),r=I;t.setStreamId(n),t.setTrackId(r);let o=O.getStream(n);o||(o=new h(n),O.addStream(o));let i=o.getTrack(r);i||(i=new m(k,r),i.setMediaId(I),i.setEncodings(V),o.addTrack(i)),i.addSSRC(e)}if(E.ssrcGroups)for(let e in E.ssrcGroups){let t=E.ssrcGroups[e],n=t.ssrcs.split(" "),r=new f(t.semantics,n),o=M.get(parseInt(n[0]));o&&O.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==E.type&&"webrtc-datachannel"==E.payloads){const e=new w(E.sctpPort,E.maxMessageSize);x.setDataChannel(e)}O.addMedia(x)}return O},Rt=S,Rt}function Zt(){return Vt||(Vt=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.SDPInfo=Jt(),Ve.CandidateInfo=ze(),Ve.CodecInfo=He(),Ve.DTLSInfo=$e(),Ve.CryptoInfo=Qe(),Ve.ICEInfo=Bt(),Ve.MediaInfo=qt(),Ve.Setup=qe(),Ve.SourceGroupInfo=$t(),Ve.SourceInfo=Qt(),Ve.StreamInfo=Yt(),Ve.TrackInfo=Xt(),Ve.RTCPFeedbackInfo=Ge(),Ve.TrackEncodingInfo=Kt(),Ve.RIDInfo=Ft(),Ve.SimulcastInfo=Gt(),Ve.SimulcastStreamInfo=zt(),Ve.DataChannelInfo=Wt(),Ve.Direction=Ht()),Ve}var en,tn=Zt(),nn={exports:{}},rn=nn.exports;function on(){return en||(en=1,function(e,t){(function(n,r){var o="0.7.39",i="",s="?",a="function",c="undefined",u="object",l="string",d="major",f="model",p="name",h="type",m="vendor",v="version",g="architecture",b="console",y="mobile",w="tablet",S="smarttv",E="wearable",C="embedded",O=500,k="Amazon",I="Apple",x="ASUS",T="BlackBerry",j="Browser",P="Chrome",R="Edge",A="Firefox",V="Google",M="Huawei",L="LG",_="Microsoft",D="Motorola",N="Opera",B="Samsung",U="Sharp",F="Sony",z="Xiaomi",G="Zebra",H="Facebook",W="Chromium OS",q="Mac OS",$=" Browser",Q=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},K=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},X=function(e,t){return typeof e===l&&-1!==Y(t).indexOf(Y(e))},Y=function(e){return e.toLowerCase()},J=function(e){return typeof e===l?e.replace(/[^\d\.]/g,i).split(".")[0]:r},Z=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,i),typeof t===c?e:e.substring(0,O)},ee=function(e,t){for(var n,o,i,s,c,l,d=0;d<t.length&&!c;){var f=t[d],p=t[d+1];for(n=o=0;n<f.length&&!c&&f[n];)if(c=f[n++].exec(e),c)for(i=0;i<p.length;i++)l=c[++o],s=p[i],typeof s===u&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):r:this[s[0]]=l?s[1].call(this,l,s[2]):r:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):r):this[s]=l||r;d+=2}},te=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(X(t[n][o],e))return n===s?r:n}else if(X(t[n],e))return n===s?r:n;return t.hasOwnProperty("*")?t["*"]:e},ne={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},re={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},oe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,v],[/opios[\/ ]+([\w\.]+)/i],[v,[p,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[p,N+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[p,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[p,"UC"+j]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[p,"Smart Lenovo "+j]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+j],v],[/\bfocus\/([\w\.]+)/i],[v,[p,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[p,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[p,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[p,"MIUI "+j]],[/fxios\/([-\w\.]+)/i],[v,[p,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360"+$]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+$],v],[/samsungbrowser\/([\w\.]+)/i],[v,[p,B+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,H],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[p,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,P+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+j]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[v,te,ne]],[/(webkit|khtml)\/([\w\.]+)/i],[p,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],v],[/(wolvic)\/([\w\.]+)/i],[p,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[p,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,Y]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,i,Y]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,Y]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[m,B],[h,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[f,[m,B],[h,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[m,I],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[m,I],[h,w]],[/(macintosh);/i],[f,[m,I]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[m,U],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[m,M],[h,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[m,M],[h,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[f,/_/g," "],[m,z],[h,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[m,z],[h,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[m,"OPPO"],[h,y]],[/\b(opd2\d{3}a?) bui/i],[f,[m,"OPPO"],[h,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[m,"Vivo"],[h,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[m,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[m,D],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[m,D],[h,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[m,L],[h,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[m,L],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[m,"Lenovo"],[h,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[m,"Nokia"],[h,y]],[/(pixel c)\b/i],[f,[m,V],[h,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[m,V],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[m,F],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[m,F],[h,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[m,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[m,k],[h,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[m,k],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[f,m,[h,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[m,T],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[m,x],[h,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[m,x],[h,y]],[/(nexus 9)/i],[f,[m,"HTC"],[h,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[f,/_/g," "],[h,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[f,[m,"TCL"],[h,w]],[/(itel) ((\w+))/i],[[m,Y],f,[h,te,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[m,"Acer"],[h,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[m,"Meizu"],[h,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[m,"Ulefone"],[h,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[f,[m,"Nothing"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,f,[h,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,f,[h,w]],[/(surface duo)/i],[f,[m,_],[h,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[m,"Fairphone"],[h,y]],[/(u304aa)/i],[f,[m,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[f,[m,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[f,[m,"RCA"],[h,w]],[/\b(venue[\d ]{2,7}) b/i],[f,[m,"Dell"],[h,w]],[/\b(q(?:mv|ta)\w+) b/i],[f,[m,"Verizon"],[h,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[m,"Barnes & Noble"],[h,w]],[/\b(tm\d{3}\w+) b/i],[f,[m,"NuVision"],[h,w]],[/\b(k88) b/i],[f,[m,"ZTE"],[h,w]],[/\b(nx\d{3}j) b/i],[f,[m,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[f,[m,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[f,[m,"Swiss"],[h,w]],[/\b((zeki)?tb.*\b) b/i],[f,[m,"Zeki"],[h,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],f,[h,w]],[/\b(ns-?\w{0,9}) b/i],[f,[m,"Insignia"],[h,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[m,"NextBook"],[h,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],f,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],f,[h,y]],[/\b(ph-1) /i],[f,[m,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[m,"Envizen"],[h,w]],[/\b(trio[-\w\. ]+) b/i],[f,[m,"MachSpeed"],[h,w]],[/\btu_(1491) b/i],[f,[m,"Rotor"],[h,w]],[/(shield[\w ]+) b/i],[f,[m,"Nvidia"],[h,w]],[/(sprint) (\w+)/i],[m,f,[h,y]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[m,_],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[m,G],[h,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[m,G],[h,y]],[/smart-tv.+(samsung)/i],[m,[h,S]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[m,B],[h,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,L],[h,S]],[/(apple) ?tv/i],[m,[f,I+" TV"],[h,S]],[/crkey/i],[[f,P+"cast"],[m,V],[h,S]],[/droid.+aft(\w+)( bui|\))/i],[f,[m,k],[h,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[m,U],[h,S]],[/(bravia[\w ]+)( bui|\))/i],[f,[m,F],[h,S]],[/(mitv-\w{5}) bui/i],[f,[m,z],[h,S]],[/Hbbtv.*(technisat) (.*);/i],[m,f,[h,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,Z],[f,Z],[h,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,f,[h,b]],[/droid.+; (shield) bui/i],[f,[m,"Nvidia"],[h,b]],[/(playstation [345portablevi]+)/i],[f,[m,F],[h,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[m,_],[h,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[f,[m,B],[h,E]],[/((pebble))app/i],[m,f,[h,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[m,I],[h,E]],[/droid.+; (glass) \d/i],[f,[m,V],[h,E]],[/droid.+; (wt63?0{2,3})\)/i],[f,[m,G],[h,E]],[/(quest( \d| pro)?)/i],[f,[m,H],[h,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,C]],[/(aeobc)\b/i],[f,[m,k],[h,C]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[p,R+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[v,te,re]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,te,re],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,q],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,v],[/\(bb(10);/i],[v,[p,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[p,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[p,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,W],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,v],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,v]]},ie=function(e,t){if(typeof e===u&&(t=e,e=r),!(this instanceof ie))return new ie(e,t).getResult();var o=typeof n!==c&&n.navigator?n.navigator:r,s=e||(o&&o.userAgent?o.userAgent:i),b=o&&o.userAgentData?o.userAgentData:r,S=t?Q(oe,t):oe,E=o&&o.userAgent==s;return this.getBrowser=function(){var e={};return e[p]=r,e[v]=r,ee.call(e,s,S.browser),e[d]=J(e[v]),E&&o&&o.brave&&typeof o.brave.isBrave==a&&(e[p]="Brave"),e},this.getCPU=function(){var e={};return e[g]=r,ee.call(e,s,S.cpu),e},this.getDevice=function(){var e={};return e[m]=r,e[f]=r,e[h]=r,ee.call(e,s,S.device),E&&!e[h]&&b&&b.mobile&&(e[h]=y),E&&"Macintosh"==e[f]&&o&&typeof o.standalone!==c&&o.maxTouchPoints&&o.maxTouchPoints>2&&(e[f]="iPad",e[h]=w),e},this.getEngine=function(){var e={};return e[p]=r,e[v]=r,ee.call(e,s,S.engine),e},this.getOS=function(){var e={};return e[p]=r,e[v]=r,ee.call(e,s,S.os),E&&!e[p]&&b&&b.platform&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,W).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(e){return s=typeof e===l&&e.length>O?Z(e,O):e,this},this.setUA(s),this};ie.VERSION=o,ie.BROWSER=K([p,v,d]),ie.CPU=K([g]),ie.DEVICE=K([f,m,h,b,y,S,w,E,C]),ie.ENGINE=ie.OS=K([p,v]),e.exports&&(t=e.exports=ie),t.UAParser=ie;var se=typeof n!==c&&(n.jQuery||n.Zepto);if(se&&!se.ua){var ae=new ie;se.ua=ae.getResult(),se.ua.get=function(){return ae.getUA()},se.ua.set=function(e){ae.setUA(e);var t=ae.getResult();for(var n in t)se.ua[n]=t[n]}}})("object"==typeof window?window:rn)}(nn,nn.exports)),nn.exports}var sn=on();const an=m(sn),cn=["iOS"];class un extends an{constructor(){super(window.navigator.userAgent)}isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const e=this.getBrowser();if(!e.name)return!1;const t=this.getOS();let n=!0;return n=!new RegExp(cn.join("|"),"i").test(t.name),e.name.match(/Chrome/i)&&n}isFirefox(){const e=this.getBrowser();return!!e.name&&e.name.match(/Firefox/i)}isOpera(){const e=this.getBrowser();return!!e.name&&e.name.match(/Opera/i)}isSafari(){const e=this.getBrowser();return!!e.name&&e.name.match(/Safari/i)}}const ln=q.get("SdpParser"),dn=35,fn=65,pn=96,hn=127,mn=Array.from({length:fn-dn+1},(e,t)=>t+dn),vn=Array.from({length:hn-pn+1},(e,t)=>t+pn),gn=1,bn=14,yn=16,wn=255,Sn=Array.from({length:bn-gn+1},(e,t)=>t+gn),En=Array.from({length:wn-yn+1},(e,t)=>t+yn),Cn={setSimulcast(e,t){if(ln.info("Setting simulcast. Codec: ",t),!(new un).isChromium())return ln.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),e;if("h264"!==t&&"vp8"!==t)return ln.warn("Your selected codec ".concat(t," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),e;if(!/m=video/.test(e))return ln.warn("There is no available video for simulcast to be enabled."),e;try{const t=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),n=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),r=t.exec(e),o=r[1],i=r[2],s=n.exec(e)[2],a=2,c=[o];for(let u=0;u<a;++u){const t=100+2*u,n=t+1;c.push(t),e+="a=ssrc-group:FID "+t+" "+n+"\r\na=ssrc:"+t+" cname:"+i+"\r\na=ssrc:"+t+" msid:"+s+"\r\na=ssrc:"+n+" cname:"+i+"\r\na=ssrc:"+n+" msid:"+s+"\r\n"}return e+="a=ssrc-group:SIM "+c.join(" ")+"\r\n",ln.info("Simulcast setted"),ln.debug("Simulcast SDP: ",e),e}catch(n){throw ln.error("Error setting SDP for simulcast: ",n),n}},setStereo(e){return ln.info("Replacing SDP response for support stereo"),e=e.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),ln.info("Replaced SDP response for support stereo"),ln.debug("New SDP value: ",e),e},setDTX(e){return ln.info("Replacing SDP response for support dtx"),e=e.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),ln.info("Replaced SDP response for support dtx"),ln.debug("New SDP value: ",e),e},setAbsoluteCaptureTime(e){const t="a=extmap:"+Cn.getAvailableHeaderExtensionIdRange(e)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n",n=/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm;return e=e.replace(n,(e,n,r)=>n+t+r),ln.info("Replaced SDP response for setting absolute capture time"),ln.debug("New SDP value: ",e),e},setDependencyDescriptor(e){const t="a=extmap:"+Cn.getAvailableHeaderExtensionIdRange(e)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n",n=/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm;return e=e.replace(n,(e,n,r)=>n+t+r),ln.info("Replaced SDP response for setting depency descriptor"),ln.debug("New SDP value: ",e),e},setVideoBitrate(e,t){if(t<1)ln.info("Remove bitrate restrictions"),e=e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const n=tn.SDPInfo.parse(e),r=n.getMedia("video");ln.info("Setting video bitrate"),r.setBitrate(t),e=n.toString()}return e},removeSdpLine(e,t){return ln.debug("SDP before trimming: ",e),e=e.split("\n").filter(e=>e.trim()!==t).join("\n"),ln.debug("SDP trimmed result: ",e),e},adaptCodecName(e,t,n){if(!e)return e;const r=new RegExp("".concat(t),"i");return e.replace(r,n)},setMultiopus(e,t){if(!(new un).isFirefox()&&(!t||On(t)))if(e.includes("multiopus/48000/6"))ln.info("Multiopus already setted");else{ln.info("Setting multiopus");const t=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(e)[0],n=Cn.getAvailablePayloadTypeRange(e)[0],r=t.replace("\r\n"," ")+n+"\r\na=rtpmap:"+n+" multiopus/48000/6\r\na=fmtp:"+n+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";e=e.replace(t,r),ln.info("Multiopus offer created"),ln.debug("SDP parsed for multioups: ",e)}return e},getAvailablePayloadTypeRange(e){const t=/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm,n=e.matchAll(t);let r=vn.concat(mn);for(const o of n){const e=o[1].split(" ").map(e=>parseInt(e));r=r.filter(t=>!e.includes(t))}return r},getAvailableHeaderExtensionIdRange(e){const t=/a=extmap:(\d+)(?:.*)\r\n/gm,n=e.matchAll(t);let r=Sn.concat(En);for(const o of n){const e=o[1].split(" ").map(e=>parseInt(e));r=r.filter(t=>!e.includes(t))}return r},renegotiate(e,t){const n=tn.SDPInfo.parse(e),r=tn.SDPInfo.parse(t);for(const o of n.getMedias()){let e=r.getMediaById(o.getId());if(!e){e=new tn.MediaInfo(o.getId(),o.getType()),e.setDirection(tn.Direction.reverse(o.getDirection()));const t=r.getMedia(o.getType());if(t){e.setCodecs(t.getCodecs());for(const[n,r]of t.getExtensions())e.addExtension(n,r)}r.addMedia(e)}}return r.toString()},updateMissingVideoExtensions(e,t){var n;const r=tn.SDPInfo.parse(e),o=null==(n=tn.SDPInfo.parse(t).getMediasByType("video")[0])?void 0:n.getExtensions();if(o||o.length){for(const t of r.getMediasByType("video")){const n=t.getExtensions();o.forEach((r,o)=>{if(!n.get(o)){const n=t.getId(),i="a=extmap:"+o+" "+r+"\r\n",s=new RegExp("(a=mid:"+n+"\r\n(?:.*\r\n)*?)","g");e=e.replace(s,(e,t,n)=>t+i)}})}return e}},getCodecPayloadType(e){const t=/a=rtpmap:(\d+) (\w+)\/\d+/g,n=e.matchAll(t),r={};for(const o of n)r[o[1]]=o[2];return r}},On=e=>e.getAudioTracks().some(e=>e.getSettings().channelCount>2),kn={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},In={OPUS:"opus",MULTIOPUS:"multiopus"},xn="d40e38ea-d419-4c62-94ed-20ac37b4e4fa",Tn=q.get("PeerConnection"),jn={Publisher:"Publisher",Viewer:"Viewer"},Pn={track:"track",connectionStateChange:"connectionStateChange"},Rn={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class An extends J{constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}async createRTCPeer(e={autoInitStats:!0,statsIntervalMs:1e3},t=jn.Viewer){Tn.info("Creating new RTCPeerConnection"),Tn.debug("RTC configuration provided by user: ",e),this.peer=Ln(this,e),this.mode=t,e.autoInitStats&&this.initStats(e)}getRTCPeer(){return Tn.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var e;Tn.info("Closing RTCPeerConnection"),null==(e=this.peer)||e.close(),this.peer=null,this.stopStats(),this.emit(Pn.connectionStateChange,"closed")}async setRTCRemoteSDP(e){Tn.info("Setting RTC Remote SDP");const t={type:"answer",sdp:e};try{await this.peer.setRemoteDescription(t),Tn.info("RTC Remote SDP was set successfully."),Tn.debug("RTC Remote SDP new value: ",e)}catch(n){throw Tn.error("Error while setting RTC Remote SDP: ",n),n}}async getRTCLocalSDP(e=Rn){Tn.info("Getting RTC Local SDP"),e=d(d({},Rn),e),Tn.debug("Options: ",e);const t=Mn(e.mediaStream);t?Nn(this.peer,t,e):Bn(this.peer,e),Tn.info("Creating peer offer");const n=await this.peer.createOffer();return Tn.info("Peer offer created"),Tn.debug("Peer offer response: ",n.sdp),this.sessionDescription=n,e.disableAudio||(e.stereo&&(this.sessionDescription.sdp=Cn.setStereo(this.sessionDescription.sdp)),e.dtx&&(this.sessionDescription.sdp=Cn.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=Cn.setMultiopus(this.sessionDescription.sdp,t)),!e.disableVideo&&e.simulcast&&(this.sessionDescription.sdp=Cn.setSimulcast(this.sessionDescription.sdp,e.codec)),e.absCaptureTime&&(this.sessionDescription.sdp=Cn.setAbsoluteCaptureTime(this.sessionDescription.sdp)),e.dependencyDescriptor&&(this.sessionDescription.sdp=Cn.setDependencyDescriptor(this.sessionDescription.sdp)),e.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),Tn.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(e,t){return new Promise((n,r)=>{try{const r=this.peer.addTransceiver(e,{direction:"recvonly",streams:t});this.transceiverMap.set(r,n)}catch(o){r(o)}})}updateBandwidthRestriction(e,t){if(this.mode===jn.Viewer)throw Tn.error("Viewer attempting to update bitrate, this is not allowed"),new Error("It is not possible for a viewer to update the bitrate.");return Tn.info("Updating bandwidth restriction, bitrate value: ",t),Tn.debug("SDP value: ",e),Cn.setVideoBitrate(e,t)}async updateBitrate(e=0){if(this.mode===jn.Viewer)throw Tn.error("Viewer attempting to update bitrate, this is not allowed"),new Error("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw Tn.error("Cannot update bitrate. No peer found."),new Error("Cannot update bitrate. No peer found.");Tn.info("Updating bitrate to value: ",e),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const t=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,e);await this.setRTCRemoteSDP(t),Tn.info("Bitrate restrictions updated: ","".concat(e>0?e:"unlimited"," kbps"))}getRTCPeerStatus(){if(Tn.info("Getting RTC peer status"),!this.peer)return null;const e=Un(this.peer);return Tn.info("RTC peer status getted, value: ",e),e}replaceTrack(e){if(!this.peer)return void Tn.error("Could not change track if there is not an active connection.");const t=this.peer.getSenders().find(t=>t.track.kind===e.kind);t?t.replaceTrack(e):Tn.error("There is no ".concat(e.kind," track in active broadcast."))}static getCapabilities(e){const t=new un,n=RTCRtpSender.getCapabilities(e);if(n){const r={};let o=new RegExp("^video/(".concat(Object.values(kn).join("|"),")x?$"),"i");"audio"===e&&(o=new RegExp("^audio/(".concat(Object.values(In).join("|"),")$"),"i"),t.isChrome()&&(r.multiopus={mimeType:"audio/multiopus",channels:6}));for(const e of n.codecs){const t=e.mimeType.match(o);if(t){const n=t[1].toLowerCase();if(r[n]=f(d({},r[n]),{mimeType:e.mimeType}),e.scalabilityModes){let t=r[n].scalabilityModes||[];t=[...t,...e.scalabilityModes],r[n].scalabilityModes=[...new Set(t)]}e.channels&&(r[n].channels=e.channels)}}n.codecs=Object.keys(r).map(e=>d({codec:e},r[e]))}return n}getTracks(){var e,t;return null==(t=null==(e=this.peer)?void 0:e.getSenders())?void 0:t.map(e=>e.track)}initStats(e){this.peerConnectionStats?Tn.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new de(this.peer,e),re(this.peerConnectionStats,this,[ue.stats])):Tn.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var e;null==(e=this.peerConnectionStats)||e.stop(),this.peerConnectionStats=null}}const Vn=e=>(null==e?void 0:e.getAudioTracks().length)<=1&&(null==e?void 0:e.getVideoTracks().length)<=1,Mn=e=>{if(!e)return null;if(e instanceof MediaStream&&Vn(e))return e;if(!(e instanceof MediaStream)){Tn.info("Creating MediaStream to add received tracks.");const t=new MediaStream;for(const n of e)t.addTrack(n);if(Vn(t))return t}throw Tn.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new Error("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},Ln=(e,t)=>{const n=new RTCPeerConnection(t);return Dn(e,n),n};async function _n(e){return new Promise(t=>setTimeout(t,e))}const Dn=(e,t)=>{t.ontrack=async t=>{Tn.info("New track from peer."),Tn.debug("Track event value: ",t);const n=e.transceiverMap.get(t.transceiver);if(n){for(;!t.transceiver.mid;)await _n(100);n(t.transceiver),e.transceiverMap.delete(t.transceiver)}setTimeout(()=>{e.emit(Pn.track,t)},0)},t.connectionState?t.onconnectionstatechange=n=>{Tn.info("Peer connection state change: ",t.connectionState),e.emit(Pn.connectionStateChange,t.connectionState)}:t.oniceconnectionstatechange=n=>{Tn.info("Peer ICE connection state change: ",t.iceConnectionState),e.emit(Pn.connectionStateChange,t.iceConnectionState)},t.onnegotiationneeded=async e=>{if(!t.remoteDescription)return;Tn.info("Peer onnegotiationneeded, updating local description");const n=await t.createOffer();Tn.info("Peer onnegotiationneeded, got local offer",n.sdp),n.sdp=Cn.updateMissingVideoExtensions(n.sdp,t.remoteDescription.sdp),await t.setLocalDescription(n);const r=Cn.renegotiate(n.sdp,t.remoteDescription.sdp);Tn.info("Peer onnegotiationneeded, updating remote description",r),await t.setRemoteDescription({type:"answer",sdp:r}),Tn.info("Peer onnegotiationneeded, renegotiation done")}},Nn=(e,t,n)=>{Tn.info("Adding mediaStream tracks to RTCPeerConnection");for(const r of t.getTracks()){const o={streams:[t]};"audio"===r.kind&&(o.direction=n.disableAudio?"inactive":"sendonly"),"video"===r.kind&&(o.direction=n.disableVideo?"inactive":"sendonly",n.scalabilityMode&&(new un).isChrome()?(Tn.debug("Video track with scalability mode: ".concat(n.scalabilityMode,".")),o.sendEncodings=[{scalabilityMode:n.scalabilityMode}]):n.scalabilityMode&&Tn.warn("SVC is only supported in Google Chrome")),e.addTransceiver(r,o),Tn.info("Track '".concat(r.label,"' added: "),"id: ".concat(r.id),"kind: ".concat(r.kind))}},Bn=(e,t)=>{const n=new un;if(!t.disableVideo){const t=e.addTransceiver("video",{direction:"recvonly"});n.isOpera()&&t.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter(e=>"video/H264"!==e.mimeType||e.sdpFmtpLine.includes("profile-level-id=4")))}t.disableAudio||e.addTransceiver("audio",{direction:"recvonly"});for(let r=0;r<t.multiplexedAudioTracks;r++)e.addTransceiver("audio",{direction:"recvonly"})},Un=e=>{var t;const n=null!=(t=e.connectionState)?t:e.iceConnectionState;switch(n){case"checking":return"connecting";case"completed":return"connected";default:return n}};var Fn,zn,Gn,Hn={};function Wn(){return Fn||(Fn=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.TypedEmitter=X().EventEmitter),Hn}function qn(){if(Gn)return zn;Gn=1;const{TypedEmitter:e}=Wn();class t extends e{constructor(e,t){super(),this.namespace=e,this.tm=t}cmd(e,t){return this.tm.cmd(e,t,this.namespace)}event(e,t){return this.tm.event(e,t,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}}class n extends e{constructor(e){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=e,this.listener=e=>{let t;try{t=JSON.parse(e.utf8Data||e.data||e)}catch(r){return}switch(t.type){case"cmd":const{transId:e}=t,r={name:t.name,data:t.data,namespace:t.namespace,accept:t=>{this._send({type:"response",transId:e,data:t})},reject:t=>{this._send({type:"error",transId:e,data:t})}};if(r.namespace){const e=this.namespaces.get(r.namespace);e?e.emit("cmd",r):this.emit("cmd",r)}else this.emit("cmd",r);break;case"response":{const e=this.transactions.get(t.transId);if(!e)return;this.transactions.delete(t.transId),e.resolve(t.data);break}case"error":{const e=this.transactions.get(t.transId);if(!e)return;this.transactions.delete(t.transId),e.reject(t.data);break}case"event":const o={name:t.name,data:t.data,namespace:t.namespace};if(o.namespace){var n=this.namespaces.get(o.namespace);n?n.emit("event",o):this.emit("event",o)}else this.emit("event",o);break}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}_send(e){this.transport.send(JSON.stringify(e))}cmd(e,t,n){return new Promise((r,o)=>{if(!e||0===e.length)throw new Error("Bad command name");const i={type:"cmd",transId:this.maxId++,name:e,data:t};n&&(i.namespace=n),this.transactions.set(i.transId,f(d({},i),{resolve:r,reject:o}));try{this._send(i)}catch(s){throw this.transactions.delete(i.transId),s}})}event(e,t,n){if(!e||0===e.length)throw new Error("Bad event name");const r={type:"event",name:e,data:t};n&&(r.namespace=n),this._send(r)}namespace(e){let n=this.namespaces.get(e);return n||(n=new t(e,this),this.namespaces.set(e,n),n)}close(){for(const e of this.namespaces.values())e.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}}return zn=n,zn}var $n=qn();const Qn=m($n),Kn=q.get("Signaling"),Xn={connectionSuccess:"wsConnectionSuccess",connectionError:"wsConnectionError",connectionClose:"wsConnectionClose",broadcastEvent:"broadcastEvent"};class Yn extends J{constructor(e={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=e.streamName,this.wsUrl=e.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}async connect(){var e;return Kn.info("Connecting to Signaling Server"),this.transactionManager&&(null==(e=this.webSocket)?void 0:e.readyState)===WebSocket.OPEN?(Kn.info("Connected to server: ",this.webSocket.url),Kn.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(Xn.connectionSuccess,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise((e,t)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new Qn(this.webSocket),this.webSocket.onopen=()=>{Kn.info("WebSocket opened"),this.transactionManager.on("event",e=>{this.emit(Xn.broadcastEvent,e)}),Kn.info("Connected to server: ",this.webSocket.url),Kn.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(Xn.connectionSuccess,{ws:this.webSocket,tm:this.transactionManager}),e(this.webSocket)},this.webSocket.onerror=()=>{Kn.error("WebSocket not connected: ",this.webSocket.url),this.emit(Xn.connectionError,this.webSocket.url),t(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,Kn.info("Connection closed with Signaling Server."),this.emit(Xn.connectionClose)}})}close(){var e;Kn.info("Closing connection with Signaling Server."),null==(e=this.webSocket)||e.close()}async subscribe(e,t,n=null,r=null){var o,i,s,a,c;Kn.info("Starting subscription to streamName: ",this.streamName),Kn.debug("Subcription local description: ",e);const u=Jn(t,n,r);e=Cn.adaptCodecName(e,"AV1X",kn.AV1);const l=["active","inactive","layers","viewercount","vad","updated","migrate","stopped"],p={sdp:e,streamId:this.streamName,pinnedSourceId:u.pinnedSourceId,excludedSourceIds:u.excludedSourceIds,events:l};u.vad&&(p.vad=!0),Array.isArray(u.events)&&(p.events=u.events),u.forcePlayoutDelay&&(p.forcePlayoutDelay=u.forcePlayoutDelay),u.layer&&(p.layer=u.layer),u.abrConfiguration&&(p.abr={initialBitrate:null==(o=u.abrConfiguration.metadata)?void 0:o.bitrate,strategy:u.abrConfiguration.strategy}),u.customKeys&&(p.customKeys=u.customKeys),u.forceSmooth&&(p.abr=f(d({},p.abr||{}),{forceSmooth:u.forceSmooth}));try{if(u.disableVideo&&u.disableAudio)throw new Error("Not attempting to connect as video and audio are disabled");await this.connect(),Kn.info("Sending view command",p);const e=await this.transactionManager.cmd("view",p),t=null==(c=null==(a=null==(s=null==(i=RTCRtpReceiver.getCapabilities)?void 0:i.call(RTCRtpReceiver,"video"))?void 0:s.codecs)?void 0:a.find)?void 0:c.call(a,e=>"video/AV1X"===e.mimeType);return e.sdp=t?Cn.adaptCodecName(e.sdp,kn.AV1,"AV1X"):e.sdp,Kn.info("Command sent, subscriberId: ",e.subscriberId),Kn.debug("Command result: ",e),this.serverId=e.subscriberId,this.clusterId=e.clusterId,this.streamViewId=e.streamViewId,L.initStreamName(this.streamName),L.initSubscriberId(this.serverId),L.initStreamViewId(e.streamViewId),L.setClusterId(this.clusterId),e.sdp}catch(h){throw Kn.error("Error sending view command, error: ",h),h}}async publish(e,t,n=null,r=null){var o,i,s,a,c,u,l,d;const f=Zn(t,n,r);Kn.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(f.codec)),Kn.debug("Publishing local description: ",e);const p=null!=(a=null==(s=null==(i=null==(o=An.getCapabilities)?void 0:o.call(An,"video"))?void 0:i.codecs)?void 0:s.map(e=>e.codec))?a:[],h=Object.values(kn);if(-1===h.indexOf(f.codec))throw Kn.error("Invalid codec ".concat(f.codec,". Possible values are: "),h),new Error("Invalid codec ".concat(f.codec,". Possible values are: ").concat(h));if(p.length>0&&-1===p.indexOf(f.codec))throw Kn.error("Unsupported codec ".concat(f.codec,". Possible values are: "),p),new Error("Unsupported codec ".concat(f.codec,". Possible values are: ").concat(p));f.codec===kn.AV1&&(e=Cn.adaptCodecName(e,"AV1X",kn.AV1));const m={name:this.streamName,sdp:e,codec:f.codec,sourceId:f.sourceId};if(f.priority){if(!(Number.isInteger(f.priority)&&f.priority>=-2147483648&&f.priority<=2147483647))throw new Error("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");m.priority=f.priority}null!==f.record&&(m.record=f.record),Array.isArray(f.events)&&(m.events=f.events);try{if(f.disableVideo&&f.disableAudio)throw new Error("Not attempting to connect as video and audio are disabled");await this.connect(),Kn.info("Sending publish command");const e=await this.transactionManager.cmd("publish",m);if(f.codec===kn.AV1){const t=null==(d=null==(l=null==(u=null==(c=RTCRtpSender.getCapabilities)?void 0:c.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:l.find)?void 0:d.call(l,e=>"video/AV1X"===e.mimeType);e.sdp=t?Cn.adaptCodecName(e.sdp,kn.AV1,"AV1X"):e.sdp}return Kn.info("Command sent, publisherId: ",e.publisherId),Kn.debug("Command result: ",e),this.serverId=e.publisherId,this.clusterId=e.clusterId,L.initStreamName(this.streamName),L.initSubscriberId(this.serverId),L.initFeedId(e.feedId),L.setClusterId(this.clusterId),e.sdp}catch(v){throw Kn.error("Error sending publish command, error: ",v),v}}async cmd(e,t){return Kn.info("Sending cmd: ".concat(e)),this.transactionManager.cmd(e,t)}}const Jn=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={vad:e,pinnedSourceId:t,excludedSourceIds:n}),r},Zn=(e,t,n)=>{let r="object"==typeof e?e:{};if(0===Object.keys(r).length){const o=kn.H264;r={codec:null!=e?e:o,record:t,sourceId:n}}return r};class er extends Error{constructor(e,t){super(e),this.name="FetchError",this.status=t}}const tr=q.get("Director"),nr={WEBRTC:"WebRtc"};let rr="",or="https://director.millicast.com";const ir={setEndpoint:e=>{or=e.replace(/\/$/,"")},getEndpoint:()=>or,setLiveDomain:e=>{rr=e.replace(/\/$/,"")},getLiveDomain:()=>rr,getPublisher:async(e,t=null,n=nr.WEBRTC)=>{const r=sr(e,t,n);tr.info("Getting publisher connection path for stream name: ",r.streamName);const o={streamName:r.streamName,streamType:r.streamType},i={"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)},s="".concat(ir.getEndpoint(),"/api/director/publish");try{const e=await fetch(s,{method:"POST",headers:i,body:JSON.stringify(o)});let t=await e.json();if("fail"===t.status)throw new er(t.data.message,e.status);return t=cr(t),tr.debug("Getting publisher response: ",t),L.initAccountId(t.data.streamAccountId),t.data}catch(a){throw tr.error("Error while getting publisher connection path. ",a),a}},getSubscriber:async(e,t=null,n=null)=>{const r=ar(e,t,n);L.initAccountId(r.streamAccountId),tr.info("Getting subscriber connection data for stream name: ".concat(r.streamName," and account id: ").concat(r.streamAccountId));const o={streamAccountId:r.streamAccountId,streamName:r.streamName};let i={"Content-Type":"application/json"};r.subscriberToken&&(i=f(d({},i),{Authorization:"Bearer ".concat(r.subscriberToken)}));const s="".concat(ir.getEndpoint(),"/api/director/subscribe");try{const e=await fetch(s,{method:"POST",headers:i,body:JSON.stringify(o)});let t=await e.json();if("fail"===t.status)throw new er(t.data.message,e.status);return t=cr(t),tr.debug("Getting subscriber response: ",t),r.subscriberToken&&(t.data.subscriberToken=r.subscriberToken),t.data}catch(a){throw tr.error("Error while getting subscriber connection path. ",a),a}}},sr=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={token:e,streamName:t,streamType:n}),r},ar=(e,t,n)=>{let r="object"==typeof e?e:{};return 0===Object.keys(r).length&&(r={streamName:e,streamAccountId:t,subscriberToken:n}),r},cr=e=>{if(ir.getLiveDomain()){const t=/\/\/(.*?)\//,n=e.data.urls.map(e=>{const n=t.exec(e);return e.replace(n[1],ir.getLiveDomain())});e.data.urls=n}if(e.data.drmObject){const t=e.data.drmObject.playReadyUrl;t&&(e.data.drmObject.playReadyUrl="".concat(ir.getEndpoint()).concat(t));const n=e.data.drmObject.widevineUrl;n&&(e.data.drmObject.widevineUrl="".concat(ir.getEndpoint()).concat(n));const r=e.data.drmObject.fairPlayUrl;r&&(e.data.drmObject.fairPlayUrl="".concat(ir.getEndpoint()).concat(r));const o=e.data.drmObject.fairPlayCertUrl;o&&(e.data.drmObject.fairPlayCertUrl="".concat(ir.getEndpoint()).concat(o))}return e};function ur(e){this.message=e}ur.prototype=new Error,ur.prototype.name="InvalidCharacterError";var lr=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ur("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,s="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};function dr(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(lr(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return lr(t)}}function fr(e){this.message=e}function pr(e,t){if("string"!=typeof e)throw new fr("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(dr(e.split(".")[n]))}catch(r){throw new fr("Invalid token specified: "+r.message)}}fr.prototype=new Error,fr.prototype.name="InvalidTokenError";var hr,mr={exports:{}};function vr(){return hr||(hr=1,function(e,t){(function(n){if(null!=t&&"number"!=typeof t.nodeType)e.exports=n();else{var r=n(),o=typeof self<"u"?self:$.global;"function"!=typeof o.btoa&&(o.btoa=r.btoa),"function"!=typeof o.atob&&(o.atob=r.atob)}})((function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}function n(n){for(var r,o,i,s,a=String(n),c=0,u="";c<a.length;){if(r=a.charCodeAt(c++),o=a.charCodeAt(c++),i=a.charCodeAt(c++),r>255||o>255||i>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");s=r<<16|o<<8|i,u+=e.charAt(s>>18&63)+e.charAt(s>>12&63)+e.charAt(s>>6&63)+e.charAt(63&s)}switch(a.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}}function r(n){var r=String(n).replace(/[=]+$/,"");if(r.length%4===1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,c="";i=r.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?c+=String.fromCharCode(255&o>>(-2*s&6)):0)i=e.indexOf(i);return c}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:n,atob:r}}))}(mr,mr.exports)),mr.exports}var gr,br,yr,wr,Sr=vr();function Er(e){var t,n,r;return{lang:null!=(t=null==e?void 0:e.lang)?t:null==gr?void 0:gr.lang,message:null==e?void 0:e.message,abortEarly:null!=(n=null==e?void 0:e.abortEarly)?n:null==gr?void 0:gr.abortEarly,abortPipeEarly:null!=(r=null==e?void 0:e.abortPipeEarly)?r:null==gr?void 0:gr.abortPipeEarly}}function Cr(e){return null==br?void 0:br.get(e)}function Or(e){return null==yr?void 0:yr.get(e)}function kr(e,t){var n;return null==(n=null==wr?void 0:wr.get(e))?void 0:n.get(t)}function Ir(e){var t,n,r;const o=typeof e;return"string"===o?'"'.concat(e,'"'):"number"===o||"bigint"===o||"boolean"===o?"".concat(e):"object"===o||"function"===o?null!=(r=e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))?r:"null":o}function xr(e,t,n,r,o){var i,s,a,c,u,l,d,f;const p=o&&"input"in o?o.input:n.value,h=null!=(s=null!=(i=null==o?void 0:o.expected)?i:e.expects)?s:null,m=null!=(a=null==o?void 0:o.received)?a:Ir(p),v={kind:e.kind,type:e.type,input:p,expected:h,received:m,message:"Invalid ".concat(t,": ").concat(h?"Expected ".concat(h," but r"):"R","eceived ").concat(m),requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},g="schema"===e.kind,b=null!=(f=null!=(d=null!=(l=null!=(u=null!=(c=null==o?void 0:o.message)?c:e.message)?u:kr(e.reference,v.lang))?l:g?Or(v.lang):null)?d:r.message)?f:Cr(v.lang);void 0!==b&&(v.message="function"==typeof b?b(v):b),g&&(n.typed=!1),n.issues?n.issues.push(v):n.issues=[v]}function Tr(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Er())}}}function jr(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Pr(e,t){var n;const r=[...new Set(e)];return r.length>1?"(".concat(r.join(" ".concat(t," ")),")"):null!=(n=r[0])?n:"never"}var Rr=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Ar(e,t,n){return"function"==typeof e.fallback?e.fallback(t,n):e.fallback}function Vr(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function Mr(e,t){return{kind:"schema",type:"array",reference:Mr,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Tr(this)},"~run"(e,t){var n;const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let o=0;o<r.length;o++){const i=r[o],s=this.item["~run"]({value:i},t);if(s.issues){const a={type:"array",origin:"value",input:r,key:o,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else xr(this,"type",e,t);return e}}}function Lr(e){return{kind:"schema",type:"boolean",reference:Lr,expects:"boolean",async:!1,message:e,get"~standard"(){return Tr(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:xr(this,"type",e,t),e}}}function _r(e,t){return{kind:"schema",type:"loose_object",reference:_r,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Tr(this)},"~run"(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const o in this.entries){const i=this.entries[o];if(o in r||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){const s=o in r?r[o]:Vr(i),a=i["~run"]({value:s},t);if(a.issues){const i={type:"object",origin:"value",input:r,key:o,value:s};for(const t of a.issues)t.path?t.path.unshift(i):t.path=[i],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[o]=a.value}else if(void 0!==i.fallback)e.value[o]=Ar(i);else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(xr(this,"key",e,t,{input:void 0,expected:'"'.concat(o,'"'),path:[{type:"object",origin:"key",input:r,key:o,value:r[o]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)jr(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else xr(this,"type",e,t);return e}}}function Dr(e,t){return{kind:"schema",type:"nullish",reference:Dr,expects:"(".concat(e.expects," | null | undefined)"),async:!1,wrapped:e,default:t,get"~standard"(){return Tr(this)},"~run"(e,t){return null!==e.value&&void 0!==e.value||(void 0!==this.default&&(e.value=Vr(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped["~run"](e,t):(e.typed=!0,e)}}}function Nr(e){return{kind:"schema",type:"number",reference:Nr,expects:"number",async:!1,message:e,get"~standard"(){return Tr(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?xr(this,"type",e,t):e.typed=!0,e}}}function Br(e,t){return{kind:"schema",type:"picklist",reference:Br,expects:Pr(e.map(Ir),"|"),async:!1,options:e,message:t,get"~standard"(){return Tr(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:xr(this,"type",e,t),e}}}function Ur(e){return{kind:"schema",type:"string",reference:Ur,expects:"string",async:!1,message:e,get"~standard"(){return Tr(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:xr(this,"type",e,t),e}}}function Fr(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function zr(e,t){return{kind:"schema",type:"union",reference:zr,expects:Pr(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Tr(this)},"~run"(e,t){let n,r,o;for(const i of this.options){const s=i["~run"]({value:e.value},t);if(s.typed){if(!s.issues){n=s;break}r?r.push(s):r=[s]}else o?o.push(s):o=[s]}if(n)return n;if(r){if(1===r.length)return r[0];xr(this,"type",e,t,{issues:Fr(r)}),e.typed=!0}else{if(1===(null==o?void 0:o.length))return o[0];xr(this,"type",e,t,{issues:Fr(o)})}return e}}}function Gr(){return{kind:"schema",type:"unknown",reference:Gr,expects:"unknown",async:!1,get"~standard"(){return Tr(this)},"~run"(e){return e.typed=!0,e}}}function Hr(e,t,n){const r=e["~run"]({value:t},Er(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}let Wr;const qr=32e3,$r=1e3;class Qr extends J{constructor(e,t,n,r){if(super(),Wr=n,!t)throw Wr.error("Token generator is required to construct this module."),new Error("Token generator is required to construct this module.");this.webRTCPeer=new An,this.signaling=null,this.autoReconnect=r,this.reconnectionInterval=$r,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=t,this.options=null}getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var e;Wr.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(e=this.signaling)||e.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new An}isActive(){const e=this.webRTCPeer.getRTCPeerStatus();return Wr.info("Broadcast status: ",e||"not_established"),"connected"===e}setReconnect(){this.signaling.on("migrate",()=>this.replaceConnection()),this.autoReconnect&&(this.signaling.on(Xn.connectionError,()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new Error("Signaling error: wsConnectionError")}))}),this.webRTCPeer.on(Pn.connectionStateChange,e=>{L.setConnectionState(e),"connected"===e&&L.setConnectionTime(new Date),("failed"===e||"disconnected"===e&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new Error("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===e?(this.alreadyDisconnected=!0,setTimeout(()=>this.reconnect({error:new Error("Connection state change: RTCPeerConnectionState disconnected")}),1500)):this.alreadyDisconnected=!1}))}async reconnect(e){try{Wr.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Kr(this.reconnectionInterval),error:null!=e&&e.error?null==e?void 0:e.error:new Error("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=$r,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Kr(this.reconnectionInterval),Wr.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),setTimeout(()=>this.reconnect({error:t}),this.reconnectionInterval)}}}const Kr=e=>e<qr?2*e:e,Xr=window.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&window.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Yr="RTCRtpScriptTransform"in window,Jr='(function(){"use strict";function z(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U={exports:{}};/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */var q=U.exports,D;function V(){return D||(D=1,function(t){(function(n){var e={};e.VERSION="1.6.1";var i,r={},o=function(s,u){return function(){return u.apply(s,arguments)}},a=function(){var s=arguments,u=s[0],h,c;for(c=1;c<s.length;c++)for(h in s[c])!(h in u)&&s[c].hasOwnProperty(h)&&(u[h]=s[c][h]);return u},d=function(s,u){return{value:s,name:u}};e.TRACE=d(1,"TRACE"),e.DEBUG=d(2,"DEBUG"),e.INFO=d(3,"INFO"),e.TIME=d(4,"TIME"),e.WARN=d(5,"WARN"),e.ERROR=d(8,"ERROR"),e.OFF=d(99,"OFF");var l=function(s){this.context=s,this.setLevel(s.filterLevel),this.log=this.info};l.prototype={setLevel:function(s){s&&"value"in s&&(this.context.filterLevel=s)},getLevel:function(){return this.context.filterLevel},enabledFor:function(s){var u=this.context.filterLevel;return s.value>=u.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"start"])},timeEnd:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"end"])},invoke:function(s,u){i&&this.enabledFor(s)&&i(u,a({level:s},this.context))}};var f=new l({filterLevel:e.OFF});(function(){var s=e;s.enabledFor=o(f,f.enabledFor),s.trace=o(f,f.trace),s.debug=o(f,f.debug),s.time=o(f,f.time),s.timeEnd=o(f,f.timeEnd),s.info=o(f,f.info),s.warn=o(f,f.warn),s.error=o(f,f.error),s.log=s.info})(),e.setHandler=function(s){i=s},e.setLevel=function(s){f.setLevel(s);for(var u in r)r.hasOwnProperty(u)&&r[u].setLevel(s)},e.getLevel=function(){return f.getLevel()},e.get=function(s){return r[s]||(r[s]=new l(a({name:s},f.context)))},e.createDefaultHandler=function(s){s=s||{},s.formatter=s.formatter||function(p,_){_.name&&p.unshift("["+_.name+"]")};var u={},h=function(c,p){Function.prototype.apply.call(c,console,p)};return typeof console>"u"?function(){}:function(c,p){c=Array.prototype.slice.call(c);var _=console.log,g;p.level===e.TIME?(g=(p.name?"["+p.name+"] ":"")+c[0],c[1]==="start"?console.time?console.time(g):u[g]=new Date().getTime():console.timeEnd?console.timeEnd(g):h(_,[g+": "+(new Date().getTime()-u[g])+"ms"])):(p.level===e.WARN&&console.warn?_=console.warn:p.level===e.ERROR&&console.error?_=console.error:p.level===e.INFO&&console.info?_=console.info:p.level===e.DEBUG&&console.debug?_=console.debug:p.level===e.TRACE&&console.trace&&(_=console.trace),s.formatter(c,p),h(_,c))}},e.useDefaults=function(s){e.setLevel(s&&s.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(s))},e.setDefaults=e.useDefaults,t.exports?t.exports=e:(e._prevLogger=n.Logger,e.noConflict=function(){return n.Logger=e._prevLogger,e},n.Logger=e)})(q)}(U)),U.exports}var j=V(),R=z(j);class w{constructor(n){this.data=n,this.bitOffset=0}readBits(n){if(this.bitOffset+n>this.data.length*8)throw new Error("Attempted to read past the end of the bitstream");let e=0;for(let i=0;i<n;i++){const r=Math.floor(this.bitOffset/8),o=7-this.bitOffset%8,a=this.data[r]>>o&1;e|=a<<n-1-i,this.bitOffset++}return e}skip(n){this.bitOffset+=n}readExpGolombUnsigned(){let n=-1;for(let e=0;e===0;n++)e=this.readBits(1);return(1<<n)-1+this.readBits(n)}readExpGolombSigned(){const n=this.readExpGolombUnsigned();return n%2===0?-(n/2):(n+1)/2}}const m={SLICE_NON_IDR:1,SLICE_PARTITION_A:2,SLICE_IDR:5,SEI_H264:6,SEI_H265_PREFIX:39,SEI_H265_SUFFIX:40,SPS_H264:7,SPS_H265:33,PPS_H264:8,PPS_H265:34},G={PIC_TIMING:1,USER_DATA_UNREGISTERED:5},E={LEGACY:1,NEW:2,TIMECODE:3,OTHER:4},Y="6e9cfd2a-5907-49ff-b363-8978a6e8340e",X="9a21f3be-31f0-4b78-b0be-c7f7dbb97250",P="d40e38ea-d419-4c62-94ed-20ac37b4e4fa";class ${constructor(n="H264"){this.sps=new Map,this.pps=new Map,this.activeSPS=null,this.codec=n}collectPPS(n){this.codec==="H264"?this.collectH264PPS(n):this.collectH265PPS(n)}collectSPS(n){this.codec==="H264"?this.collectH264SPS(n):this.collectH265SPS(n)}collectH264SPS(n){const e=new w(n),i=e.readBits(8),r=[100,110,122,244,44,83,86,118,128,138,139,134,135];e.skip(8),e.skip(8);const o=e.readExpGolombUnsigned();if(o>31||o<0)throw new Error("Invalid seq_parameter_set_id");if(r.includes(i)){const l=e.readExpGolombUnsigned();if(l===3&&e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.skip(1),e.readBits(1)){const s=l!==3?8:12;for(let u=0;u<s;u++)if(e.readBits(1)){const h=u<6?16:64;let c=8,p=8;for(let _=0;_<h;_++){if(p!==0){const g=e.readExpGolombSigned();p=(c+g+256)%256}c=p===0?c:p}}}}e.readExpGolombUnsigned();const a=e.readExpGolombUnsigned();if(a===0)e.readExpGolombUnsigned();else if(a===1){e.skip(1),e.readExpGolombSigned(),e.readExpGolombSigned();const l=e.readExpGolombUnsigned();for(let f=0;f<l;f++)e.readExpGolombSigned()}e.readExpGolombUnsigned(),e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readBits(1)===0&&e.skip(1),e.skip(1),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned());let d;if(e.readBits(1)){let f=function(c){const p=c.readExpGolombUnsigned();c.skip(4),c.skip(4);for(let x=0;x<=p;x++)c.readExpGolombUnsigned(),c.readExpGolombUnsigned(),c.skip(1);c.skip(5);const _=c.readBits(5),g=c.readBits(5),B=c.readBits(5);return{cpb_removal_delay_length_minus1:_,dpb_output_delay_length_minus1:g,time_offset_length:B}};e.readBits(1)&&e.readBits(8)===255&&(e.skip(16),e.skip(16)),e.readBits(1)&&e.skip(1),e.readBits(1)&&(e.skip(3),e.skip(1),e.readBits(1)&&e.skip(24)),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned());const l=e.readBits(1)?{num_units_in_tick:e.readBits(32),time_scale:e.readBits(32),fixed_frame_rate_flag:e.readBits(1)}:void 0,s=e.readBits(1)?f(e):void 0,u=e.readBits(1)?f(e):void 0;(s||u)&&e.skip(1);const h=e.readBits(1);d={timing_info:l,nal_hrd_parameters:s,vcl_hrd_parameters:u,pic_struct_present_flag:h}}this.sps.set(o,{vui_parameters:d})}collectH265SPS(n){}collectH264PPS(n){const e=new w(n),i=e.readExpGolombUnsigned();if(i>255||i<0)throw new Error("Invalid pic_parameter_set_id");const r=e.readExpGolombUnsigned();this.pps.set(i,{seq_parameter_set_id:r})}collectH265PPS(n){}findActiveSPS(n){const e=new w(n);e.readExpGolombUnsigned(),e.readExpGolombUnsigned();const i=e.readExpGolombUnsigned(),r=this.pps.get(i);if(r){const o=this.sps.get(r.seq_parameter_set_id);if(o){this.activeSPS=o;return}}throw new Error("Cannot find the active SPS")}}const S=new $;function O(t,n){for(;n<t.byteLength-4;){if(t[n]===0&&t[n+1]===0&&(t[n+2]===1||t[n+2]===0&&t[n+3]===1))return n;n+=1}return-1}function T(t){const n=new Uint8Array(t.byteLength);let e=0,i=0;for(let r=2;r<t.byteLength;r++)t[r]===3&&t[r-1]===0&&t[r-2]===0&&(n.set(t.subarray(i,r),e),e+=r-i,i=r+1);return i<t.byteLength&&n.set(t.subarray(i),e),n}function J(t,n){let e=0;const i=n==="H264"?1:2,r=[];for(;e<t.byteLength-4;){const o=O(t,e);if(o>=e){const a=t[o+2]===1?3:4,d=O(t,o+a+i);if(d>o)r.push(t.subarray(o,d)),e=d;else{r.push(t.subarray(o));break}}else break}return r}function K(t,n){let e=!0;return J(t,n).filter(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=i[r],d=n==="H264"?a&31:a>>1&63;if(e)switch(d){case m.PPS_H264:case m.PPS_H265:S.collectPPS(T(i.subarray(r+o)));break;case m.SPS_H264:case m.SPS_H265:S.collectSPS(T(i.subarray(r+o)));break;case m.SLICE_IDR:case m.SLICE_NON_IDR:case m.SLICE_PARTITION_A:try{S.findActiveSPS(T(i.subarray(r+o))),e=!1}catch(l){console.info("Failed to find active SPS. Will not be able to extract PIC timing metadata")}break}return[m.SEI_H264,m.SEI_H265_PREFIX,m.SEI_H265_SUFFIX].includes(d)})}function Z(t){let n=0,e=0;for(;t[e]===255;)n+=255,e++;n+=t[e],e++;let i=0;for(;t[e]===255;)i+=255,e++;return i+=t[e],e++,{type:n,content:t.subarray(e,e+i)}}function Q(t){const n=new Uint8Array(L(X)),e=new Uint8Array(L(Y)),i=new Uint8Array(L(P));return n.every((r,o)=>r===t[o])?E.TIMECODE:e.every((r,o)=>r===t[o])?E.LEGACY:i.every((r,o)=>r===t[o])?E.NEW:E.OTHER}function ee(t,n){let e=0;t.uuid=n.subarray(e,e+16),e+=16;const i=Q(t.uuid),r=n.subarray(e);switch(i){case E.LEGACY:case E.OTHER:t.unregistered=r;break;case E.TIMECODE:t.timecode=C(r);break;case E.NEW:{let o=0;const a=H(Date.now()).length,d=r.subarray(o,a);o+=a;const l=r.subarray(o);t.timecode=C(d),t.unregistered=l;break}}}function C(t){const n=t.reduce((o,a)=>(o<<BigInt(8))+BigInt(a),BigInt(0)),e=Number(n),i=new Date(e);return new TextEncoder().encode(i.toISOString())}function te(t,n){var f,s,u,h,c;if(!S.activeSPS){console.warn("Cannot find the active SPS");return}const e=(f=S.activeSPS.vui_parameters.nal_hrd_parameters)!=null?f:S.activeSPS.vui_parameters.vcl_hrd_parameters,i={cpb_dpb_delays_present_flag:e?1:0,cpb_removal_delay_length_minus1:(s=e==null?void 0:e.cpb_removal_delay_length_minus1)!=null?s:23,dpb_output_delay_length_minus1:(u=e==null?void 0:e.dpb_output_delay_length_minus1)!=null?u:23,time_offset_length:e?(h=e.time_offset_length)!=null?h:24:void 0,pic_struct_present_flag:(c=S.activeSPS.vui_parameters.pic_struct_present_flag)!=null?c:0};if(!i.pic_struct_present_flag){console.warn("pic_struct_present_flag is not present");return}const r=new w(n);i.cpb_dpb_delays_present_flag&&(r.skip(i.cpb_removal_delay_length_minus1+1),r.skip(i.dpb_output_delay_length_minus1+1));const o=[1,1,1,2,2,3,3,2,3],a=r.readBits(4);if(a>=o.length)throw new Error("Invalid pic_struct");const d=o[a],l=[];for(let p=0;p<d;p++)if(r.readBits(1)){const g={};r.skip(2),r.skip(1),r.skip(5);const B=r.readBits(1);if(r.skip(2),g.n_frames=r.readBits(8),B?(g.seconds_value=r.readBits(6),g.minutes_value=r.readBits(6),g.hours_value=r.readBits(5)):r.readBits(1)&&(g.seconds_value=r.readBits(6),r.readBits(1)&&(g.minutes_value=r.readBits(6),r.readBits(1)&&(g.hours_value=r.readBits(5)))),i.time_offset_length)try{g.time_offset=r.readBits(i.time_offset_length)}catch(x){console.error("Failed to read time_offset",x),g.time_offset=0}else g.time_offset=0;l.push(g)}t.seiPicTimingTimeCodeArray=l}function ne(t,n){if(n!=="H264"&&n!=="H265")throw new Error("Unsupported codec ".concat(n));const e={};return S.codec=n,K(new Uint8Array(t.data),n).forEach(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=T(i.subarray(r+o)),d=Z(a);switch(d.type){case G.PIC_TIMING:te(e,d.content);break;case G.USER_DATA_UNREGISTERED:ee(e,d.content);break}}),e}function re(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function L(t){return t.replace(/-/g,"").match(/.{1,2}/g).map(n=>parseInt(n,16))}function ie(t,n,e){const i=new Uint8Array(L(t)),r=H(e),o=new TextEncoder().encode(JSON.stringify(n)),a=new Uint8Array(i.length+r.length+o.length);return a.set(i),a.set(r,i.length),a.set(o,r.length+i.length),a}function se(t){const n=[],e=Math.floor(t.byteLength/255),i=t.byteLength%255;for(let r=0;r<e;r++)n.push(255);return n.push(i),new Uint8Array([5,...n])}function oe(t){const n=[];for(let e=0;e<t.byteLength;e++)e+2<t.byteLength&&[0,1,2,3].includes(t[e+2])&&t[e]===0&&t[e+1]===0?(n.push(t[e]),n.push(t[e+1]),e+=2,n.push(3)):n.push(t[e]);return n.push(128),new Uint8Array(n)}function H(t){const n=[];if(!isNaN(t)){const e=BigInt(t);for(let i=0;i<Math.ceil(Math.floor(Math.log2(new Number(t))+1)/8);i++)n.unshift(new Number(e>>BigInt(8*i)&BigInt(255)))}return new Uint8Array(n)}function ae({uuid:t,payload:n,timecode:e}){const i=[0,0,0,1],r=[102],o=ie(t,n,e),a=se(o),d=oe(o),l=new Uint8Array(i.length+r.length+a.length+d.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l.set(d,i.length+r.length+a.length),l}function ce({uuid:t,payload:n,timecode:e},i){if(t===""||n==="")throw new Error("uuid and payload cannot be empty");re(t)||(console.warn("Invalid UUID. Using default UUID."),t=P,e=Date.now());const r=ae({uuid:t,payload:n,timecode:e}),o=new DataView(i.data),a=new ArrayBuffer(i.data.byteLength+r.byteLength),d=new DataView(a);for(let l=0;l<i.data.byteLength;l++)d.setUint8(l,o.getUint8(l));for(let l=0;l<r.byteLength;l++)d.setUint8(i.data.byteLength+l,r[l]);i.data=a}R.get("TransformWorker").setLevel(R.DEBUG);const le=2e3,b=[];let y="",k={};const v={};let I=[];function M(t){return new TransformStream({start(){},flush(){},async transform(n,e){var i,r;if(N(n)){const o=((i=k[n.getMetadata().payloadType])==null?void 0:i.toUpperCase())||(y==null?void 0:y.toUpperCase());if(o==="H264"){const a=ne(n,o);(a.timecode||a.unregistered||((r=a.seiPicTimingTimeCodeArray)==null?void 0:r.length)>0)&&self.postMessage({event:"metadata",mid:t,metadata:a})}self.postMessage({event:"complete",frame:{type:n.type,timestamp:n.timestamp,data:n.data}})}e.enqueue(n)}})}function N(t){if(typeof RTCEncodedVideoFrame<"u")try{if(t instanceof RTCEncodedVideoFrame)return!0}catch(n){}return!!(t.constructor&&t.constructor.name==="RTCEncodedVideoFrame"||typeof t.width=="number"&&typeof t.height=="number"||t.type==="video")}function F(){Object.keys(v).sort().join()===I.sort().join()&&(b.shift(),I=[])}function de(t){const n=new Date().getTime();v[t]=n,Object.keys(v).filter(i=>n-v[i]>le).forEach(i=>{delete v[i],delete I[i]}),F()}function W(){return new TransformStream({start(){},flush(){},async transform(t,n){if(N(t)){const i=t.getMetadata().synchronizationSource;if(de(i),!I.includes(i)&&b.length)try{if(!/(h26[4])/.test(y))throw new Error("Sending metadata is not supported with any other codec other than H.264");b[0].uuid===P&&(b[0].timecode=Date.now()),ce(b[0],t),I.push(i)}catch(r){console.error(r)}finally{F()}}n.enqueue(t)}})}function A({readable:t,writable:n},e){t.pipeThrough(e).pipeTo(n)}addEventListener("rtctransform",t=>{let n;if(t.transformer.options.name==="senderTransform")y=t.transformer.options.codec,n=W();else if(t.transformer.options.name==="receiverTransform")k=t.transformer.options.payloadTypeCodec||{},y=t.transformer.options.codec||"",n=M(t.transformer.options.mid);else return;A(t.transformer,n)}),addEventListener("message",t=>{const{action:n}=t.data;switch(n){case"insertable-streams-sender":y=t.data.codec,A(t.data,W());break;case"insertable-streams-receiver":k=t.data.payloadTypeCodec||{},y=t.data.codec||"",A(t.data,M(t.data.mid));break;case"metadata-sei-user-data-unregistered":b.push({uuid:t.data.uuid,payload:t.data.payload});break}})})();\n',Zr=typeof self<"u"&&self.Blob&&new Blob([Jr],{type:"text/javascript;charset=utf-8"});function eo(e){let t;try{if(t=Zr&&(self.URL||self.webkitURL).createObjectURL(Zr),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),n}catch(n){return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(Jr),{name:null==e?void 0:e.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const to=q.get("Publish"),no={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:kn.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};class ro extends Qr{constructor(e,t,n=!0){e&&to.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,t,to,n)}async connect(e=no){io(e),this.options=f(d(d({},no),e),{peerConfig:d(d({},no.peerConfig),e.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===kn.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(e){var t,n;this.options.mediaStream=null!=(n=null==(t=this.webRTCPeer)?void 0:t.getTracks())?n:this.options.mediaStream,super.reconnect(e)}async replaceConnection(){var e,t;to.info("Migrating current connection"),this.options.mediaStream=null!=(t=null==(e=this.webRTCPeer)?void 0:e.getTracks())?t:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var e;this.recordingAvailable?(this.options.record=!0,await(null==(e=this.signaling)?void 0:e.cmd("record")),to.info("Broadcaster start recording")):to.error("Record not available")}async unrecord(){var e;this.recordingAvailable?(this.options.record=!1,await(null==(e=this.signaling)?void 0:e.cmd("unrecord")),to.info("Broadcaster stop recording")):to.error("Unrecord not available")}stop(){var e;super.stop(),null==(e=this.worker)||e.terminate(),this.worker=null}async initConnection(e){var t,n;let r,o;if(to.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw to.error("Error while broadcasting. MediaStream required"),new Error("MediaStream required");if(!e.migrate&&this.isActive())throw to.warn("Broadcast currently working"),new Error("Broadcast currently working");try{o=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==o?void 0:o.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(v){throw to.error("Error generating token."),v instanceof er&&(401!==v.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),v}if(!o)throw to.error("Error while broadcasting. Publisher data required"),new Error("Publisher data required");const i=pr(o.jwt);if(this.streamName=i.millicast.streamName,this.recordingAvailable=i[Sr.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw to.error("Error while broadcasting. Record option detected but recording is not available"),new Error("Record option detected but recording is not available");const s=new Yn({streamName:this.streamName,url:"".concat(o.urls[0],"?token=").concat(o.jwt)}),a=e.migrate?new An:this.webRTCPeer;await a.createRTCPeer(this.options.peerConfig,jn.Publisher),null==(t=this.stopReemitingWebRTCPeerInstanceEvents)||t.call(this),null==(n=this.stopReemitingSignalingInstanceEvents)||n.call(this),this.stopReemitingWebRTCPeerInstanceEvents=re(a,this,[Pn.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=re(s,this,[Xn.broadcastEvent]);const c=a.getRTCLocalSDP(this.options),u=s.connect();r=await Promise.all([c,u]);const l=r[0];this.options.metadata&&(this.worker||(this.worker=new eo),this.getRTCPeerConnection().getSenders().forEach(e=>{if(Yr)e.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Xr){const{readable:t,writable:n}=e.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:t,writable:n},[t,n])}}));let d=this.signaling;this.signaling=s;const f=this.signaling.publish(l,this.options),p=a.peer.setLocalDescription(a.sessionDescription);r=await Promise.all([f,p]);let h=r[0];!this.options.disableVideo&&this.options.bandwidth>0&&(h=a.updateBandwidthRestriction(h,this.options.bandwidth)),await a.setRTCRemoteSDP(h),to.info("Broadcasting to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=a,this.setReconnect(),e.migrate&&this.webRTCPeer.on(Pn.connectionStateChange,e=>{var t,n;["connected","disconnected","failed","closed"].includes(e)&&(null==(t=null==d?void 0:d.close)||t.call(d),null==(n=null==m?void 0:m.closeRTCPeer)||n.call(m),d=m=null)})}sendMetadata(e,t=xn){var n;if(null!=(n=this.options)&&n.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:t,payload:e});else{let e="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(e+="\n- Stream not being published."):(e+="\n- Metadata option is not enabled.",this.options.codec!==kn.H264&&(e+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(e+="\n- Video disabled.")):e+="\n- Stream not being published.",to.warn(e)}}}let oo;const io=e=>{oo=oo||_r({sourceId:Dr(Ur()),stereo:Dr(Lr()),dtx:Dr(Lr()),absCaptureTime:Dr(Lr()),dependencyDescriptor:Dr(Lr()),mediaStream:Dr(zr([Mr(Gr()),Gr()])),bandwidth:Dr(Nr()),metadata:Dr(Lr()),disableVideo:Dr(Lr()),disableAudio:Dr(Lr()),codec:Dr(Br(Object.values(kn))),simulcast:Dr(Lr()),scalabilityMode:Dr(Ur()),peerConfig:Dr(_r({autoInitStats:Dr(Lr()),statsIntervalMs:Dr(Nr())})),record:Dr(Lr()),events:Dr(Mr(Br(["active","inactive","viewercount"]))),priority:Dr(Nr())});const{success:t,issues:n}=Hr(oo,e);t||to.warn(new Rr(n),e)};function so(e){if(!e)return new Uint8Array;const t=e.length,n=new Uint8Array(t/2);for(let r=0;r<t;r+=2)n[r/2]=parseInt(e.substr(r,2),16);return n}function ao(e,t,n){if(Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(t,n)){const r=e[n];e[n]=t[n],t[n]=r}else console.error('One or both objects do not have the property "'.concat(n,'"'))}function co(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}const uo=fo;var lo;function fo(e,t){const n=So();return(fo=function(e,t){return n[e-=440]})(e,t)}(function(){const e=fo,t=So();for(;;)try{if(-parseInt(e(447))/1+parseInt(e(445))/2+parseInt(e(449))/3*(parseInt(e(454))/4)+parseInt(e(453))/5+-parseInt(e(456))/6+parseInt(e(450))/7+-parseInt(e(441))/8*(-parseInt(e(455))/9)===847340)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const po=navigator&&navigator[uo(448)]||"",ho=navigator&&navigator[uo(443)]||"",mo=!(null==window||!window.RTCRtpScriptTransform),vo=po.includes("Firefox"),go=!vo&&ho.includes("Apple"),bo=!vo&&!go&&po[uo(440)](uo(451)),yo=!vo&&!go&&!bo&&po[uo(440)](uo(446)),wo=(null===(lo=null==navigator?void 0:navigator[uo(442)])||void 0===lo?void 0:lo[uo(452)])||(null==navigator?void 0:navigator[uo(452)])||"";function So(){const e=["1583117AOxBcs","userAgent","153Sdjzsk","5371359GvUFPp","Edg","platform","7141470dfeDnP","10068LWEgOs","243621EPkoPw","8310150fEFCnA","includes","328VMcnkw","userAgentData","vendor","Win32","763310RGZQro","Chrome"];return(So=function(){return e})()}const Eo={supportsRtpScriptTransform:mo,isFirefox:vo,isSafari:go,isEdge:bo,isChrome:yo,platform:wo,isWindows:"Windows"===wo||wo===uo(444)},Co=Oo;function Oo(e,t){const n=jo();return(Oo=function(e,t){return n[e-=300]})(e,t)}(function(){const e=Oo,t=jo();for(;;)try{if(-parseInt(e(327))/1+parseInt(e(304))/2*(parseInt(e(300))/3)+-parseInt(e(332))/4*(parseInt(e(316))/5)+-parseInt(e(322))/6*(parseInt(e(311))/7)+parseInt(e(308))/8*(-parseInt(e(307))/9)+parseInt(e(314))/10*(parseInt(e(302))/11)+parseInt(e(329))/12===997665)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();class ko{constructor(e){this[Oo(310)]=e}[Co(323)](...e){const t=Co;xo[t(319)]>=4&&console[t(323)](this[t(310)],...e)}[Co(331)](...e){const t=Co;xo[t(319)]>=3&&console[t(331)](this[t(310)],...e)}[Co(320)](...e){const t=Co;xo[t(319)]>=2&&console[t(320)](this[t(310)],...e)}error(...e){xo[Co(319)]>=1&&console.error(this.tag,...e)}}function Io(e){return new ko(e)}const xo={logLevel:3,mediaDumps:{video:{in:{durationMs:0,delimited:!0},out:{durationMs:0}},audio:{in:{durationMs:0},out:{durationMs:0}}}};function To(){return(new Date)[Co(317)]().slice(11,-1)}function jo(){const e=["mediaBuffer","click","529321KfbOwo","endTimestampMs","28972188cmcnxe","containerFileExt","info","4ZlZeJQ","9kyfNFe","mediaType","172953TzXwsI","byteLength","1327806tybvjI","href","createObjectURL","1089qysnCz","112088WLFXHK","substring","tag","692993ZcAeLj","set","download","810qiScYX","startTimestampMs","8821555KArxhe","toISOString","application/octet-stream","logLevel","warn","revokeObjectURL","42PDuKrJ","debug","targetDurationMs"];return(jo=function(){return e})()}class Po{constructor(e,t,n){const r=Co;this[r(325)]=null,this[r(315)]=-1,this.endTimestampMs=-1,this[r(301)]=e,this[r(330)]=t,this[r(324)]=n,n>0&&(this[r(325)]=new Uint8Array)}append(e,t){const n=Co;if(!this[n(325)])return!1;if(this[n(325)]=function(e,t){const n=Co,r=new Uint8Array((0|e[n(303)])+(0|t.byteLength));return r[n(312)](e,0),r[n(312)](t,0|e.byteLength),r}(this[n(325)],e),void 0!==t)if(-1===this[n(315)])this.startTimestampMs=t,this[n(328)]=t+this[n(324)];else if(t>=this[n(328)]){const e=(new Date)[n(317)]()[n(309)](0,19).replace(/:/g,"-"),t=this.mediaType+"-"+e+"."+this.containerFileExt;return function(e,t,n=Co(318)){const r=Co,o=document.createElement("a"),i=new Blob([e],{type:n});o.href=URL[r(306)](i),o[r(313)]=t,o[r(326)](),URL[r(321)](o[r(305)])}(this[n(325)],t),this.mediaBuffer=null,!1}return!0}}const Ro=_o;(function(){const e=_o,t=Xo();for(;;)try{if(parseInt(e(160))/1+-parseInt(e(363))/2+-parseInt(e(321))/3*(-parseInt(e(401))/4)+parseInt(e(229))/5+-parseInt(e(276))/6+parseInt(e(400))/7*(-parseInt(e(153))/8)+-parseInt(e(223))/9===858456)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const Ao=Io("[MUX]"),Vo=Eo[Ro(387)];function Mo(e,t){const n=Ro;let r=new Uint8Array((0|e[n(413)])+(0|t[n(413)]));return r.set(e,0),r[n(251)](t,0|e[n(413)]),r}const Lo=(e,t,n,r)=>{const o=Ro,i=r[o(425)]||1;t*=i,n*=i;const s=(u=e)instanceof ArrayBuffer?u:u[Ro(366)],a=(e[o(188)]||0)+e[o(413)],c=(e[o(188)]||0)+t;var u;let l=Math[o(177)](0,Math[o(291)](c,a)),d=Math[o(291)](l+Math[o(177)](n,0),a);return l/=i,d/=i,new r(s,l,d-l)};function _o(e,t){const n=Xo();return(_o=function(e,t){return n[e-=147]})(e,t)}function Do(e,t=0,n=1/0){return Lo(e,t,n,Uint8Array)}function No(e){const t=Ro,n=Array.from(e)[t(238)](e=>e[t(384)](0));return new Uint8Array(n)}function Bo(e){const t=function(e){const t=Ro;let n="";for(let r=0;r<e[t(268)];r+=16e3){const o=e.subarray(r,r+16e3);n+=String[t(358)].apply(null,o)}return n}(Do(e));return btoa(t)}class Uo{static get[Ro(449)](){return 1}static get[Ro(427)](){return 5}static get SEI(){return 6}static get[Ro(324)](){return 7}static get[Ro(379)](){return 8}static get[Ro(272)](){return 9}static get[Ro(159)](){const e=Ro;return{[Uo[e(427)]]:e(427),[Uo[e(273)]]:e(273),[Uo[e(324)]]:e(324),[Uo.PPS]:"PPS",[Uo[e(449)]]:"NDR",[Uo.AUD]:e(272)}}static[Ro(234)](e){const t=Ro;return e[t(186)]in Uo[t(159)]?Uo[t(159)][e.ntype]:t(344)}constructor(e){const t=Ro;this[t(452)]=e,this[t(402)]=(96&this[t(452)][0])>>5,this[t(186)]=31&this[t(452)][0],this.isvcl=1==this[t(186)]||5==this[t(186)],this[t(309)]="",this.isfmb=!1}[Ro(365)](){const e=Ro;return Uo[e(234)](this)+": NRI: "+this[e(209)]()}[Ro(209)](){return this[Ro(402)]}[Ro(234)](){return this[Ro(186)]}[Ro(306)](){return this[Ro(186)]===Uo.IDR}[Ro(203)](){return this[Ro(452)]}[Ro(327)](){return this[Ro(452)].byteLength}[Ro(194)](){return 4+this[Ro(327)]()}[Ro(341)](){const e=Ro,t=new Uint8Array(this[e(194)]());return new DataView(t[e(366)]).setUint32(0,this[e(194)]()-4),t[e(251)](this.getPayload(),4),t}}class Fo{constructor(e){const t=Ro;this[t(316)]=e,this[t(368)]=0,this[t(157)]=8*e.byteLength}[Ro(433)](e){const t=Ro;this.data=e,this[t(368)]=0,this.bitLength=8*e[t(413)]}get[Ro(451)](){return this[Ro(157)]-this.index}skipBits(e){const t=Ro;if(this[t(451)]<e)return!1;this[t(368)]+=e}[Ro(338)](e,t=!0){const n=Ro;return this[n(259)](e,this[n(368)],t)}getBits(e,t,n=!0){const r=Ro;if(this[r(451)]<e)return 0;const o=t%8,i=this.data[t/8|0]&255>>>o,s=8-o;if(s>=e)return n&&(this[r(368)]+=e),i>>s-e;{n&&(this[r(368)]+=s);const o=e-s;return i<<o|this[r(259)](o,t+s,n)}}[Ro(444)](){const e=Ro;let t;for(t=0;t<this[e(157)]-this[e(368)];++t)if(0!==this[e(259)](1,this[e(368)]+t,!1))return this[e(368)]+=t,t;return t}[Ro(334)](){const e=Ro;this[e(155)](1+this[e(444)]())}skipEG(){const e=Ro;this[e(155)](1+this[e(444)]())}[Ro(179)](){const e=Ro,t=this.skipLZ();return this[e(338)](t+1)-1}[Ro(248)](){const e=this[Ro(179)]();return 1&e?1+e>>>1:-1*(e>>>1)}[Ro(239)](){return 1===this[Ro(338)](1)}[Ro(419)](e=1){return this.readBits(8*e)}[Ro(232)](){return this.readBits(16)}readUInt(){return this[Ro(338)](32)}}class zo{static[Ro(267)](e,t){const n=Ro;let r=[],o=!1,i=!1,s=!1,a=!1,c=0,u=0,l=0,d=[];for(;c<=e.byteLength;){if(c<e.byteLength){const t=e[c++];0!==t?(1===t&&u>1&&(l=u>2?4:3,d.push(c)),u=0):++u}else l=0,d.push(c++);if(d.length>1){const n=d.shift(),f=d[0]-l;if(n<f){let l=!1;const d=31&e[n];if(d===Uo.NDR?i=!0:d===Uo.IDR?o=!0:d===Uo.SPS?(l=s,s=!0):d===Uo.PPS&&(l=a,a=!0),!l)if(!t||d!==Uo.NDR&&d!==Uo.IDR)r.push(e.subarray(n,f));else{const t=new Uint8Array(f-n);let o=0;for(c=n,u=0;c<f;){let n=e[c++];u>1&&3===n&&(u=0,n=e[c++]),0!==n?u=0:++u,t[o++]=n}r.push(t.subarray(0,o))}}}}let f=!0,p=!1;return i||o?i&&o&&(Ao[n(265)](n(331)),f=!1):(Ao[n(265)]("[H264Parser] No VCL NALUs found"),f=!1),o&&(s&&a?p=!0:Ao.warn(n(158))),{valid:f,idr:p,nalus:r}}static[Ro(333)](e,t){let n,r=8,o=8;for(let i=0;i<t;i++)0!==o&&(n=e.readEG(),o=(r+n+256)%256),r=0===o?r:o}static[Ro(432)](e){const t=Ro;let n,r,o,i,s,a,c=new Fo(e),u=0,l=0,d=0,f=0,p=1;if(c.readUByte(),n=c[t(419)](),c.readBits(5),c[t(155)](3),c[t(419)](),c[t(334)](),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n){var h=c.readUEG();if(3===h&&c[t(155)](1),c[t(334)](),c[t(334)](),c[t(155)](1),c[t(239)]()){a=3!==h?8:12;for(let e=0;e<a;++e)c[t(239)]()&&(e<6?zo[t(333)](c,16):zo[t(333)](c,64))}}c[t(334)]();var m=c[t(179)]();if(0===m)c.readUEG();else if(1===m){c.skipBits(1),c[t(221)](),c[t(221)](),r=c[t(179)]();for(let e=0;e<r;++e)c[t(221)]()}if(c[t(334)](),c.skipBits(1),o=c[t(179)](),i=c.readUEG(),s=c[t(338)](1),0===s&&c[t(155)](1),c[t(155)](1),c.readBoolean()&&(u=c[t(179)](),l=c[t(179)](),d=c[t(179)](),f=c[t(179)]()),c[t(239)]()){if(c.readBoolean()){let e;switch(c.readUByte()){case 1:e=[1,1];break;case 2:e=[12,11];break;case 3:e=[10,11];break;case 4:e=[16,11];break;case 5:e=[40,33];break;case 6:e=[24,11];break;case 7:e=[20,11];break;case 8:e=[32,11];break;case 9:e=[80,33];break;case 10:e=[18,11];break;case 11:e=[15,11];break;case 12:e=[64,33];break;case 13:e=[160,99];break;case 14:e=[4,3];break;case 15:e=[3,2];break;case 16:e=[2,1];break;case 255:e=[c[t(419)]()<<8|c[t(419)](),c[t(419)]()<<8|c[t(419)]()]}e&&e[0]>0&&e[1]>0&&(p=e[0]/e[1])}c.readBoolean()&&c[t(155)](1),c[t(239)]()&&(c[t(155)](4),c[t(239)]()&&c[t(155)](24)),c[t(239)]()&&(c[t(334)](),c[t(334)]()),c.readBoolean()&&(c.readUInt(),c[t(187)](),c.readBoolean())}return{width:Math[t(440)]((16*(o+1)-2*u-2*l)*p),height:(2-s)*(i+1)*16-(s?2:4)*(d+f)}}static[Ro(386)](e){const t=Ro;let n=new Fo(e[t(203)]());n[t(419)](),e[t(196)]=0===n[t(179)](),e[t(309)]=n[t(179)]()}constructor(e){const t=Ro;this.remuxer=e,this[t(233)]=e.mp4track}[Ro(256)](e){const t=Ro;var n=zo[t(432)](new Uint8Array(e));this.track[t(237)]=n.width,this[t(233)].height=n.height,this.track[t(382)]=[new Uint8Array(e)],this.track[t(210)]=t(292);let r=new DataView(e.buffer,e[t(188)]+1,4);for(let i=0;i<3;++i){var o=r[t(313)](i)[t(365)](16);o[t(268)]<2&&(o="0"+o),this.track[t(210)]+=o}}[Ro(345)](e){const t=Ro;this[t(233)][t(434)]=[new Uint8Array(e)]}[Ro(378)](e){const t=Ro;if(!e)return!1;let n=!1;switch(e[t(234)]()){case Uo[t(427)]:case Uo.NDR:n=!0;break;case Uo[t(379)]:!this[t(233)][t(434)]&&(this[t(345)](e.getPayload()),!this[t(175)][t(296)]&&this[t(233)][t(434)]&&this.track[t(382)]&&(this.remuxer[t(296)]=!0)),n=!0;break;case Uo[t(324)]:!this.track.sps&&(this[t(256)](e[t(203)]()),!this[t(175)][t(296)]&&this[t(233)].pps&&this[t(233)][t(382)]&&(this.remuxer[t(296)]=!0)),n=!0;break;case Uo[t(272)]:break;case Uo.SEI:n=!0}return n}}class Go{constructor(e){const t=Ro;this.listener={},this[t(234)]=""|e}on(e,t){const n=Ro;return!this[n(270)][e]&&(this.listener[e]=[]),this[n(270)][e].push(t),!0}off(e,t){const n=Ro;if(this[n(270)][e]){var r=this[n(270)][e].indexOf(t);return r>-1&&this[n(270)][e][n(369)](r,1),!0}return!1}[Ro(219)](){this.listener={}}[Ro(225)](e,t){const n=Ro;return!!this[n(270)][e]&&(this[n(270)][e].map(e=>{e[n(200)](null,[t])}),!0)}}class Ho{constructor(e){var t,n;const r=Ro;this[r(285)]=e,this.saiIvSize={video:"cenc"===(null==(t=e.config[r(415)])?void 0:t[r(201)])?16:0,audio:"cenc"===(null==(n=e[r(154)][r(407)])?void 0:n[r(201)])?16:0},Ho[r(212)]={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let d in Ho[r(212)])Ho.types[d]=[d[r(384)](0),d[r(384)](1),d[r(384)](2),d.charCodeAt(3)];const o=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ho.HDLR_TYPES={video:o,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Ho.STTS=Ho[r(377)]=Ho[r(213)]=a,Ho.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ho[r(438)]=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ho[r(307)]=new Uint8Array([0,0,0,0,0,0,0,0]),Ho[r(168)]=new Uint8Array([0,0,0,0,0,0,0,1]);const c=new Uint8Array([105,115,111,109]),u=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Ho[r(183)]=Ho[r(347)](Ho[r(212)].ftyp,c,l,c,u),Ho[r(147)]=Ho[r(347)](Ho.types.dinf,Ho[r(347)](Ho[r(212)][r(280)],s))}static box(e,...t){const n=Ro;let r,o=8,i=t.length,s=i;for(;i--;)t[i]&&(o+=t[i].byteLength);for(r=new Uint8Array(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(251)](e,4),i=0,o=8;i<s;++i)t[i]&&(r[n(251)](t[i],o),o+=t[i][n(413)]);return r}[Ro(190)](e){const t=Ro;return Ho[t(347)](Ho[t(212)][t(190)],Ho[t(418)][e])}[Ro(244)](e){const t=Ro;return Ho[t(347)](Ho[t(212)][t(244)],e)}[Ro(380)](e,t){const n=Ro;return Ho[n(347)](Ho[n(212)][n(380)],new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,85,196,0,0]))}[Ro(215)](e){const t=Ro;return Ho[t(347)](Ho[t(212)].mdia,this[t(380)](e[t(274)],e[t(290)]),this[t(190)](e[t(234)]),this[t(230)](e))}[Ro(443)](e){const t=Ro;return Ho.box(Ho[t(212)][t(443)],new Uint8Array([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]))}[Ro(230)](e){const t=Ro;return e[t(234)]===t(407)?Ho[t(347)](Ho[t(212)][t(230)],Ho.box(Ho.types[t(255)],Ho.SMHD),Ho[t(147)],this[t(362)](e)):Ho[t(347)](Ho.types[t(230)],Ho[t(147)],this[t(362)](e),Ho[t(347)](Ho[t(212)].vmhd,Ho[t(438)]))}[Ro(370)](e,t,n){const r=Ro;return Ho[r(347)](Ho.types.moof,this[r(443)](e),this[r(293)](n,t))}[Ro(295)](e,t,n){const r=Ro;let o=e[r(268)],i=[];for(;o--;)i[o]=this.trak(e[o]);return Ho.box[r(200)](null,[Ho[r(212)][r(295)],this[r(240)](n,t),this[r(447)](e)][r(389)](i)[r(389)](this[r(322)](e)))}[Ro(322)](e){const t=Ro;let n=e[t(268)],r=[];for(;n--;)r[n]=this[t(305)](e[n]);return Ho[t(347)][t(200)](null,[Ho[t(212)][t(322)]][t(389)](r))}[Ro(240)](e,t){const n=Ro;let r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ho[n(347)](Ho.types.mvhd,r)}[Ro(420)](e){const t=Ro;let n=e[t(428)]||[],r=new Uint8Array(4+n.length);for(let o=0;o<n[t(268)];o++){const e=n[o][t(375)];r[o+4]=e.dependsOn<<4|e[t(149)]<<2|e[t(422)]}return Ho[t(347)](Ho[t(212)][t(420)],r)}[Ro(362)](e){const t=Ro;return Ho[t(347)](Ho.types[t(362)],this[t(165)](e),Ho.box(Ho[t(212)][t(329)],Ho[t(421)]),Ho[t(347)](Ho.types[t(227)],Ho[t(377)]),Ho[t(347)](Ho.types[t(235)],Ho[t(218)]),Ho[t(347)](Ho[t(212)].stco,Ho[t(213)]))}[Ro(303)](e){const t=Ro;let n,r,o,i=[],s=[];for(n=0;n<e[t(382)].length;n++)r=e.sps[n],o=r[t(413)],i.push(o>>>8&255),i.push(255&o),i=i[t(389)](Array.prototype[t(314)][t(395)](r));for(n=0;n<e[t(434)][t(268)];n++)r=e[t(434)][n],o=r[t(413)],s[t(406)](o>>>8&255),s[t(406)](255&o),s=s.concat(Array.prototype[t(314)].call(r));const a=Ho[t(347)](Ho[t(212)][t(408)],new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps[t(268)]].concat(i)[t(389)]([e[t(434)][t(268)]]).concat(s))),c=e[t(237)],u=e[t(374)],l=Ho[t(347)](Ho.types[t(441)],Ho.box(Ho[t(212)][t(318)],new Uint8Array([97,118,99,49])),Ho[t(347)](Ho[t(212)][t(349)],new Uint8Array([0,0,0,0,...No(this[t(285)][t(154)][t(415)][t(201)]),0,1,0,0])),Ho.box(Ho.types[t(217)],this[t(298)](t(415))));return Ho[t(347)](Ho[t(212)].encv,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>>8&255,255&c,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),a,l)}[Ro(372)](e){const t=Ro;let n=e[t(154)][t(413)],r=new Uint8Array(26+n+3);return r[t(251)]([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5,n]),r[t(251)](e[t(154)],26),r.set([6,1,2],26+n),r}[Ro(403)](e){const t=Ro,n=e[t(354)];return Ho[t(347)](Ho[t(212)][t(403)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(390)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),Ho[t(347)](Ho[t(212)][t(372)],this[t(372)](e)))}[Ro(266)](e){const t=Ro,n=e[t(354)];return new Uint8Array([0,e[t(390)],1,56,0,0,n>>>8&255,255&n,0,0,0])}[Ro(416)](e){const t=Ro,n=e.audiosamplerate;return Ho[t(347)](Ho.types[t(416)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(390)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),Ho[t(347)](Ho[t(212)][t(266)],this[t(266)](e)))}[Ro(394)](e){const t=Ro,n=Ho[t(347)](Ho.types[t(266)],this.dOps(e)),r=Ho[t(347)](Ho.types[t(441)],Ho.box(Ho.types.frma,new Uint8Array([79,112,117,115])),Ho[t(347)](Ho.types.schm,new Uint8Array([0,0,0,0,...No(this[t(285)][t(154)].audio[t(201)]),0,1,0,0])),Ho.box(Ho.types[t(217)],this[t(298)](t(407)))),o=e[t(354)];return Ho[t(347)](Ho[t(212)].enca,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(390)],0,16,0,0,0,0,o>>>8&255,255&o,0,0]),n,r)}[Ro(165)](e){const t=Ro;return e[t(234)]===t(407)?Ho[t(347)](Ho[t(212)][t(165)],Ho[t(168)],e[t(199)]?this[t(394)](e):this[t(416)](e)):Ho[t(347)](Ho.types[t(165)],Ho[t(168)],this[t(303)](e))}[Ro(278)](e){const t=Ro,n=e.id,r=e[t(290)],o=e[t(237)],i=e[t(374)],s=e[t(388)];return Ho[t(347)](Ho[t(212)].tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,255&s,s%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>>8&255,255&o,0,0,i>>>8&255,255&i,0,0]))}[Ro(293)](e,t){var n;const r=Ro,o=e.id,i=e[r(428)][0][r(171)],s=e.samples[0][r(290)],a=e[r(428)][0].flags,c=Ho[r(347)](Ho[r(212)].tfhd,new Uint8Array([0,2,0,58,o>>>24,o>>>16&255,o>>>8&255,255&o,0,0,0,1,s>>>24,o>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i,0,a[r(264)],0,0])),u=Ho[r(347)](Ho[r(212)].tfdt,new Uint8Array([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]));if(e.encrypted){let t,o;if(e[r(234)]===r(415)?(t=!0,o=this[r(350)][r(415)]+(null==(n=e.samples[0][r(191)])?void 0:n.byteLength)):(t=!1,o=this[r(350)].audio),o>0){const n=this[r(242)](o),i=this[r(340)](e[r(428)],t),s=n[r(268)]+20+i[r(268)]+c[r(268)]+u[r(268)]+8+16+8+8,a=this[r(271)](e,s);return Ho[r(347)](Ho[r(212)][r(293)],c,u,a,n,this.saio(s-i[r(268)]+a.length+8),i)}{const t=this[r(340)](null,!1),n=t.length+c[r(268)]+u[r(268)]+8+16+8+8,o=this[r(271)](e,n);return Ho[r(347)](Ho.types[r(293)],c,u,o,t)}}return Ho.box(Ho[r(212)].traf,c,u,this.trun(e,c[r(268)]+u.length+8+16+8+8))}trak(e){const t=Ro;return e.duration=e[t(290)]||4294967295,Ho.box(Ho[t(212)].trak,this[t(278)](e),this[t(215)](e))}[Ro(305)](e){const t=Ro,n=e.id;return Ho[t(347)](Ho.types[t(305)],new Uint8Array([0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(e,t){const n=Ro;let r=(e[n(428)]||[])[n(268)],o=new Uint8Array(12);return t+=20,o.set([0,0,0,1,r>>>24,r>>>16&255,r>>>8&255,255&r,t>>>24,t>>>16&255,t>>>8&255,255&t],0),Ho[n(347)](Ho.types[n(271)],o)}[Ro(224)](e,t){const n=Ro,r=n(445),o=Bo(function(e){const t=Ro,n=[];return n[t(406)](e[3]),n[t(406)](e[2]),n.push(e[1]),n.push(e[0]),n[t(406)](e[5]),n[t(406)](e[4]),n.push(e[7]),n.push(e[6]),(e=Do(e))[t(251)](n,0),e}(e));return Do(function(e,t){const n=Ro,r=new Uint8Array(2*e[n(268)]),o=new DataView(r[n(366)]);for(let i=0;i<e[n(268)];++i){const r=e.charCodeAt(i);o[n(253)](2*i,r,t)}return r[n(366)]}([n(328)+r+'" version="4.3.0.0">',n(308),"<PROTECTINFO>",n(398),n(353),n(216)+o+'"',">",n(412),n(249),n(391),t?"<LA_URL>"+t+n(423):"",n(351),n(269)].join(""),!0))}pssh(e){const t=Ro;if(this[t(285)][t(383)][t(202)](t(178)))return Ho[t(347)](Ho.types[t(447)],new Uint8Array([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[t(285)][t(154)][e[0][t(234)]].keyId]));if(this[t(285)][t(383)]===t(356)){const n=this[t(224)](this[t(285)][t(154)][e[0][t(234)]][t(429)],this.drm[t(371)]),r=n[t(413)];return Ho[t(347)](Ho[t(212)][t(447)],new Uint8Array([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,r>>>24,r>>>16&255,r>>>8&255,255&r,...n]))}return this.drm[t(383)]===t(323)?Ho[t(347)](Ho[t(212)][t(447)],new Uint8Array([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm[t(154)][e[0].type].keyId,0,0,0,0])):this.drm[t(383)]===t(397)?null:void Ao[t(189)](t(393)+this[t(285)][t(383)])}[Ro(298)](e){const t=Ro;let n,r,o=this[t(285)][t(154)][e];return o[t(201)]===t(226)?(n=new Uint8Array([16,...o.iv]),r=25):(n=new Uint8Array([]),r=0),Ho[t(347)](Ho[t(212)][t(298)],new Uint8Array([1,0,0,0,0,r,1,this[t(350)][e],...o[t(429)],...n]))}[Ro(242)](e){const t=Ro;return Ho[t(347)](Ho[t(212)][t(242)],new Uint8Array([0,0,0,0,e,0,0,0,1]))}[Ro(204)](e){const t=Ro;return Ho[t(347)](Ho[t(212)][t(204)],new Uint8Array([0,0,0,0,0,0,0,1,e>>>24,e>>>16&255,e>>>8&255,255&e]))}[Ro(340)](e,t){const n=Ro;let r=null;return e&&(1!==e[n(268)]&&Ao[n(189)](n(182)+e[n(268)]+" samples - expected 1"),r=e[0][n(191)]),r&&r[n(413)]?Ho[n(347)](Ho[n(212)].senc,new Uint8Array([0,0,0,t?2:0,0,0,0,1,...r])):Ho.box(Ho[n(212)][n(340)],new Uint8Array([0,0,0,0,0,0,0,1]))}[Ro(439)](e,t,n){const r=Ro,o=this[r(295)](e,t,n);let i=new Uint8Array(Ho[r(183)].byteLength+o[r(413)]);return i[r(251)](Ho[r(183)]),i[r(251)](o,Ho[r(183)][r(413)]),i}}let Wo=1;class qo{constructor(){this.seq=1}static[Ro(411)](){return Wo++}[Ro(246)](){const e=Ro;this.mp4track[e(263)]=0,this[e(207)][e(428)]=[]}[Ro(211)](){const e=Ro;return!(!this[e(296)]||!this[e(428)][e(268)])}}class $o extends qo{constructor(e){const t=Ro;super(),this[t(296)]=!0,this[t(222)]=0,this.dts=0,this.mp4track={id:qo[t(411)](),type:t(407),channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:e,duration:e,samples:[],codec:t(364),encrypted:!0},this[t(428)]=[]}resetTrack(){const e=Ro;this[e(437)]=1,this[e(222)]=0,this[e(336)]=0}[Ro(181)](e,t,n){const r=Ro;if(e[r(268)]>0)for(let o=0;o<e.length;o++){let i=e[o],s=i[r(392)],a=s[r(413)];this.samples[r(406)]({units:s,size:a,duration:i.duration,sampleAuxInfo:t,timestamp:n}),this[r(207)][r(263)]+=a}}[Ro(161)](){const e=Ro;if(!this.samples)return null;let t,n=this[e(207)][e(428)];for(;this[e(428)][e(268)];){let r=this.samples[e(342)](),o=(1e3*r.timestamp|0)-this[e(222)]|0;o<5&&(o=5),this[e(336)]=this[e(222)],this.nextDts+=o,t={size:r[e(171)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:r[e(191)]};let i=new Uint8Array(r[e(171)]);return i[e(251)](r.units,0),n[e(406)](t),new Uint8Array(i[e(366)],0,r[e(171)])}return null}}class Qo extends qo{constructor(e,t){const n=Ro;super(),this[n(296)]=!1,this[n(222)]=0,this[n(336)]=0,this[n(361)]=t,this[n(207)]={id:qo[n(411)](),type:n(415),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:e,duration:e,samples:[],encrypted:!0},this[n(428)]=[],this[n(302)]=new zo(this)}[Ro(297)](){const e=Ro;this[e(437)]=1,this[e(296)]=!1,this[e(207)][e(382)]="",this.mp4track[e(434)]="",this.nextDts=0,this.dts=0}remux(e,t,n){const r=Ro;for(let o of e){let e=[],i=0;for(let t of o[r(392)])this[r(302)].parseNAL(t)&&(e[r(406)](t),i+=t[r(194)]());e[r(268)]>0&&this.readyToDecode&&(this[r(207)][r(263)]+=i,this[r(428)].push({units:e,size:i,keyFrame:o.keyFrame,duration:o[r(290)],sampleAuxInfo:t,timestamp:n}))}}[Ro(161)](){const e=Ro;if(!this[e(211)]()||!this[e(428)])return null;let t,n=this.mp4track[e(428)],r=this.samples[e(342)](),o=r.units,i=(1e3*r[e(332)]|0)-this[e(222)]|0;i<5&&(i=5),i>5e3&&Ao[e(381)](e(430)+(i/1e3|0)+" s"),this.dts=this[e(222)],this[e(222)]+=i,t={size:r.size,duration:i,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:r[e(148)]?0:1,dependsOn:r[e(148)]?2:1},sampleAuxInfo:r[e(191)]};let s=0;for(const u of o)s+=u[e(194)]();let a=0,c=new Uint8Array(s);for(const u of o)c[e(251)](u[e(341)](),a),a+=u[e(194)]();return n.push(t),new Uint8Array(c[e(366)],0,s)}}class Ko extends Go{constructor(e,t){const n=Ro;super(n(175)),this[n(260)]=!1,this.trackTypes=[],this[n(357)]={},this[n(274)]=1e3,this[n(163)]=0,this[n(361)]=e,this.mp4=t}[Ro(281)](e){const t=Ro;("video"===e||"both"===e)&&(this[t(357)][t(415)]=new Qo(this.timescale,this[t(361)]),this[t(335)][t(406)](t(415))),(e===t(407)||e===t(417))&&(this[t(357)][t(407)]=new $o(this.timescale),this.trackTypes[t(406)](t(407)))}[Ro(250)](){const e=Ro;for(let t of this[e(335)])this.tracks[t].resetTrack();this[e(260)]=!1}[Ro(262)](){const e=Ro;this.tracks={},this[e(219)]()}[Ro(246)](){const e=Ro;if(this[e(260)])for(let t of this[e(335)]){let n=this[e(357)][t];for(;;){let r=n[e(161)]();if(!r||!r.byteLength)break;let o={type:t,payload:Mo(this[e(164)][e(370)](n[e(437)]++,n[e(336)],n[e(207)]),this.mp4[e(244)](r)),dts:n[e(336)]};this[e(225)](e(366),o),n[e(246)]()}}else this[e(211)]()&&(this[e(225)]("ready"),this.initSegment(),this[e(260)]=!0,this[e(246)]())}[Ro(439)](){const e=Ro;for(let t of this[e(335)]){let n=this[e(357)][t],r={type:t,payload:this[e(164)][e(439)]([n[e(207)]],this[e(163)],this.timescale)};this[e(225)]("buffer",r)}}isReady(){const e=Ro;for(let t of this[e(335)])if(!this.tracks[t][e(296)]||!this[e(357)][t][e(428)][e(268)])return!1;return!0}[Ro(181)](e){const t=Ro;for(let n of this[t(335)]){let r=e[n];r.length>0&&this[t(357)][n][t(181)](r,"audio"===n?e.audioSampleAuxInfo:e[t(310)],e[t(332)])}this[t(246)]()}}function Xo(){const e=["stsd","isSupported","src","STSD","endMSE","abort","size","appendBufferError","addSourceBuffer","setupMSE","remuxer","addEventListener","max","com.widevine","readUEG"," - ","remux","Received ","FTYP","readyState","valid","ntype","readUInt","byteOffset","error","hdlr","sampleAuxInfo","webkitsourceopen","Checking codec","getSize","irrecoverableError","isfmb","[MSE] buffer error:","url","encrypted","apply","encryption","startsWith","getPayload","saio","open","[MSE] source buffer error","mp4track","append","getNri","codec","isReady","types","STCO","feed","mdia",'VALUE="',"schi","STSZ","offAll","jmuxer","skipEG","nextDts","1036611gAoRea","generatePlayReadyHeader","dispatch","cbcs","stsc","endOfStream","6576815frVeWy","minf","releaseBuffer","readUShort","track","type","stsz","isvcl","width","map","readBoolean","mvhd","onReady","saiz","reportDiscontinuity","mdat","bufferControllers","flush","patchSampleAuxinfo","readEG","</KIDS>","reset","set","onMSEClose","setUint16","idr","smhd","parseSPS","bind","message","getBits","initialized","sourceBuffer","destroy","len","isNonSync","warn","dOps","extractNALUs","length","</WRMHEADER>","listener","trun","AUD","SEI","timescale","Num frames in chunk: ","7620738FWzrwf","mode","tkhd","dbgMediaDump","dref","addTrack","doAppend","options","[MSE] sourceclose","drm","mediaSource","Failure: Browser doesn't support MSE/MMS",'/mp4; codecs="',"function","duration","min","avc1.","traf","[MSE] sourceopen","moov","readyToDecode","resetTrack","tenc","onMSEOpen","MediaSource","removeSourceBuffer","h264","encv","sourceopen","trex","isKeyframe","SMHD","<DATA>","stype","videoSampleAuxInfo","ended","getElementById","getUint8","slice","audioSampleAuxInfo","data","ready","frma","mseReady","string","4760043VatbTq","mvex","org.w3.clearkey","SPS","buffered","no video element were found to render, provide a valid video element","getPayloadSize",'<WRMHEADER xmlns="',"stts","start","[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","timestamp","skipScalingList","skipUEG","trackTypes","dts","queue","readBits","mseEnded","senc","getData","shift","[MSE] error: ","UNKNOWN","parsePPS","appendBuffer","box","initBrowser","schm","saiIvSize","</DATA>","out",'<KID ALGID="AESCTR" ',"audiosamplerate","reduce","com.microsoft.playready.recommendation","tracks","fromCharCode","updating","calculateExpectedSizeFromSai","videoElement","stbl","1159252OkMfWN","opus","toString","buffer","nalus","index","splice","moof","licenseUrl","esds","disableRemotePlayback","height","flags","createBuffer","STSC","parseNAL","PPS","mdhd","debug","sps","keySystem","charCodeAt","mse","parseHeader","isSafari","volume","concat","channelCount","</PROTECTINFO>","units","Unsupported DRM type ","enca","call","POSITIVE_INFINITY","com.apple.fps","<KIDS>","getVideoFrames","646233hEZDuD","4LuRDMh","nri","mp4a","ManagedMediaSource","buffer error","push","audio","avcC","onError","Buffered range ","getTrackID","</KID>","byteLength","No A/V data","video","Opus","both","HDLR_TYPES","readUByte","sdtp","STTS","hasRedundancy","</LA_URL>","revokeObjectURL","BYTES_PER_ELEMENT","webkitsourceclose","IDR","samples","keyId","timestamp gap: ","node","readSPS","setData","pps","onBuffer","remuxController","seq","VMHD","initSegment","ceil","sinf","sourceclose","mfhd","skipLZ","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","Browser does not support codec","pssh","mediasource is not available to end: ","NDR","isReset","bitsAvailable","payload","DINF","keyFrame","isDependedOn","isTypeSupported","assign","waitingForIdr","8hmeyto","config","skipBits","remove","bitLength","[H264Parser] IDR without SPS/PPS, not suitable for recovery","TYPES","13659xNePtU","getFramePayload","onBufferError","mediaDuration","mp4"];return(Xo=function(){return e})()}class Yo extends Go{constructor(e,t,n){var r;const o=Ro;super(o(366)),this[o(234)]=t,this[o(337)]=new Uint8Array;const i=null==(r=xo.mediaDumps[t])?void 0:r[o(352)].durationMs;i>0&&(this[o(279)]=new Po(t,o(164),i)),this.sourceBuffer=e,this[o(385)]=n,this[o(195)]=!1,this[o(261)].addEventListener(o(189),e=>{const t=o;Ao.warn(t(206),e,this.type),this[t(195)]=!0,this.dispatch("error",{type:this[t(234)],name:t(366),error:t(405)})})}[Ro(262)](){const e=Ro;this[e(337)]=null,this[e(279)]=null;try{this[e(261)]&&(this.sourceBuffer[e(170)](),this.mse[e(301)](this[e(261)]),this.sourceBuffer=null)}catch(t){}this.offAll()}[Ro(282)](){const e=Ro;if(this[e(337)][e(268)]&&this[e(261)]&&!this.sourceBuffer.updating){if(this[e(261)].buffered.length>1){for(let t=0;t<this[e(261)][e(325)][e(268)];++t){const n=t<this[e(261)].buffered.length-1;Ao[e(381)](e(410)+t+(n?" (remove)":"")+": "+this[e(261)][e(325)][e(330)](t)+e(180)+this[e(261)][e(325)].end(t)),n&&this[e(261)][e(156)](this[e(261)].buffered[e(330)](t),this[e(261)][e(325)].end(t))}if(this[e(261)][e(359)])return}try{this[e(261)][e(346)](this[e(337)]),this[e(337)]=new Uint8Array}catch(t){this[e(225)](e(189),{type:this.type,name:e(172),error:t})}}}[Ro(214)](e,t){const n=Ro;this.dbgMediaDump&&(this[n(279)][n(208)](e,t)||(this[n(279)]=null)),this[n(195)]||(this.queue=Mo(this.queue,e)),this[n(282)]()}}class Jo extends Go{static isSupported(e){const t=Ro;return window[t(404)]?window.ManagedMediaSource[t(150)](e):!!window[t(300)]&&window[t(300)][t(150)](e)}constructor(e){const t=Ro;super(t(220)),this[t(195)]=!1,this[t(152)]=!0,this[t(450)]=!1,this[t(319)]=!1,this.mseEnded=!1;let n={node:"",mode:t(415),debug:!1,onReady:function(){},onError:function(e){}};this.options=Object[t(151)]({},n,e),this[t(431)]=typeof this.options[t(431)]===t(320)?document[t(312)](this[t(283)][t(431)]):this[t(283)][t(431)],this[t(285)]=e.drm,this[t(164)]=new Ho(this[t(285)]),this[t(436)]=new Ko(this.node,this[t(164)]),this[t(436)][t(281)](this[t(283)][t(277)]),this[t(436)].on(t(366),this.onBuffer[t(257)](this)),this[t(436)].on(t(317),this[t(376)][t(257)](this)),this[t(348)]()}[Ro(348)](){const e=Ro;typeof this[e(283)][e(431)]===e(320)&&""==this.options[e(431)]&&Ao[e(189)](e(326)),this[e(319)]=!1,this[e(174)]()}[Ro(174)](){const e=Ro;if(!window.ManagedMediaSource&&!window[e(300)])throw e(287);window.ManagedMediaSource?(this.node[e(373)]=!0,this[e(286)]=new ManagedMediaSource):this[e(286)]=new MediaSource,this[e(198)]=URL.createObjectURL(this[e(286)]),this.node[e(167)]=this[e(198)],this[e(339)]=!1,this[e(286)][e(176)](e(304),this[e(299)][e(257)](this)),this.mediaSource.addEventListener(e(442),this[e(252)][e(257)](this)),this.mediaSource.addEventListener(e(192),this[e(299)][e(257)](this)),this[e(286)][e(176)](e(426),this[e(252)][e(257)](this)),this[e(286)][e(176)](e(189),(function(t){const n=e;Ao[n(189)](n(343),t[n(258)])}))}[Ro(169)](){const e=Ro;if(!this.mseEnded)try{this[e(339)]=!0,this[e(286)][e(184)]===e(205)&&this[e(286)][e(228)]()}catch(t){Ao[e(189)](e(448),t)}}[Ro(243)](){const e=Ro;Ao[e(381)]("Discontinuity!"),this[e(152)]=!0}feed(e){const t=Ro;let n={video:[],audio:[]};if(this[t(195)]||this[t(339)]||!e||!this.remuxController)return-1;if(e[t(415)]){n[t(332)]=e.timestamp;const r=this[t(360)](e[t(310)],this[t(164)][t(350)][t(415)]),o=r!=e.video[t(413)];let i=zo[t(267)](e[t(415)],o);if(!i[t(185)]||i[t(367)].length<1)return 0;if(this.waitingForIdr){if(!i[t(254)])return 0;this[t(152)]=!1}if(!Vo&&e[t(310)]){const n=i[t(367)][t(355)]((e,n)=>e+4+n[t(413)],0);n!==r&&this.patchSampleAuxinfo(e[t(310)],this[t(164)][t(350)][t(415)],n-r)}n[t(415)]=this[t(399)](i[t(367)]),n[t(310)]=e[t(310)]}return e[t(407)]&&(n[t(332)]=e.timestamp,n[t(407)]=[{units:e[t(407)]}],n[t(315)]=e[t(315)]),e[t(415)]||e[t(407)]?(this[t(436)][t(181)](n),0):(Ao[t(189)](t(414)),0)}[Ro(399)](e){const t=Ro;let n=[],r=[],o=!1,i=!1;for(let s of e){let e=new Uo(s);e[t(234)]()!==Uo[t(427)]&&e[t(234)]()!==Uo[t(449)]||zo[t(386)](e),n.length&&i&&(e[t(196)]||!e[t(236)])&&(r[t(406)]({units:n,keyFrame:o}),n=[],o=!1,i=!1),n.push(e),o=o||e.isKeyframe(),i=i||e[t(236)]}if(n[t(268)])if(i)r.push({units:n,keyFrame:o});else{let e=r[t(268)]-1;e>=0&&(r[e][t(392)]=r[e][t(392)].concat(n))}return 1!==r[t(268)]&&Ao.warn(t(275)+r[t(268)]),r}[Ro(360)](e,t){if(!e)return 0;const n=(e[0]<<8)+e[1],r=t+2+4;let o=0,i=2;for(;0<n&&i+r<=e.byteLength;){i+=t;const n=(e[i]<<8)+e[i+1],r=(e[i+2]<<24)+(e[i+3]<<16)+(e[i+4]<<8)+e[i+5];i+=6,o+=n+r}return o}[Ro(247)](e,t,n){let r=2;if(0<(e[0]<<8)+e[1]&&r+(t+2+4)<=e.byteLength){r+=t;let o=(e[r]<<8)+e[r+1];o+=n,o>=0&&(e[r]=o>>>8&255,e[r+1]=255&o)}return 0}[Ro(376)](){const e=Ro;if(this[e(319)]&&this[e(436)]&&this[e(436)][e(211)]()&&!this[e(245)]){this[e(245)]={};for(let t in this[e(436)][e(357)]){let n=this.remuxController[e(357)][t];const r=""[e(389)](t,e(288)).concat(n.mp4track[e(210)],'"');if(Ao[e(381)](e(193),r),!Jo[e(166)](r))return Ao.error(e(446)),!1;let o=this.mediaSource[e(173)](r);this[e(245)][t]=new Yo(o,t,this[e(286)]),this[e(245)][t].on(e(189),this[e(162)][e(257)](this))}}}[Ro(231)](){const e=Ro;for(let t in this.bufferControllers)this[e(245)][t][e(282)]()}[Ro(435)](e){const t=Ro;this[t(319)]&&this[t(245)]&&this[t(245)][e[t(234)]]&&this[t(245)][e[t(234)]].feed(e[t(452)],e[t(336)])}onMSEOpen(){const e=Ro;Ao[e(381)](e(294)),this[e(286)].readyState!==e(311)&&(this[e(286)][e(290)]=Number[e(396)],this[e(319)]=!0,typeof this[e(283)].onReady===e(289)&&this[e(283)][e(241)][e(395)](null,this.isReset),URL[e(424)](this[e(198)]),this[e(376)]())}[Ro(252)](){const e=Ro;Ao[e(381)](e(284)),this.mseReady=!1,this[e(169)]()}onBufferError(e){const t=Ro;Ao.warn(t(197),e),this[t(195)]=!0,this.endMSE(),typeof this.options[t(409)]===t(289)&&this[t(283)][t(409)][t(395)](null,e)}}function Zo(e,t){const n=ei();return(Zo=function(e,t){return n[e-=182]})(e,t)}function ei(){const e=["1247170HwkwNv","__dev_time__","gitVersion","352GaBvIm","toISOString","14XlATBT","2568948xDjIMf","1027225mjPCDe","19691yiLZrh","195999uPnZlk","3038288UlnUQm","2033937CLMUfn"];return(ei=function(){return e})()}(function(){const e=Zo,t=ei();for(;;)try{if(parseInt(e(182))/1+parseInt(e(192))/2*(parseInt(e(184))/3)+-parseInt(e(185))/4+-parseInt(e(187))/5+parseInt(e(193))/6+-parseInt(e(183))/7*(parseInt(e(190))/8)+-parseInt(e(186))/9===553943)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const ti=si;function ni(){const e=["1236858jPUtaw","certificate","11225xsjioT","275391VrsSlK","5816evMpkd","CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8","7299lkgbxa","1470Lkqtku","production","Development","charCodeAt","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","baseUrl","375060LzZhzk","230861ZKueQt","12pvGCSu","https://lic.drmtoday.com","35fxICRY","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","Production","development","https://lic.test.drmtoday.com","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","from","RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Staging","staging","name"];return(ni=function(){return e})()}(function(){const e=si,t=ni();for(;;)try{if(parseInt(e(326))/1+parseInt(e(325))/2+parseInt(e(315))/3+parseInt(e(327))/4*(-parseInt(e(314))/5)+-parseInt(e(312))/6+parseInt(e(329))/7*(parseInt(e(316))/8)+-parseInt(e(318))/9*(parseInt(e(319))/10)===181728)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const ri=ti(317)+ti(306)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+ti(330)+"+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT"+ti(334)+ti(323)+ti(308)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/"+ti(307)+ti(304)+ti(336)+ti(305),oi=Uint8Array[ti(335)](window.atob(ri),e=>e[ti(322)](0));class ii{constructor(e){this[ti(311)]=e}toString(){return this.name}[ti(324)](){const e=ti;switch(this[e(311)]){case"staging":return"https://lic.staging.drmtoday.com";case"development":return e(333);default:return e(328)}}[ti(313)](){return oi}}function si(e,t){const n=ni();return(si=function(e,t){return n[e-=304]})(e,t)}ii[ti(309)]=new ii(ti(310)),ii[ti(331)]=new ii(ti(320)),ii[ti(321)]=new ii(ti(332));const ai=ci;function ci(e,t){const n=ui();return(ci=function(e,t){return n[e-=252]})(e,t)}function ui(){const e=["SampleAuxInfo corrupted","error","50012RXzLep","3301necisu","[RTC-DRM]","subarray","buffer","64zGPhLV","162pDdDkb","659466dfDPqj","SampleAuxInfo corrupted (postfix not found)","data","4199670WddvRf","95WaGAXy","getUint8","137436hbCkvG","1351035XuhSnW","getUint16","byteLength","184863QcuifQ"];return(ui=function(){return e})()}(function(){const e=ci,t=ui();for(;;)try{if(-parseInt(e(253))/1*(parseInt(e(258))/2)+parseInt(e(259))/3+parseInt(e(252))/4*(-parseInt(e(263))/5)+-parseInt(e(265))/6+-parseInt(e(269))/7*(-parseInt(e(257))/8)+-parseInt(e(266))/9+parseInt(e(262))/10===173102)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const li=Io(ai(254));(function(){const e=fi,t=mi();for(;;)try{if(parseInt(e(369))/1+parseInt(e(374))/2+parseInt(e(366))/3+-parseInt(e(373))/4+-parseInt(e(365))/5+-parseInt(e(368))/6*(parseInt(e(370))/7)+parseInt(e(367))/8===110661)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const di=[];function fi(e,t){const n=mi();return(fi=function(e,t){return n[e-=365]})(e,t)}let pi=null,hi=0;function mi(){const e=["799144UpkRWz","356926NfeJZx","set","slice","237700RBIjTO","627444ELwjUL","76968OxbdcX","6xPMWky","172231EpHRtx","1480332fEizHX","push","buffer"];return(mi=function(){return e})()}function vi(e){return!pi&&function(){const e=fi;pi=new Uint8Array([0,0,0,1,65,154,255,255])[e(372)],di[e(371)](new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[e(372)]),di[e(371)](di[0][e(376)](0)),new Uint8Array(di[1])[e(375)]([16,0,50],27)}(),e?pi:(hi^=1,di[hi])}const gi=_i;(function(){const e=_i,t=ki();for(;;)try{if(-parseInt(e(452))/1+-parseInt(e(412))/2+-parseInt(e(478))/3*(parseInt(e(441))/4)+-parseInt(e(485))/5*(-parseInt(e(415))/6)+-parseInt(e(400))/7+parseInt(e(460))/8*(-parseInt(e(486))/9)+-parseInt(e(437))/10*(-parseInt(e(470))/11)===412983)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const bi=Io(gi(424));let yi={licenseUrl:"",onFetch:void 0};const wi={},Si=(e,t,n)=>{const r=gi,o=Uint8Array.BYTES_PER_ELEMENT;t*=o,n*=o;const i=(c=e)instanceof ArrayBuffer?c:c[gi(484)],s=e[r(483)],a=t;var c;let u=Math[r(432)](0,Math.min(a,s)),l=Math.min(u+Math[r(432)](n,0),s);return u/=o,l/=o,new Uint8Array(i,u,l-u)},Ei=(e,t=0,n=1/0)=>Si(e,t,n);function Ci(e,t,n=!1){const r=gi;if(!e)return"";let o=e;if(!n&&o[r(483)]%2!=0)throw bi[r(393)](r(448)),new Error("Data does not seem to be UTF-16 encoded!");const i=Ei(o);let s;if((255===i[0]&&254===i[1]||254===i[0]&&255===i[1])&&(o=i[r(407)](2)),o instanceof ArrayBuffer)s=o;else{const e=new Uint8Array(o[r(483)]);e[r(396)](Ei(o)),s=e[r(484)]}const a=Math[r(447)](o[r(483)]/2),c=new Uint16Array(a),u=new DataView(s);for(let l=0;l<a;l++)c[l]=u[r(398)](2*l,t);return function(e){const t=gi;let n="";for(let r=0;r<e[t(433)];r+=16e3){const o=e.subarray(r,r+16e3);n+=String[t(408)][t(467)](null,o)}return n}(c)}const Oi=e=>{const t=gi;let n="";for(const r of e){let e=r.toString(16);1==e[t(433)]&&(e="0"+e),n+=e}return n};function ki(){const e=["360308tFqTFd","usable for decryption (status: ","oct","decode","parse","license","parseFromString","message","8pQccIM","No clear key test key provided!","generateRequest","text/xml","Failed to update the session: ","output-downscaled","target","apply","bind","Failed to update the session","24280927IKsRHd","No PR challenge data!","kids","status","getElementsByTagName","rtcdrmerror","CK license request:","A128KW","3KcCnPp","createSession","License acquisition failed with error ","No media keys for media element!","stringify","byteLength","buffer","82765KyOCry","7206525fRtYVA","error","btoa","9a04f07998404286ab92e65be0885f95","set","[PR] License fetched:","getUint16","onFetch","4630892EspqDe","addEventListener","debug","has","json","Previous lic will be reused","internal-error","subarray","fromCharCode","expired","text","temporary","665922eWbQGg","then","[FPS] License fetched:","174puebov","Content-Type","update","POST","<Challenge","nodeValue","replace","sessionId","initData","[CDM]","[WV] License fetched:","No media element available!","CDM error generating license request: ","Failed to load previous EME session","initDataType","keyStatuses","forEach","max","length","indexOf","New lic will be requested","edef8ba979d64acea3c827dcd51d21ed","10DoxNsv","atob","catch","arrayBuffer","475444JqsldJ","No init data available!","append","warn","licenseUrl","dispatchEvent","floor","Data has an incorrect length, must be even.","EME createSession() failed - no DRM available","keystatuseschange","Failed to reuse previous EME session: "];return(ki=function(){return e})()}let Ii=null;const xi=e=>{const t=gi;return window[t(394)](String[t(408)][t(467)](null,e))[t(421)](/\+/g,"-")[t(421)](/\//g,"_")[t(421)](/=*$/,"")},Ti=(e,t)=>{const n=gi,r=(e=>{const t=gi,n=JSON[t(456)]((new TextDecoder)[t(455)](e));if(bi[t(402)](t(476),n),null===Ii)throw new Error(t(461));const r=[];for(const o of n[t(472)]){const e={kty:t(454),alg:t(477),kid:o,k:xi(Ii)};r.push(e)}return(new TextEncoder).encode(JSON[t(482)]({keys:r}))})(t.message);t.target.update(r)[n(439)]((function(e){const t=n;bi[t(393)](t(469),e)}))},ji=e=>{const t=gi,n=window[t(438)](e.replace(/-/g,"+")[t(421)](/_/g,"/")),r=new Uint8Array(n[t(433)]);for(let o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r},Pi=(e,t,...n)=>co(void 0,[e,t,...n],void 0,(function*(e,t,n=!1){const r=gi,o=new Headers(wi);n&&o[r(443)](r(416),r(463));const i={method:r(418),headers:o,body:t},s=yield yi[r(399)]?yi.onFetch(e,i):fetch(e,i);if(!s.ok)throw new Error(r(480)+s[r(473)]);return s})),Ri=(e,t)=>{const n=gi;Pi(yi[n(445)],t[n(459)])[n(413)](e=>e[n(404)]()).then(e=>{const r=n;bi[r(402)](r(425),e[r(457)]);const o=ji(e[r(457)])[r(484)];t[r(466)][r(417)](o)[r(439)](e=>{const t=r;bi[t(393)](t(469),e)})})[n(439)](t=>{const r=n;e[r(446)](new CustomEvent(r(475),{detail:{message:""+t}})),bi[r(393)](t)})},Ai=(e,t)=>{const n=gi,r=((e,t)=>{const n=gi,r=new DOMParser;try{const e=Ci(t,!0);if(e[n(434)](n(419))>-1){const t=r[n(458)](e,n(463))[n(474)]("Challenge")[0].childNodes[0][n(420)];if(null===t)throw new Error(n(471));return ji(t)}bi[n(444)]("[PR] Challenge node not found")}catch(o){e[n(446)](new CustomEvent(n(475),{detail:{message:""+o}})),bi[n(393)](o)}return null})(e,t.message);if(null===r)return e[n(446)](new CustomEvent("rtcdrmerror",{detail:{message:n(471)}})),void bi[n(393)](n(471));Pi(yi[n(445)],r[n(484)],!0)[n(413)](e=>e[n(440)]())[n(413)](r=>{const o=n;bi[o(402)](o(397),r),t[o(466)][o(417)](r)[o(439)]((function(t){const n=o;e[n(446)](new CustomEvent(n(475),{detail:{message:n(464)+t}})),bi[n(393)]("Failed to update the session",t)}))}).catch(t=>{const r=n;e.dispatchEvent(new CustomEvent(r(475),{detail:{message:""+t}})),bi[r(393)](t)})},Vi=(e,t)=>{const n=gi;Pi(yi.licenseUrl,t[n(459)])[n(413)](e=>{const t=n,r=e[t(410)]();return bi[t(402)](t(414),e,r),r})[n(413)](e=>{const r=n;t.target[r(417)](ji(e))})[n(439)](t=>{const r=n;e[r(446)](new CustomEvent(r(475),{detail:{message:""+t}})),bi.error(t)})},Mi=(e,t)=>{wi[e]=t},Li=Eo.isSafari;function _i(e,t){const n=ki();return(_i=function(e,t){return n[e-=393]})(e,t)}let Di=!Li;const Ni=new Map;function Bi(e){return co(this,void 0,void 0,(function*(){const t=_i;if(null===e.initData)throw new Error(t(442));const n=e[t(466)];if(null===n)throw new Error(t(426));const r=n.mediaKeys;if(null===r)throw new Error(t(481));const o=Oi(new Uint8Array(e[t(423)])),i=o+n.id;let s=null;Ni[t(403)](i)&&(s=Ni.get(i),null!=s&&s.close(),Ni.delete(i)),bi[t(402)](t(s?405:435));let a=null;try{a=r.createSession(Di?"persistent-license":"temporary")}catch(c){bi[t(402)]("EME createSession(persistent) failed:",c)}if(!a&&Di){Di=!1;try{a=r[t(479)](t(411))}catch(c){bi.error("EME createSession(temporary) failed:",c)}}if(a)if(a.addEventListener(t(450),e=>{const r=t;e[r(466)][r(430)][r(431)]((e,t)=>{const o=r;(e===o(409)||"output-restricted"===e||e===o(465)||e===o(406))&&n[o(446)](new CustomEvent(o(475),{detail:{message:"Key "+Oi(new Uint8Array(t))+" is not "+(o(453)+e)+")",keyId:t}}))})}),Li?a[t(401)](t(459),Vi.bind(null,n),!1):-1!==o.indexOf(t(436))?a[t(401)](t(459),Ri[t(468)](null,n),!1):-1!==o[t(434)](t(395))?a.addEventListener(t(459),Ai[t(468)](null,n),!1):a.addEventListener(t(459),Ti[t(468)](null,n),!1),s)try{(yield a.load(s[t(422)]))?Ni[t(396)](i,a):n[t(446)](new CustomEvent(t(475),{detail:{message:t(428)}}))}catch(c){n[t(446)](new CustomEvent(t(475),{detail:{message:t(451)+c}}))}else a[t(462)](e[t(429)],e[t(423)])[t(413)](()=>{Di&&Ni[t(396)](i,a)})[t(439)](e=>{const r=t;n.dispatchEvent(new CustomEvent(r(475),{detail:{message:r(427)+e}}))});else n[t(446)](new CustomEvent(t(475),{detail:{message:t(449)}}))}))}const Ui=us;(function(){const e=us,t=ss();for(;;)try{if(-parseInt(e(462))/1*(-parseInt(e(532))/2)+-parseInt(e(543))/3+parseInt(e(682))/4+-parseInt(e(692))/5*(parseInt(e(588))/6)+-parseInt(e(539))/7+parseInt(e(496))/8+-parseInt(e(549))/9===672532)break;t.push(t.shift())}catch(n){t.push(t.shift())}})();const Fi=Io(Ui(673)),zi=Eo[Ui(607)],Gi=Eo[Ui(540)],Hi=Eo[Ui(647)],Wi=Eo[Ui(489)],qi=Eo[Ui(478)],$i=Eo.platform,Qi=Eo[Ui(620)],Ki=Wi||qi&&$i===Ui(578),Xi=1e6*(Gi?82:Hi?220:120),Yi=Gi?5e3:2e3,Ji=Gi?1.5:.5;function Zi(e){const t=Ui;return typeof e!==t(672)||null===e||e instanceof Element||e instanceof ii?e:(null==(n=e)?void 0:n[Ui(584)])instanceof ArrayBuffer&&null!=n&&n.BYTES_PER_ELEMENT?e[t(550)]():Array[t(636)](e)?e.reduce((e,t,n)=>(e[n]=Zi(t),e),[]):e instanceof Object?Object.keys(e).reduce((t,n)=>(t[n]=Zi(e[n]),t),{}):e;var n}class es{constructor(e){const t=Ui;this[t(547)]="",this[t(471)]="",this.keySystem="",this[t(603)]=[],this[t(479)]=Zi(e),this.jmuxer=null,this.keyFrameLogCntr=0,this[t(561)]=Date[t(658)](),this[t(585)]=0,this[t(602)]=0,this[t(490)]=-1,this[t(680)]=0,this[t(596)]=0,this[t(491)]=!0,this.keyFrameNeededPosted=!1,this[t(617)]=Yi,this[t(500)]=null,this.dbgMediaDump={video:null,audio:null}}}const ts=new Map,ns=new Uint8Array([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),rs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),os=new Uint8Array([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function is(e,t){const n=Ui;void 0!==t&&(e[n(479)].mediaBufferMs=t),(void 0===e[n(479)][n(571)]||e.config[n(571)]<0)&&(e[n(479)].mediaBufferMs=100,Gi?e[n(479)][n(571)]=350:!Hi&&Qi&&("PlayReady"===e.config[n(601)]||e[n(482)])&&(e.config[n(571)]=1400))}function ss(){const e=["isSafari","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","status","DRM config:","key","Development"," will be used","Staging","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","enabled","playback at ","now",".experiment","seq","videoElement","data","btoa","PlayReady might not support '","logLevel","cbcs-1-9","encryption"," to ","offset","x-dt-custom-data","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","object","[RTC-DRM]","not-allowed","durationMs","Default transform mode enabled, ","keySystem","timestamp","DRM config keyId must be an instance of 16-byte long Uint8Array.","lastKeyFrameTime","H264 is the only supported video codec.","2533916KeNZJm","out","Applying pre-configured certificate (","buffered","Widevine","x-dt-auth-token"," ms)","com.microsoft.playready.recommendation","error","currentTime","225RwtgWL","end","requestMediaKeySystemAccess","50705YjLCIv","onmessage","environment","wvLicenseUrl","a1d1f1"," requesting a new key frame (latency ","userId","ClearKey","createEncodedStreams","licenseUrl","PlayReady license acquisition might fail without output protection enabled (sessionId is ","feed","dbgMediaDump","jmuxer","MSE (re)init",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","isChrome","config","forEach","Invalid config argument type, DRM config must be an object.","hwSecurity","audioEncrypted","setMediaKeys","fpsCertificate","Unable to create Worker!","GET","customTransform","isEdge","prevSeqNum","keyFrameNeeded","encrypted","targetLatency not set!","opus","FairPlay","7963992IJNztq","streamType","SampleAuxInfo extraction failed (video)"," seeking from ","worker","]: ","video","kind","audio","jitterBufferDelayHint","size","No target media element!","fpsCertificateUrl","wvCertificate","delimited","3000","pipeThrough","/license-server-fairplay/cert/","string",") not found in [","indexOf","warn","ignoreAudio","append","jitterBufferTarget","prLicenseUrl","sessionTypes","authToken","get","RTCRtpScriptTransform","audioElement","catch","trim","join","waitingForIdr","info","52hXHKkY","enqueue","). It has to be a string containing a JWT.","playbackRate","sai","persistent-license","Blob","2699340CvuQCI","isFirefox","transform",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"554109usxuWq"," will not be created, use rtcDrmFeedFrame to push frames manually","bind","streams","serverCertificateUrl","includes","3473577nNrBJc","slice","URL","serverCertificate","length","Invalid authToken type (","addEventListener","', it's safer to use 'cbcs' instead.","srcObject","ClearKey is not supported by Safari.","meNeeded=$.data};","value","nextKeyFrameAllowedTime","Error recovery attempted","rtcdrmerror","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer"," bytes","both","debug","No valid DRM config found, call rtcDrmConfigure first.","dispatchEvent","certificate","mediaBufferMs","clear","merchant","src","sessionId","reportDiscontinuity","mediaBufferMs should be an integer.","Android","rtcDrmConfigure did not specify audioElement, audio will be dropped","/license-proxy-widevine/cenc/","arrayBuffer","). Edge only supports PlayReady, Widevine and ClearKey.","). Chrome only supports Widevine and ClearKey.","buffer","videoStartTimestamp",'audio/mp4; codecs="opus"',"set","175800AyhMKK","PlayReady","SampleAuxInfo extraction failed (audio)","cenc","codec","videoCapabilities",".. ","Duplicate/reordered frame, prev seq: ","bytesSinceKey","wvCertificateUrl","/license-proxy-headerauth/drmtoday/RightsManager.asmx","robustness","baseUrl","type","audioStartTimestamp","emeConfig","com.widevine.alpha","SW_SECURE_CRYPTO","fpsLicenseUrl","supportsRtpScriptTransform","Target video element (","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr","createObjectURL","playoutDelayHint","POSITIVE_INFINITY",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"track",'video/mp4; codecs="avc1.640032"',"cbcs","keyFrameRequestInterval","Frame gap: ","keyFrameNeededPosted","isWindows","HW_SECURE_ALL"," bytes, ","GOP is getting too long, requesting a new key frame","temporary","Safari does not support Opus, audio will not be rendered.","stringify","byteLength","message"," frame","H264","mediaDumps","h264","keyFrameLogCntr","requestMediaKeySystemAccess(","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","isArray","Invalid DRM type (","DRM config iv must be an instance of 16-byte long Uint8Array.","keyId","pipeTo"," - ","receiver","isInteger","toString","onFetch","next"];return(ss=function(){return e})()}function as(e){const t=Ui;let n=!1;if((e[t(479)][t(502)]&&e[t(479)].video[t(667)]!==t(572)&&"HW"===e[t(479)][t(502)][t(599)]||e[t(479)][t(504)]&&e[t(479)][t(504)][t(667)]!==t(572)&&"HW"===e.config[t(504)][t(599)])&&(n=!0),e.hwSecurity=n,is(e,e[t(479)][t(571)]),void 0===e.config[t(523)]){void 0===e[t(479)][t(468)]&&(e[t(479)][t(468)]="purchase"),void 0===e[t(479)][t(575)]&&(e.config[t(575)]=t(466));const n=window[t(663)](JSON[t(626)]({userId:e[t(479)].userId,sessionId:e.config.sessionId,merchant:e[t(479)].merchant}));Mi(t(670),n)}else Mi(t(687),e[t(479)][t(523)]);for(const i of[e[t(479)][t(504)],e[t(479)][t(502)]])i&&i.encryption!==t(572)&&(i.keyId||(i[t(639)]=rs),i.iv||(i.iv=os));e[t(552)]=void 0,e[t(547)]="",e[t(471)]="";const r=e[t(479)][t(464)][t(600)]();var o;if(e[t(479)].type===t(469)?(e[t(677)]="org.w3.clearkey",Ii=ns):e[t(479)][t(601)]===t(686)?(e[t(677)]=t(604),Qi&&n&&(e[t(677)]+=t(659)),e[t(479)][t(509)]?e[t(552)]=e[t(479)][t(509)]:e[t(479)][t(597)]?e[t(547)]=e.config[t(597)]:e[t(552)]=e.config[t(464)][t(570)](),e[t(479)].wvLicenseUrl?e[t(471)]=e.config[t(465)]:e[t(471)]=r+t(580)):e[t(479)][t(601)]===t(589)?(e.keySystem=t(689),e[t(479)][t(521)]?e[t(471)]=e[t(479)][t(521)]:e[t(471)]=r+t(598)):e.config[t(601)]===t(495)&&(e.keySystem="com.apple.fps",e[t(479)][t(485)]?e[t(552)]=e[t(479)][t(485)]:e[t(479)][t(508)]?e[t(547)]=e.config.fpsCertificateUrl:e[t(547)]=r+t(513)+e[t(479)][t(573)],e[t(479)].fpsLicenseUrl?e[t(471)]=e.config[t(606)]:e[t(471)]=r+"/license-server-fairplay/"),o={licenseUrl:e[t(471)],onFetch:e[t(479)][t(645)]},yi=o,e[t(603)]=[],e[t(479)][t(601)]!==t(495)){e[t(603)].push({initDataTypes:[t(591)],sessionTypes:[t(537),t(624)]});for(const n of[e[t(479)][t(502)],e.config[t(504)]])if(n&&n[t(667)]!==t(572)){const r=n==e.config[t(502)]?t(502):t(504);let o;"Widevine"===e.config[t(601)]?o="HW"===n[t(599)]?t(621):t(605):"PlayReady"===e.config[t(601)]&&(o="HW"===n[t(599)]?t(511):"2000"),"video"===r?e[t(603)][0][t(593)]=[{contentType:t(615),encryptionScheme:n[t(667)]===t(591)?t(591):"cbcs-1-9",robustness:o||void 0}]:e[t(603)][0].audioCapabilities=[{contentType:t(586),encryptionScheme:n[t(667)]===t(591)?t(591):t(666),robustness:o||void 0}]}}else e.emeConfig=[{initDataTypes:["sinf"],videoCapabilities:[{contentType:"video/mp4",robustness:""}],distinctiveIdentifier:t(674),persistentState:"not-allowed",sessionTypes:[t(624)]}];Fi[t(567)](t(650),e)}function cs(e){const t=Ui;Fi[t(567)](t(476));let n=e[t(479)][t(661)];(!e[t(479)][t(502)]||e[t(479)][t(502)][t(667)]===t(572))&&(n=e.config.audioElement),e[t(475)]=null;const r=!e[t(518)]&&e[t(479)].audio&&e[t(479)][t(504)][t(667)]!==t(572),o=e[t(479)][t(502)]&&e[t(479)].video.encryption!==t(572);e[t(596)]=0,e.keyFrameNeeded=!0,e[t(619)]=!1,e[t(617)]=Yi,e[t(585)]=0,e[t(602)]=0,e[t(490)]=-1,e[t(680)]=0,e[t(475)]=new Jo({node:n,mode:t(r?o?566:504:502),fps:60,drm:e}),Hi&&e[t(479)][t(661)]&&e.config.videoElement.play().then(()=>{})[t(527)](()=>{})}function us(e,t){const n=ss();return(us=function(e,t){return n[e-=461]})(e,t)}function ls(e,t){const n=Ui;0===e.videoStartTimestamp&&(e.videoStartTimestamp=t.timestamp,e[n(617)]=Yi,e[n(561)]=Date.now()+2e3);let r=null,o=!1;if(t[n(662)][n(627)]<=4)Fi[n(517)]("Discarding corrupted video frame (too small)"),o=!0;else{const i=new Uint8Array(t[n(662)],0,4);0!=i[0]||0!=i[1]||0!=i[2]||1!=i[3]?(Fi.warn("Discarding corrupted video frame (no Annex B startcode)"),o=!0):(r=function(e,t){const n=ai,r=new DataView(e.data),o=e.data[n(268)]-2,i=r[n(267)](o);if(i<o){let e=o-i;if(69!==r[n(264)](o-1))return li[n(271)](n(260)),null;if(r[n(264)](e++)>>>4!==1)return li[n(271)]("Unsupported SampleAuxInfo version"),null;const s=new Uint8Array(i-2);let a=0,c=0;for(;e<o-1;){let t=r[n(264)](e++);c>1&&3===t&&(c=0,t=r.getUint8(e++)),0!==t?c=0:++c,s[a++]=t}const u=new DataView(s[n(256)]),l="cenc"===t?16:0,d=l+2+6*u[n(267)](l);return d+2>a?(li[n(271)](n(270)),null):{sai:s[n(255)](0,d),offset:o-i,seq:u[n(267)](d)}}return null}(t,e.config[n(502)][n(667)]),!r&&(Fi.warn(n(498)),o=!0))}if(r)if(t[n(601)]===n(651))e[n(490)]=r.seq;else{if(-1===e[n(490)])return 0;{let i=r[n(660)]-e[n(490)];if(i<-32767&&(i+=65536),i<=0)return Fi.debug(n(595)+e.prevSeqNum+", curr: "+r.seq),0;i>1&&(o=t[n(601)]!==n(651),Fi[n(517)](n(618)+e[n(490)]+n(641)+r[n(660)]+", restart required: "+o)),e.prevSeqNum=r[n(660)]}}let i=0;o&&!e[n(475)][n(530)]&&(i=-1,e[n(475)][n(576)]());const s=(t[n(678)]-e[n(585)])/9e4;return r&&e[n(475)][n(473)]({video:new Uint8Array(t[n(662)],0,r.offset),videoSampleAuxInfo:r[n(536)],timestamp:s})<0&&(i=-1,Fi[n(517)](n(562)),cs(e)),i>=0&&t[n(601)]===n(651)&&(e[n(680)]=s),i}function ds(e){const t=Ui,n=e[t(479)][t(661)];if(!n||n[t(685)][t(553)]<1||n.paused||n[t(691)]<Ji)return;const r=e[t(479)][t(571)];if(void 0===r||r<0)throw new Error(t(493));const o=n[t(685)].end(n.buffered[t(553)]-1),i=1e3*(o-n[t(691)])|0;if(!e[t(483)]&&function(e,t,n){const r=Ui;let o;o=t<3*n>>>2?.875:t<=n?1:t<7*n>>>2?1.125:t<9*n>>>2?1.25:t<11*n>>>2?1.375:1.5,o!==e.playbackRate&&(e[r(535)]=o)}(n,i,r),!(i<r+50||i<5*r>>>2))if(e[t(680)]>n[t(691)]+.1){const i=1e3*(o-e.lastKeyFrameTime)|0;i>40&&i>r-100?(Fi.debug(To()+t(499)+(n[t(691)]+t(668)+e.lastKeyFrameTime+" (")+(e[t(680)]-n[t(691)])+")"),n[t(691)]=e[t(680)]):Fi[t(567)](To()+" too close to seek, "+i)}else!e.keyFrameNeeded&&Date[t(658)]()>e[t(561)]&&i>r+100&&i>3*r>>>1&&(Fi[t(567)](To()+t(467)+i+t(688)),e[t(491)]=!0,e[t(617)]<16e3&&(e[t(617)]<<=1))}function fs(e,t){const n=Ui;var r;if(!e[n(475)]||e[n(518)])return 0;0===e[n(602)]&&(e.audioStartTimestamp=t[n(678)]);const o=(t[n(678)]-e[n(602)])/48e3;if((null===(r=e[n(479)][n(504)])||void 0===r?void 0:r[n(667)])===n(616))return e.jmuxer[n(473)]({audio:new Uint8Array(t[n(662)]),timestamp:o});const i=function(e){const t=ai,n=new DataView(e[t(261)]),r=e.data[t(268)]-2,o=n[t(267)](r);if(o<r){let e=r-o;if(69!==n[t(264)](r-1))return li.error("SampleAuxInfo corrupted (postfix not found)"),null;if(n[t(264)](e++)>>>4!==1)return li[t(271)]("Unsupported SampleAuxInfo version"),null;const i=new Uint8Array(o-2);let s=0;for(;e<r-1;){const r=n[t(264)](e++);if(i[s++]=r,s>=16)break}return{sai:i,offset:r-o}}return null}(t);return i?e.jmuxer[n(473)]({audio:new Uint8Array(t[n(662)],0,i[n(669)]),audioSampleAuxInfo:i[n(536)],timestamp:o}):(Fi[n(690)](n(590)),-1)}function ps(e,t,n){const r=Ui,o=bs(n);return e[r(601)]?hs(o,e,t):ms(o,e,t)}function hs(e,t,n){const r=Ui;if(e[r(474)][r(502)]){xo.mediaDumps[r(502)].in[r(510)]&&e[r(474)][r(502)][r(519)](new Uint8Array([0,0,0,1,9,80]));const n=t[r(678)]/90;e[r(474)][r(502)][r(519)](new Uint8Array(t[r(662)]),n)||(e[r(474)][r(502)]=null)}if(e[r(479)][r(502)]&&"clear"===e[r(479)][r(502)][r(667)])return null==n||n[r(533)](t),!1;const o=Date[r(658)]();if(t[r(601)]===r(651)){const n=xo.logLevel>=4;++e[r(633)]<(n?Number[r(612)]:5)&&(Fi.debug(To()+" "+t[r(601)]+", "+t.data.byteLength+r(622)+(r(657)+e.config[r(661)].currentTime)),n&&1===e.keyFrameLogCntr&&function(e,t=64,n=64){const r=Ui,o=new Uint8Array(e[r(662)]);let i="",s=0;for(let a=0;a<t&&a<o[r(553)];++a)i+=(o[a]<16?"0":"")+o[a][r(644)](16)+" ";if(s<o[r(553)])for(s<o[r(553)]-n&&(i+=r(594),s=o[r(553)]-n);s<o[r(553)];s++)i+=(o[s]<16?"0":"")+o[s][r(644)](16)+" ";Fi[r(531)]("["+((e[r(601)]||r(504))+r(629))+r(501)+i[r(528)]())}(t,128,8)),e.keyFrameNeeded=!1,e[r(596)]=0,e[r(561)]=o+e[r(617)]}return e[r(596)]+=t[r(662)][r(627)],!e[r(491)]&&e[r(596)]>Xi&&(Fi.info(r(623)),e[r(491)]=!0),e[r(475)]&&(ls(e,t)<0?e[r(491)]=!0:ds(e)),n?(!e[r(491)]||!Ki)&&(t[r(662)]=vi(e[r(491)]),n[r(533)](t)):e[r(491)]!=e.keyFrameNeededPosted&&(e[r(500)]&&e.worker.postMessage(e[r(491)]),e.keyFrameNeededPosted=e[r(491)]),e.keyFrameNeeded}function ms(e,t,n){const r=Ui;if(e.dbgMediaDump.audio){const n=t[r(678)]/48;e[r(474)][r(504)][r(519)](new Uint8Array(t.data),n)||(e.dbgMediaDump[r(504)]=null)}return e[r(479)].audio&&e[r(479)].audio[r(667)]!==r(572)?t[r(662)][r(627)]>0&&fs(e,t):n&&n[r(533)](t),!1}function vs(e){const t=Ui;var n,r,o,i,s;if(!e||typeof e!==t(672))throw new TypeError(t(481));if(!(e.videoElement instanceof HTMLVideoElement))throw new TypeError("Invalid videoElement, it must be an instance of HTMLVideoElement.");if(e[t(526)]&&!(e[t(526)]instanceof HTMLMediaElement))throw new TypeError("Invalid audioElement, it must be an instance of HTMLMediaElement.");if(void 0!==e[t(571)]&&!Number[t(643)](e[t(571)]))throw new TypeError("DRM config mediaBufferMs should be an integer.");let a=!1,c=!1,u=!1;const l=[t(616),"cenc",t(572)],d=["SW","HW"];for(const p of[e.video,e[t(504)]])if(p){if(!l[t(548)](p[t(667)]))throw new RangeError("DRM config encryption value must be one of: "+l[t(529)](", "));if(Hi&&p.encryption===t(591))throw new RangeError(t(635));if("clear"!==p[t(667)]){if(c=!0,p.keyId){if(!(p[t(639)]instanceof Uint8Array)||16!==p[t(639)][t(553)])throw new TypeError(t(679));u=!0}else if(Hi)throw new ReferenceError(t(558));if(p.iv&&(!(p.iv instanceof Uint8Array)||16!==p.iv[t(553)]))throw new TypeError(t(638));if(p[t(599)]&&!d[t(548)](p[t(599)]))throw new RangeError("DRM config robustness can only be one of: "+d[t(529)](", "));if(p===e.video&&p.codec!==t(630))throw new RangeError(t(681));Hi&&p===e.audio&&p[t(592)]===t(494)&&(a=!0,Fi.warn(t(625))),e[t(601)]===t(589)&&("cenc"!==p[t(667)]&&Fi[t(517)](t(664)+p[t(667)]+t(556)),void 0===e.sessionId||e[t(575)][t(548)]("f1")||Fi[t(517)](t(472)+e[t(575)]+", a1d1f1 is recommended)."))}}if(c){const n=[ii[t(652)],ii[t(654)],ii.Production];if(!n[t(548)](e[t(464)]))throw new RangeError("DRM config env value must be one of: "+n.join(", "));if(e[t(523)]&&typeof e.authToken!==t(514))throw new TypeError(t(554)+typeof e[t(523)]+t(534));if(e[t(601)])if(Hi){if("FairPlay"!==e.type)throw new RangeError(t(637)+e[t(601)]+"). Safari only supports FairPlay.")}else if(qi){if(e[t(601)]!==t(686)&&"ClearKey"!==e.type)throw new RangeError(t(637)+e[t(601)]+t(583))}else if(Wi&&e[t(601)]!==t(589)&&"Widevine"!==e[t(601)]&&e[t(601)]!==t(469))throw new RangeError(t(637)+e.type+t(582))}if(void 0!==e[t(665)]&&(xo[t(665)]=e[t(665)]),void 0!==e.mediaDumps){if(e.mediaDumps[t(502)]){const i=e[t(631)].video,s=xo[t(631)][t(502)];!(null===(n=i.in)||void 0===n)&&n.durationMs&&(s.in[t(675)]=i.in.durationMs),!(null===(r=i.in)||void 0===r)&&r.delimited&&(s.in.delimited=i.in[t(510)]),null!==(o=i[t(683)])&&void 0!==o&&o.durationMs&&(s[t(683)][t(675)]=i[t(683)].durationMs)}if(e[t(631)][t(504)]){const n=e[t(631)][t(504)],r=xo[t(631)][t(504)];!(null===(i=n.in)||void 0===i)&&i.durationMs&&(r.in.durationMs=n.in.durationMs),null!==(s=n.out)&&void 0!==s&&s[t(675)]&&(r[t(683)][t(675)]=n[t(683)].durationMs)}}let f=ts[t(524)](e[t(661)]);!f&&(f=new es(e),ts[t(587)](e.videoElement,f)),f[t(656)]=c,f.ignoreAudio=a,f[t(483)]=!a&&f[t(479)][t(504)]&&f[t(479)][t(504)][t(667)]!==t(572),c&&(f[t(479)][t(601)]||(f[t(479)][t(601)]=Hi?"FairPlay":t(686)),u||f.config.type===t(469)||(f[t(479)][t(601)]=t(469)),as(f),function(e){co(this,void 0,void 0,(function*(){const t=us;var n,r;let o=e.config[t(661)];if((!e.config[t(502)]||e[t(479)].video[t(667)]===t(572))&&(o=e[t(479)][t(526)]),!o)throw new Error(t(507));o[t(574)]="",o[t(557)]=null,yield o[t(484)](null);let i=null;try{i=yield navigator[t(461)](e[t(677)],e[t(603)])}catch(a){}if(!i&&e.emeConfig[0]){const o=null===(n=e.emeConfig[0][t(522)])||void 0===n?void 0:n[t(516)](t(537));if(void 0!==o&&o>=0){null===(r=e[t(603)][0][t(522)])||void 0===r||r.splice(o,1);try{i=yield navigator[t(461)](e[t(677)],e[t(603)])}catch(c){}}}if(!i){const n=t(634)+e[t(677)]+") failed";return o[t(569)](new CustomEvent(t(563),{detail:{message:n}})),void Fi[t(690)](n)}let s=null;try{s=yield i.createMediaKeys()}catch(a){}if(!s){const n="createMediaKeys("+e.keySystem+") failed";return o.dispatchEvent(new CustomEvent(t(563),{detail:{message:n}})),void Fi[t(690)](n)}if(e.serverCertificate)Fi[t(567)](t(684)+e[t(552)][t(627)]+" bytes)"),yield s.setServerCertificate(e[t(552)]);else if(e[t(547)]){const n={method:t(487)},r=e.serverCertificateUrl;try{const i=yield e.config[t(645)]?e[t(479)][t(645)](r,n):fetch(r,n);if(!i.ok){const e="Server certificate fetch failed with error "+i[t(649)];return void o[t(569)](new CustomEvent(t(563),{detail:{message:e}}))}const a=yield i[t(581)]();Fi[t(567)]("Fetched certificate from "+r+", "+a.byteLength+t(565)),yield s.setServerCertificate(a)}catch(u){const e=u.name+": "+u[t(628)];return Fi[t(690)](e),void o[t(569)](new CustomEvent("rtcdrmerror",{detail:{message:e}}))}}yield o[t(484)](s),o[t(555)](t(492),Bi),cs(e)}))}(f)),f[t(479)][t(661)][t(555)]("play",(function(){const e=t;f[e(479)][e(661)][e(691)]>.5&&(f[e(561)]=Date[e(658)]())}))}const gs=Ui(655)+Ui(671)+Ui(477)+Ui(564)+'),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdToggle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f'+Ui(542)+Ui(613)+Ui(609)+Ui(648)+Ui(559);function bs(e){const t=Ui;if(0===ts[t(506)])throw new TypeError(t(568));let n;if(e&&e[t(661)])n=e.videoElement;else{if(1!==ts[t(506)])throw new TypeError("Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.");n=ts.keys()[t(646)]()[t(560)]}const r=ts[t(524)](n);if(!r){let e="";throw ts[t(480)]((t,n)=>{e+=n.id+", "}),e=e[t(550)](0,-2),new TypeError(t(608)+n.id+t(515)+e+"]")}return r}function ys(e,t){const n=Ui;if(e&&e.config[n(661)]){const r=e.config[n(661)];if(r.buffered[n(553)]>0){const e=r.buffered[n(693)](r.buffered[n(553)]-1)-r.currentTime;t[n(611)]=t.jitterBufferDelayHint=t[n(520)]=e}setTimeout(ys,1e3,e,t)}}function ws(e,t){const n=Ui;var r,o;const i=e[n(614)][n(503)];i===n(502)&&(e[n(642)][n(611)]=e.receiver[n(505)]=e[n(642)][n(520)]=0);const s=bs(t),a=s[n(479)][n(661)],c=s.config.audioElement;if(s.enabled){const t=""+n(zi?525:470);if(s[n(479)][n(488)])Fi[n(567)](t+n(544));else{if(Fi[n(567)](n(676)+t+n(653)),i===n(502)){const e=xo[n(631)][n(502)].in[n(675)];e>0&&(s.dbgMediaDump[n(502)]=new Po(n(502),n(632),e))}else if(i===n(504)){const e=xo[n(631)][n(504)].in[n(675)];e>0&&(s[n(474)][n(504)]=new Po(n(504),n(494),e))}if(zi){if(s[n(500)]=function(e){const t=Ui,n=window[t(551)]||window.webkitURL,r=window[t(538)],o=window.Worker;if(!(n&&r&&o&&e))return null;const i=new r([e]);return new o(n[t(610)](i))}(gs),null==s[n(500)])throw new Error(n(486));s[n(500)][n(463)]=e=>{const t=n;e[t(662)][t(497)]===t(502)?hs(s,e.data.frame,null):ms(s,e.data.frame,null)},e[n(642)][n(541)]=new RTCRtpScriptTransform(s.worker,{operation:i})}else{const t=i===n(502)?hs:ms,r={drm:s,transform:(e,n)=>{t(s,e,n)}},o=e[n(642)][n(470)](),a=new TransformStream({transform:r[n(541)][n(545)](r)}),{readable:c,writable:u}=o;c[n(512)](a)[n(640)](u)}}if("audio"===i&&(null===(r=s.config[n(504)])||void 0===r?void 0:r.encryption)===n(572)){if(!c)return void Fi[n(517)](n(579));c[n(557)]!==e[n(546)][0]&&(c[n(557)]=e.streams[0]),s[n(479)][n(661)]&&(e[n(642)].playoutDelayHint=e.receiver.jitterBufferDelayHint=e[n(642)][n(520)]=s[n(479)][n(571)],ys(s,e[n(642)]))}else i===n(502)&&(null===(o=s[n(479)][n(502)])||void 0===o?void 0:o.encryption)===n(572)&&a[n(557)]!==e[n(546)][0]&&(a.srcObject=e[n(546)][0])}else a[n(557)]!==e[n(546)][0]&&(a.srcObject=e[n(546)][0])}const Ss=q.get("View");Ss.setLevel(q.DEBUG);const Es={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};class Cs extends Qr{constructor(e,t,n=null,r=!0){e&&Ss.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,t,Ss,r),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,n&&(this.on(Pn.track,e=>{n.srcObject=e.streams[0]}),Ss.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}async connect(e=Es){this.options=f(d(d({},Es),e),{peerConfig:d(d({},Es.peerConfig),e.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(e={}){Ss.debug("Viewer select layer values: ",e),await this.signaling.cmd("select",{layer:e}),Ss.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(e,t){Ss.info("Viewer adding remote track",e);const n=await this.webRTCPeer.addRemoteTrack(e,t);for(const r of t)r.addTrack(n.receiver.track);return n}async project(e,t){for(const n of t){if(!n.trackId&&!n.media)throw Ss.error("Error in projection mapping, trackId or mediaId must be set"),new Error("Error in projection mapping, trackId or mediaId must be set");const e=this.webRTCPeer.getRTCPeer();if(n.mediaId&&!e.getTransceivers().find(e=>e.mid===n.mediaId.toString()))throw Ss.error("Error in projection mapping, ".concat(n.mediaId," mid not found in local transceivers")),new Error("Error in projection mapping, ".concat(n.mediaId," mid not found in local transceivers"))}Ss.debug("Viewer project source: layer mappings: ",e,t),await this.signaling.cmd("project",{sourceId:e,mapping:t}),Ss.info("Projection done")}async unproject(e){Ss.debug("Viewer unproject mediaIds: ",e),await this.signaling.cmd("unproject",{mediaIds:e}),Ss.info("Unprojection done")}async replaceConnection(){Ss.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var e,t;super.stop(),null==(e=this.drmOptionsMap)||e.clear(),this.DRMProfile=null,null==(t=this.worker)||t.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(e){var t;let n,r;if(Ss.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,e.abrConfiguration&&e.abrConfiguration.metadata){const t=e.abrConfiguration.metadata.bitrate;if(!t||t<0)throw new Error("Invalid bitrate ".concat(t," supplied for ABR. The value must be a non-negative integer value."))}if(!e.migrate&&this.isActive())throw Ss.warn("Viewer currently subscribed"),new Error("Viewer currently subscribed");try{r=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==r?void 0:r.iceServers,this.options.peerConfig.encodedInsertableStreams=Xr&&(this.options.enableDRM||this.options.metadata)}catch(g){throw Ss.error("Error generating token."),g instanceof er&&(401!==g.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),g}if(!r)throw Ss.error("Error while subscribing. Subscriber data required"),new Error("Subscriber data required");const o=pr(r.jwt);this.streamName=o.millicast.streamName;const i=new Yn({streamName:this.streamName,url:"".concat(r.urls[0],"?token=").concat(r.jwt)});r.subscriberToken&&(this.subscriberToken=r.subscriberToken);const s=e.migrate?new An:this.webRTCPeer;await s.createRTCPeer(this.options.peerConfig),null==(t=this.stopReemitingWebRTCPeerInstanceEvents)||t.call(this),this.stopReemitingWebRTCPeerInstanceEvents=re(s,this,Object.values(Pn).filter(e=>e!==Pn.track)),this.options.metadata&&(this.worker||(this.worker=new eo),this.worker.onmessage=e=>{if("metadata"===e.data.event){const n=new TextDecoder,r=e.data.metadata;if(r.mid=e.data.mid,r.track=this.tracksMidValues[e.data.mid],r.uuid){const e=r.uuid;r.uuid=e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),r.uuid=r.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(r.timecode&&(r.timecode=new Date(n.decode(r.timecode))),r.unregistered){const e=n.decode(r.unregistered);try{const t=JSON.parse(e);r.unregistered=t}catch(t){Ss.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",r)}}),s.on(Pn.track,e=>{this.isMainStreamActive?this.onTrackEvent(e):this.eventQueue.push(e)}),i.on(Xn.broadcastEvent,async e=>{if(this.isMainStreamActive||"active"!==e.name)"inactive"===e.name&&this.isMainStreamActive&&this.mainSourceId===e.data.sourceId&&(this.isMainStreamActive=!1),this.emit(Xn.broadcastEvent,e);else{if(this.mainSourceId=e.data.sourceId,!this.DRMProfile&&e.data.encryption){const e=await this.tokenGenerator();e.drmObject&&(this.DRMProfile=e.drmObject)}for(this.emit(Xn.broadcastEvent,e),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}});const a=s.getRTCLocalSDP(f(d({},this.options),{stereo:!0})),c=i.connect();n=await Promise.all([a,c]);const u=n[0];let l=this.signaling;this.signaling=i;const p=this.signaling.subscribe(u,f(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),h=s.peer.setLocalDescription(s.sessionDescription);n=await Promise.all([p,h]);const m=n[0];this.payloadTypeCodec=Cn.getCodecPayloadType(m),await s.setRTCRemoteSDP(m),Ss.info("Connected to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=s,this.setReconnect(),e.migrate&&this.webRTCPeer.on(Pn.connectionStateChange,e=>{var t,n;"connected"===e?setTimeout(()=>{var e,t;null==(e=null==l?void 0:l.close)||e.call(l),null==(t=null==v?void 0:v.closeRTCPeer)||t.call(v),l=v=null,Ss.info("Current connection migrated")},1e3):["disconnected","failed","closed"].includes(e)&&(null==(t=null==l?void 0:l.close)||t.call(l),null==(n=null==v?void 0:v.closeRTCPeer)||n.call(v),l=v=null)})}onTrackEvent(e){var t,n,r;if(this.tracksMidValues[null==(t=e.transceiver)?void 0:t.mid]=e.track,this.isDRMOn){const t=e.transceiver.mid,n=this.getDRMConfiguration(t);try{ws(e,n)}catch(o){Ss.error("Failed to apply DRM on media Id:",t,"error is: ",o),this.emit("error",new Error("Failed to apply DRM on media Id: "+t+" error is: "+o))}this.worker||(this.worker=new eo),this.worker.addEventListener("message",e=>{"complete"===e.data.event&&ps(e.data.frame,null,n)})}if(this.options.metadata)if(Yr)e.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=e.transceiver)?void 0:n.mid});else if(Xr){const{readable:t,writable:n}=e.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(r=e.transceiver)?void 0:r.mid,readable:t,writable:n},[t,n])}this.emit(Pn.track,e)}getDRMConfiguration(e){return this.drmOptionsMap?this.drmOptionsMap.get(e):null}async onRtcDrmFetch(e,t){return t.headers||(t.headers=new Headers),t.headers.get("x-dt-custom-data")&&t.headers.delete("x-dt-custom-data"),this.subscriberToken?t.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Ss.warn("onRtcDrmFetch: no subscriberToken"),fetch(e,t)}configureDRM(e){if(!e)throw new Error("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const t={merchant:"dolby",environment:ii.Production,customTransform:this.options.metadata,videoElement:e.videoElement,audioElement:e.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:so(e.videoEncryptionParams.keyId),iv:so(e.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};e.mediaBufferMs&&(t.mediaBufferMs=e.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(t.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(t.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(t.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(t.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{vs(t),this.drmOptionsMap.set(e.videoMid,t),e.audioMid&&this.drmOptionsMap.set(e.audioMid,t),t.videoElement.addEventListener("rtcdrmerror",e=>{Ss.error("DRM error: ",e.detail.message,"in video element:",t.videoElement.id),this.emit("error",new Error(e.detail.message))})}catch(n){Ss.error("Failed to configure DRM with options:",e,"error is:",n)}}removeDRMConfiguration(e){var t;null==(t=this.drmOptionsMap)||t.delete(e)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(e,t){const n=this.getDRMConfiguration(e),r=this.getDRMConfiguration(t);if(null===n)throw new Error("No DRM configuration found for "+e);if(null===r)throw new Error("No DRM configuration found for "+t);ao(n.video,r.video,"keyId"),ao(n.video,r.video,"iv");try{vs(n)}catch(o){Ss.error("Failed to configure DRM with options:",n,"error is:",o)}try{vs(r)}catch(o){Ss.error("Failed to configure DRM with options:",r,"error is:",o)}}}e.Director=ir,e.Logger=q,e.PeerConnection=An,e.Publish=ro,e.Signaling=Yn,e.View=Cs,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))}).call(this,n("c8ba"),n("4362"))},e01a:function(e,t,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("cfe9"),s=n("e330"),a=n("1a2d"),c=n("1626"),u=n("3a9b"),l=n("577e"),d=n("edd0"),f=n("e893"),p=i.Symbol,h=p&&p.prototype;if(o&&c(p)&&(!("description"in h)||void 0!==p().description)){var m={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(h,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};f(v,p),v.prototype=h,h.constructor=v;var g="Symbol(description detection)"===String(p("description detection")),b=s(h.valueOf),y=s(h.toString),w=/^Symbol\((.*)\)[^)]+$/,S=s("".replace),E=s("".slice);d(h,"description",{configurable:!0,get:function(){var e=b(this);if(a(m,e))return"";var t=y(e),n=g?E(t,7,-1):S(t,w,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:v})}},e065:function(e,t,n){"use strict";var r=n("428f"),o=n("1a2d"),i=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||s(t,e,{value:i.f(e)})}},e163:function(e,t,n){"use strict";var r=n("1a2d"),o=n("1626"),i=n("7b0b"),s=n("f772"),a=n("e177"),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=i(e);if(r(t,c))return t[c];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?l:null}},e177:function(e,t,n){"use strict";var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e25e:function(e,t,n){"use strict";var r=n("23e7"),o=n("c20d");r({global:!0,forced:parseInt!==o},{parseInt:o})},e260:function(e,t,n){"use strict";var r=n("fc6a"),o=n("44d2"),i=n("3f8c"),s=n("69f3"),a=n("9bf2").f,c=n("c6d2"),u=n("4754"),l=n("c430"),d=n("83ab"),f="Array Iterator",p=s.set,h=s.getterFor(f);e.exports=c(Array,"Array",(function(e,t){p(this,{type:f,target:r(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,u(void 0,!0);switch(e.kind){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var m=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&d&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(v){}},e267:function(e,t,n){"use strict";var r=n("e330"),o=n("e8b5"),i=n("1626"),s=n("c6b6"),a=n("577e"),c=r([].push);e.exports=function(e){if(i(e))return e;if(o(e)){for(var t=e.length,n=[],r=0;r<t;r++){var u=e[r];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!==s(u)&&"String"!==s(u)||c(n,a(u))}var l=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(o(this))return t;for(var r=0;r<l;r++)if(n[r]===e)return t}}}},e330:function(e,t,n){"use strict";var r=n("40d5"),o=Function.prototype,i=o.call,s=r&&o.bind.bind(i,i);e.exports=r?s:function(e){return function(){return i.apply(e,arguments)}}},e391:function(e,t,n){"use strict";var r=n("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},e444:function(e,t,n){},e4ca:function(e,t,n){},e538:function(e,t,n){"use strict";var r=n("b622");t.f=r},e5cb:function(e,t,n){"use strict";var r=n("d066"),o=n("1a2d"),i=n("9112"),s=n("3a9b"),a=n("d2bb"),c=n("e893"),u=n("aeb0"),l=n("7156"),d=n("e391"),f=n("ab36"),p=n("6f19"),h=n("83ab"),m=n("c430");e.exports=function(e,t,n,v){var g="stackTraceLimit",b=v?2:1,y=e.split("."),w=y[y.length-1],S=r.apply(null,y);if(S){var E=S.prototype;if(!m&&o(E,"cause")&&delete E.cause,!n)return S;var C=r("Error"),O=t((function(e,t){var n=d(v?t:e,void 0),r=v?new S(e):new S;return void 0!==n&&i(r,"message",n),p(r,O,r.stack,2),this&&s(E,this)&&l(r,this,O),arguments.length>b&&f(r,arguments[b]),r}));if(O.prototype=E,"Error"!==w?a?a(O,C):c(O,C,{name:!0}):h&&g in S&&(u(O,S,g),u(O,S,"prepareStackTrace")),c(O,S),!m)try{E.name!==w&&i(E,"name",w),E.constructor=O}catch(k){}return O}}},e667:function(e,t,n){"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,n){"use strict";n("5e7e"),n("14e5"),n("cc98"),n("3529"),n("f22b"),n("7149")},e893:function(e,t,n){"use strict";var r=n("1a2d"),o=n("56ef"),i=n("06cf"),s=n("9bf2");e.exports=function(e,t,n){for(var a=o(t),c=s.f,u=i.f,l=0;l<a.length;l++){var d=a[l];r(e,d)||n&&r(n,d)||c(e,d,u(t,d))}}},e8b5:function(e,t,n){"use strict";var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"===r(e)}},e95a:function(e,t,n){"use strict";var r=n("b622"),o=n("3f8c"),i=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},e9c4:function(e,t,n){"use strict";var r=n("23e7"),o=n("d066"),i=n("2ba4"),s=n("c65b"),a=n("e330"),c=n("d039"),u=n("1626"),l=n("d9b5"),d=n("f36a"),f=n("e267"),p=n("04f8"),h=String,m=o("JSON","stringify"),v=a(/./.exec),g=a("".charAt),b=a("".charCodeAt),y=a("".replace),w=a(1.1.toString),S=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,O=!p||c((function(){var e=o("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),k=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),I=function(e,t){var n=d(arguments),r=f(t);if(u(r)||void 0!==e&&!l(e))return n[1]=function(e,t){if(u(r)&&(t=s(r,this,h(e),t)),!l(t))return t},i(m,null,n)},x=function(e,t,n){var r=g(n,t-1),o=g(n,t+1);return v(E,e)&&!v(C,o)||v(C,e)&&!v(E,r)?"\\u"+w(b(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:O||k},{stringify:function(e,t,n){var r=d(arguments),o=i(O?I:m,null,r);return k&&"string"==typeof o?y(o,S,x):o}})},e9f5:function(e,t,n){"use strict";var r=n("23e7"),o=n("cfe9"),i=n("19aa"),s=n("825a"),a=n("1626"),c=n("e163"),u=n("edd0"),l=n("8418"),d=n("d039"),f=n("1a2d"),p=n("b622"),h=n("ae93").IteratorPrototype,m=n("83ab"),v=n("c430"),g="constructor",b="Iterator",y=p("toStringTag"),w=TypeError,S=o[b],E=v||!a(S)||S.prototype!==h||!d((function(){S({})})),C=function(){if(i(this,h),c(this)===h)throw new w("Abstract class Iterator not directly constructable")},O=function(e,t){m?u(h,e,{configurable:!0,get:function(){return t},set:function(t){if(s(this),this===h)throw new w("You can't redefine this property");f(this,e)?this[e]=t:l(this,e,t)}}):h[e]=t};f(h,y)||O(y,b),!E&&f(h,g)&&h[g]!==Object||O(g,C),C.prototype=h,r({global:!0,constructor:!0,forced:E},{Iterator:C})},ea83:function(e,t,n){"use strict";var r=n("b5db"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},eb1d:function(e,t,n){"use strict";var r=n("c430"),o=n("cfe9"),i=n("d039"),s=n("ea83");e.exports=r||!i((function(){if(!(s&&s<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}}))},ebc1:function(e,t,n){"use strict";var r=n("b5db");e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},ec87:function(e,t,n){"use strict";var r=n("b5db");e.exports=/web0s(?!.*chrome)/i.test(r)},edd0:function(e,t,n){"use strict";var r=n("13d2"),o=n("9bf2");e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),o.f(e,t,n)}},efec:function(e,t,n){"use strict";var r=n("1a2d"),o=n("cb2d"),i=n("51eb"),s=n("b622"),a=s("toPrimitive"),c=Date.prototype;r(c,a)||o(c,a,i)},f069:function(e,t,n){"use strict";var r=n("59ed"),o=TypeError,i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new o("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f22b:function(e,t,n){"use strict";var r=n("23e7"),o=n("f069"),i=n("4738").CONSTRUCTOR;r({target:"Promise",stat:!0,forced:i},{reject:function(e){var t=o.f(this),n=t.reject;return n(e),t.promise}})},f36a:function(e,t,n){"use strict";var r=n("e330");e.exports=r([].slice)},f45e:function(e,t,n){},f4b3:function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("7b0b"),s=n("c04e"),a=o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));r({target:"Date",proto:!0,arity:1,forced:a},{toJSON:function(e){var t=i(this),n=s(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},f5b2:function(e,t,n){"use strict";var r=n("23e7"),o=n("6547").codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return o(this,e)}})},f5df:function(e,t,n){"use strict";var r=n("00ee"),o=n("1626"),i=n("c6b6"),s=n("b622"),a=s("toStringTag"),c=Object,u="Arguments"===i(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=l(t=c(e),a))?n:u?i(t):"Object"===(r=i(t))&&o(t.callee)?"Arguments":r}},f665:function(e,t,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("2266"),s=n("59ed"),a=n("825a"),c=n("46c4"),u=n("2a62"),l=n("f99f"),d=l("find",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){a(this);try{s(e)}catch(r){u(this,"throw",r)}if(d)return o(d,this,e);var t=c(this),n=0;return i(t,(function(t,r){if(e(t,n++))return r(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},f772:function(e,t,n){"use strict";var r=n("5692"),o=n("90e3"),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},f99f:function(e,t,n){"use strict";var r=n("cfe9");e.exports=function(e,t){var n=r.Iterator,o=n&&n.prototype,i=o&&o[e],s=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){s=!0}},-1)}catch(a){a instanceof t||(s=!1)}if(!s)return i}},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}n("4de4"),n("e9f5"),n("910d"),n("d3b7");var i=n("8bbf");function s(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerContainer");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{class:"ml-viewer",id:"viewer-container"})}n("a4d3"),n("e01a"),n("d9e2"),n("d401"),n("3410"),n("131a");function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function i(t,n){a(e,t,(function(e){return this._invoke(t,n,e)}))}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,r)}function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return a(l,"_invoke",function(n,r,o){var i,a,c,u=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,c=e,f.n=n,s}};function p(n,r){for(a=n,c=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,i=l[t],p=f.p,h=i[2];n>3?(o=h===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,a=0))}if(o||n>1)return s;throw d=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,h),a=l,c=h;(t=a<2?e:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(u=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i["return"])&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==s)break}catch(t){i=e,a=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),l}var s={};function u(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(a(t={},r,(function(){return this})),t),p=d.prototype=u.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,a(p,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(p),a(p,o,"Generator"),a(p,r,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:i,m:h}})()}n("e6cf");function u(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){u(i,r,o,s,a,"next",e)}function a(e){u(i,r,o,s,a,"throw",e)}s(void 0)}))}}n("cca6");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){if(Array.isArray(e))return f(e)}n("d28b"),n("a630"),n("e260"),n("3ca3"),n("ddb0");function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("ac1f"),n("00b4"),n("25f0");function m(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){return p(e)||h(e)||m(e)||v()}var b={key:0,class:"overlay spinner-container"},y=["id"],w={key:0,id:"controls",class:"controls"},S={class:"row"},E={class:"col-6 text-left"},C={class:"col-6 text-right"},O={key:1,class:"overlay d-flex flex-row justify-content-center align-items-center"},k={class:"d-flex flex-column ml-3"},I={class:"font-weight-bold"};function x(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerMedia"),c=Object(i["resolveComponent"])("VideoPlayerControlsUserCount"),u=Object(i["resolveComponent"])("VideoPlayerControlsBadge"),l=Object(i["resolveComponent"])("VideoPlayerControlsContainer"),d=Object(i["resolveComponent"])("VideoPlayerSideVideoSources");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"container-fluid align-container",onMousemove:t[4]||(t[4]=function(){return s.showControls&&s.showControls.apply(s,arguments)})},[e.isLoading?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",b,g(t[5]||(t[5]=[Object(i["createElementVNode"])("div",{class:"spinner-border text-light",role:"status"},[Object(i["createElementVNode"])("span",{class:"sr-only"},"Loading...")],-1)])))):Object(i["createCommentVNode"])("",!0),e.autoPlayMuted&&e.isLive&&!this.viewer.muted?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,onClick:t[0]||(t[0]=function(){return s.tapUnmute&&s.tapUnmute.apply(s,arguments)}),class:"overlay tap-unmute d-flex align-items-center justify-content-center"},g(t[6]||(t[6]=[Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("div",{class:"d-flex justify-content-center"},[Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-volume-mute-fill pb-0"})]),Object(i["createElementVNode"])("p",{class:"text-center tap-text"},"Tap to unmute")],-1)])))):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["mx-0",e.videoSources.length>1&&e.isGrid&&e.isSplittedView?"grid-container":"list-container"]),id:e.videoSources.length>1&&!e.isGrid&&e.isSplittedView?"lcontainer":""},[Object(i["createElementVNode"])("div",{id:"vplayer",ref:"player",class:Object(i["normalizeClass"])(["player",{show:o.show,"limit-screen":e.videoSources.length>1&&e.isSplittedView&&!e.isGrid,"grid-player":e.videoSources.length>1&&e.isSplittedView&&e.isGrid}]),style:Object(i["normalizeStyle"])({cursor:e.isGrid?"pointer":""}),onDblclick:t[2]||(t[2]=function(){return e.toggleFullscreen&&e.toggleFullscreen.apply(e,arguments)})},[Object(i["createElementVNode"])("div",{id:"main-source",onClick:t[1]||(t[1]=function(){return s.handleWholeScreen&&s.handleWholeScreen.apply(s,arguments)}),style:Object(i["normalizeStyle"])({height:e.isSplittedView?"":"100%"})},[Object(i["createVNode"])(a,{ref:"element"},null,512)],4),e.viewer.controls?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",w,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["gradient-top controls-top container-fluid pt-3",{hide:!o.show}])},[Object(i["createElementVNode"])("div",S,[Object(i["createElementVNode"])("div",E,[s.showButton("userCount")?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0})):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",C,[s.showButton("liveBadge")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0})):Object(i["createCommentVNode"])("",!0)])])],2),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([{hide:!o.show},"gradient-bottom controls-bottom container-fluid pb-3"])},[Object(i["createVNode"])(l,{isConnected:o.cast.isConnected,showButton:s.showButton,currentTime:s.currentTime,streamId:e.viewer.streamId},null,8,["isConnected","showButton","currentTime","streamId"])],2)])):Object(i["createCommentVNode"])("",!0),o.cast.device?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",O,[Object(i["createElementVNode"])("div",k,[t[7]||(t[7]=Object(i["createElementVNode"])("h3",null,"Casting to",-1)),Object(i["createElementVNode"])("h1",I,Object(i["toDisplayString"])(o.cast.device.friendlyName),1)])])):Object(i["createCommentVNode"])("",!0)],38),e.videoSources.length>1&&e.isSplittedView?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:Object(i["normalizeClass"])(e.isGrid?"":"side-panel overflow-auto sc1"),style:Object(i["normalizeStyle"])(e.isGrid?"display: contents":"scroll-snap-type: y mandatory"),onMousemove:t[3]||(t[3]=function(){return s.showControls&&s.showControls.apply(s,arguments)})},[Object(i["createVNode"])(d,{class:Object(i["normalizeClass"])(e.isGrid?"side-sources":"")},null,8,["class"])],38)):Object(i["createCommentVNode"])("",!0)],10,y)],32)}n("caad"),n("2532");var T=["poster"],j={key:0,id:"drm-audio-player",playsinline:""},P=["poster"],R={key:0,id:"drm-audio-player2",playsinline:"",autoplay:"",muted:""},A={key:2};function V(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[e.isMigrating||"player"===e.currentElementRef?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[s.displayAudioOnly?(Object(i["openBlock"])(),Object(i["createElementBlock"])("audio",{key:0,playsinline:"",id:"player",ref:"player",class:Object(i["normalizeClass"])({"display: none;":"player2"===e.currentElementRef})},null,2)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createElementVNode"])("video",{playsinline:"",id:"player",ref:"player",poster:e.viewer.placeholderImg,class:Object(i["normalizeClass"])({"display: none;":"player2"===e.currentElementRef}),style:Object(i["normalizeStyle"])(e.isSplittedView?"border-radius: 0.25rem":"border-radius: 0")},null,14,T),e.viewer.drm?(Object(i["openBlock"])(),Object(i["createElementBlock"])("audio",j)):Object(i["createCommentVNode"])("",!0)],64))],64)):Object(i["createCommentVNode"])("",!0),e.isMigrating||"player2"===e.currentElementRef?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[s.displayAudioOnly?(Object(i["openBlock"])(),Object(i["createElementBlock"])("audio",{key:0,playsinline:"",id:"player2",ref:"player2",class:Object(i["normalizeClass"])({"display: none;":"player"===e.currentElementRef})},null,2)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createElementVNode"])("video",{playsinline:"",id:"player2",ref:"player2",poster:e.viewer.placeholderImg,class:Object(i["normalizeClass"])({"display: none;":"player"===e.currentElementRef}),style:Object(i["normalizeStyle"])(e.isSplittedView?"border-radius: 0.25rem":"border-radius: 0")},null,14,P),e.viewer.drm?(Object(i["openBlock"])(),Object(i["createElementBlock"])("audio",R)):Object(i["createCommentVNode"])("",!0)],64))],64)):Object(i["createCommentVNode"])("",!0),e.videoSources.length>1&&e.isSplittedView&&!e.fullscreen&&e.viewer.showLabels?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",A,Object(i["toDisplayString"])(this.mainLabel),1)):Object(i["createCommentVNode"])("",!0)],64)}n("7db0"),n("c975"),n("d81d"),n("f665"),n("ab43"),n("e25e");var M=n("e014");n("466d");function L(){return _().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:{}}const D="function"===typeof Proxy,N="devtools-plugin:setup",B="plugin:settings:set";let U,F;function z(){var e;return void 0!==U||("undefined"!==typeof window&&window.performance?(U=!0,F=window.performance):"undefined"!==typeof globalThis&&(null===(e=globalThis.perf_hooks)||void 0===e?void 0:e.performance)?(U=!0,F=globalThis.perf_hooks.performance):U=!1),U}function G(){return z()?F.now():Date.now()}class H{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const s in e.settings){const t=e.settings[s];n[s]=t.defaultValue}const r="__vue-devtools-plugin-settings__"+e.id;let o=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(o,t)}catch(i){}this.fallbacks={getSettings(){return o},setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(i){}o=e},now(){return G()}},t&&t.on(B,(e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)}),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise(n=>{this.targetQueue.push({method:t,args:e,resolve:n})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function W(e,t){const n=e,r=_(),o=L(),i=D&&n.enableEarlyProxy;if(!o||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&i){const e=i?new H(n,o):null,s=r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[];s.push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else o.emit(N,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var q="store";function $(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function Q(e){return null!==e&&"object"===typeof e}function K(e){return e&&"function"===typeof e.then}function X(e,t){if(!e)throw new Error("[vuex] "+t)}function Y(e,t){return function(){return e(t)}}function J(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Z(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;te(e,n,[],e._modules.root,!0),ee(e,n,t)}function ee(e,t,n){var r=e._state,o=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,a={},c={},u=Object(i["effectScope"])(!0);u.run((function(){$(s,(function(t,n){a[n]=Y(t,e),c[n]=Object(i["computed"])((function(){return a[n]()})),Object.defineProperty(e.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),e._state=Object(i["reactive"])({data:t}),e._scope=u,e.strict&&ae(e),r&&n&&e._withCommit((function(){r.data=null})),o&&o.stop()}function te(e,t,n,r,o){var i=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s]&&console.error("[vuex] duplicate namespace "+s+" for the namespaced module "+n.join("/")),e._modulesNamespaceMap[s]=r),!i&&!o){var a=ce(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){c in a&&console.warn('[vuex] state field "'+c+'" was overridden by a module with the same name at "'+n.join(".")+'"'),a[c]=r.state}))}var u=r.context=ne(e,s,n);r.forEachMutation((function(t,n){var r=s+n;oe(e,r,t,u)})),r.forEachAction((function(t,n){var r=t.root?n:s+n,o=t.handler||t;ie(e,r,o,u)})),r.forEachGetter((function(t,n){var r=s+n;se(e,r,t,u)})),r.forEachChild((function(r,i){te(e,t,n.concat(i),r,o)}))}function ne(e,t,n){var r=""===t,o={dispatch:r?e.dispatch:function(n,r,o){var i=ue(n,r,o),s=i.payload,a=i.options,c=i.type;if(a&&a.root||(c=t+c,e._actions[c]))return e.dispatch(c,s);console.error("[vuex] unknown local action type: "+i.type+", global type: "+c)},commit:r?e.commit:function(n,r,o){var i=ue(n,r,o),s=i.payload,a=i.options,c=i.type;a&&a.root||(c=t+c,e._mutations[c])?e.commit(c,s,a):console.error("[vuex] unknown local mutation type: "+i.type+", global type: "+c)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return re(e,t)}},state:{get:function(){return ce(e.state,n)}}}),o}function re(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,r)===t){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function oe(e,t,n,r){var o=e._mutations[t]||(e._mutations[t]=[]);o.push((function(t){n.call(e,r.state,t)}))}function ie(e,t,n,r){var o=e._actions[t]||(e._actions[t]=[]);o.push((function(t){var o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return K(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}function se(e,t,n,r){e._wrappedGetters[t]?console.error("[vuex] duplicate getter key: "+t):e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}function ae(e){Object(i["watch"])((function(){return e._state.data}),(function(){X(e._committing,"do not mutate vuex store state outside mutation handlers.")}),{deep:!0,flush:"sync"})}function ce(e,t){return t.reduce((function(e,t){return e[t]}),e)}function ue(e,t,n){return Q(e)&&e.type&&(n=t,t=e,e=e.type),X("string"===typeof e,"expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:n}}var le="vuex bindings",de="vuex:mutations",fe="vuex:actions",pe="vuex",he=0;function me(e,t){W({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[le]},(function(n){n.addTimelineLayer({id:de,label:"Vuex Mutations",color:ve}),n.addTimelineLayer({id:fe,label:"Vuex Actions",color:ve}),n.addInspector({id:pe,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===pe)if(n.filter){var r=[];Ee(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[Se(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===pe){var r=n.nodeId;re(t,r),n.state=Ce(ke(t._modules,r),"root"===r?t.getters:t._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===pe){var r=n.nodeId,o=n.path;"root"!==r&&(o=r.split("/").filter(Boolean).concat(o)),t._withCommit((function(){n.set(t._state.data,o,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(pe),n.sendInspectorState(pe),n.addTimelineEvent({layerId:de,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=he++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:fe,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},o=Date.now()-e._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:fe,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var ve=8702998,ge=6710886,be=16777215,ye={label:"namespaced",textColor:be,backgroundColor:ge};function we(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function Se(e,t){return{id:t||"root",label:we(t),tags:e.namespaced?[ye]:[],children:Object.keys(e._children).map((function(n){return Se(e._children[n],t+n+"/")}))}}function Ee(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[ye]:[]}),Object.keys(t._children).forEach((function(o){Ee(e,t._children[o],n,r+o+"/")}))}function Ce(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),o={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var i=Oe(t);o.getters=Object.keys(i).map((function(e){return{key:e.endsWith("/")?we(e):e,editable:!1,value:Ie((function(){return i[e]}))}}))}return o}function Oe(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var o=t,i=r.pop();r.forEach((function(e){o[e]||(o[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),o=o[e]._custom.value})),o[i]=Ie((function(){return e[n]}))}else t[n]=Ie((function(){return e[n]}))})),t}function ke(e,t){var n=t.split("/").filter((function(e){return e}));return n.reduce((function(e,r,o){var i=e[r];if(!i)throw new Error('Missing module "'+r+'" for path "'+t+'".');return o===n.length-1?i:i._children}),"root"===t?e:e.root._children)}function Ie(e){try{return e()}catch(t){return t}}var xe=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},Te={namespaced:{configurable:!0}};Te.namespaced.get=function(){return!!this._rawModule.namespaced},xe.prototype.addChild=function(e,t){this._children[e]=t},xe.prototype.removeChild=function(e){delete this._children[e]},xe.prototype.getChild=function(e){return this._children[e]},xe.prototype.hasChild=function(e){return e in this._children},xe.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},xe.prototype.forEachChild=function(e){$(this._children,e)},xe.prototype.forEachGetter=function(e){this._rawModule.getters&&$(this._rawModule.getters,e)},xe.prototype.forEachAction=function(e){this._rawModule.actions&&$(this._rawModule.actions,e)},xe.prototype.forEachMutation=function(e){this._rawModule.mutations&&$(this._rawModule.mutations,e)},Object.defineProperties(xe.prototype,Te);var je=function(e){this.register([],e,!1)};function Pe(e,t,n){if(Me(e,n),t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void console.warn("[vuex] trying to add a new module '"+r+"' on hot reloading, manual reload is needed");Pe(e.concat(r),t.getChild(r),n.modules[r])}}je.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},je.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},je.prototype.update=function(e){Pe([],this.root,e)},je.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0),Me(e,t);var o=new xe(t,n);if(0===e.length)this.root=o;else{var i=this.get(e.slice(0,-1));i.addChild(e[e.length-1],o)}t.modules&&$(t.modules,(function(t,o){r.register(e.concat(o),t,n)}))},je.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r?r.runtime&&t.removeChild(n):console.warn("[vuex] trying to unregister module '"+n+"', which is not registered")},je.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var Re={assert:function(e){return"function"===typeof e},expected:"function"},Ae={assert:function(e){return"function"===typeof e||"object"===typeof e&&"function"===typeof e.handler},expected:'function or object with "handler" function'},Ve={getters:Re,mutations:Re,actions:Ae};function Me(e,t){Object.keys(Ve).forEach((function(n){if(t[n]){var r=Ve[n];$(t[n],(function(t,o){X(r.assert(t),Le(e,n,o,t,r.expected))}))}}))}function Le(e,t,n,r,o){var i=t+" should be "+o+' but "'+t+"."+n+'"';return e.length>0&&(i+=' in module "'+e.join(".")+'"'),i+=" is "+JSON.stringify(r)+".",i}function _e(e){return new De(e)}var De=function e(t){var n=this;void 0===t&&(t={}),X("undefined"!==typeof Promise,"vuex requires a Promise polyfill in this browser."),X(this instanceof e,"store must be called with the new operator.");var r=t.plugins;void 0===r&&(r=[]);var o=t.strict;void 0===o&&(o=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new je(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var s=this,a=this,c=a.dispatch,u=a.commit;this.dispatch=function(e,t){return c.call(s,e,t)},this.commit=function(e,t,n){return u.call(s,e,t,n)},this.strict=o;var l=this._modules.root.state;te(this,l,[],this._modules.root),ee(this,l),r.forEach((function(e){return e(n)}))},Ne={state:{configurable:!0}};De.prototype.install=function(e,t){e.provide(t||q,this),e.config.globalProperties.$store=this;var n=void 0===this._devtools||this._devtools;n&&me(e,this)},Ne.state.get=function(){return this._state.data},Ne.state.set=function(e){X(!1,"use store.replaceState() to explicit replace store state.")},De.prototype.commit=function(e,t,n){var r=this,o=ue(e,t,n),i=o.type,s=o.payload,a=o.options,c={type:i,payload:s},u=this._mutations[i];u?(this._withCommit((function(){u.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(c,r.state)})),a&&a.silent&&console.warn("[vuex] mutation type: "+i+". Silent option has been removed. Use the filter functionality in the vue-devtools")):console.error("[vuex] unknown mutation type: "+i)},De.prototype.dispatch=function(e,t){var n=this,r=ue(e,t),o=r.type,i=r.payload,s={type:o,payload:i},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(u){console.warn("[vuex] error in before action subscribers: "),console.error(u)}var c=a.length>1?Promise.all(a.map((function(e){return e(i)}))):a[0](i);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(u){console.warn("[vuex] error in after action subscribers: "),console.error(u)}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(u){console.warn("[vuex] error in error action subscribers: "),console.error(u)}t(e)}))}))}console.error("[vuex] unknown action type: "+o)},De.prototype.subscribe=function(e,t){return J(e,this._subscribers,t)},De.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return J(n,this._actionSubscribers,t)},De.prototype.watch=function(e,t,n){var r=this;return X("function"===typeof e,"store.watch only accepts a function."),Object(i["watch"])((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},De.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},De.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),X(Array.isArray(e),"module path must be a string or an Array."),X(e.length>0,"cannot register the root module by using registerModule."),this._modules.register(e,t),te(this,this.state,e,this._modules.get(e),n.preserveState),ee(this,this.state)},De.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),X(Array.isArray(e),"module path must be a string or an Array."),this._modules.unregister(e),this._withCommit((function(){var n=ce(t.state,e.slice(0,-1));delete n[e[e.length-1]]})),Z(this)},De.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),X(Array.isArray(e),"module path must be a string or an Array."),this._modules.isRegistered(e)},De.prototype.hotUpdate=function(e){this._modules.update(e),Z(this,!0)},De.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(De.prototype,Ne);var Be=We((function(e,t){var n={};return He(t)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),Ge(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=qe(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof o?o.call(this,t,n):t[o]},n[r].vuex=!0})),n})),Ue=We((function(e,t){var n={};return He(t)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),Ge(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var i=qe(this.$store,"mapMutations",e);if(!i)return;r=i.context.commit}return"function"===typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n})),Fe=We((function(e,t){var n={};return He(t)||console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),Ge(t).forEach((function(t){var r=t.key,o=t.val;o=e+o,n[r]=function(){if(!e||qe(this.$store,"mapGetters",e)){if(o in this.$store.getters)return this.$store.getters[o];console.error("[vuex] unknown getter: "+o)}},n[r].vuex=!0})),n})),ze=We((function(e,t){var n={};return He(t)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),Ge(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var i=qe(this.$store,"mapActions",e);if(!i)return;r=i.context.dispatch}return"function"===typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n}));function Ge(e){return He(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function He(e){return Array.isArray(e)||Q(e)}function We(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function qe(e,t,n){var r=e._modulesNamespaceMap[n];return r||console.error("[vuex] module namespace not found in "+t+"(): "+n),r}n("c740"),n("14d9"),n("a434"),n("b64b"),n("07ac");var $e={videoSources:[],audioSources:[],selectedVideoSource:{name:"none"},selectedAudioSource:{name:"none"},isAudioOnly:!1,audioFollowsVideo:!1,stream:null,sourceRemoteTracks:[],mainLabel:"Main",transceiverSourceState:{},trackIdMidMap:{}},Qe={namespaced:!0,state:$e,mutations:{setSelectedSource:function(e,t){var n=t.kind,r=t.selectedSource;"video"===n?e.selectedVideoSource=r:"audio"===n&&(e.selectedAudioSource=r)},setSources:function(e,t){var n=t.kind,r=t.sources;if("video"===n){e.videoSources=r;var o=r[0];"0"===(null===o||void 0===o?void 0:o.mid)&&(e.transceiverSourceState[o.mid]=o)}else"audio"===n&&(e.audioSources=r)},removeSource:function(e,t){var n=t.kind,r=t.sourceId;if("video"===n){var o=e.videoSources.findIndex((function(e){return e.sourceId===r}));-1!==o&&e.videoSources.splice(o,1)}else if("audio"===n){var i=e.audioSources.findIndex((function(e){return e.sourceId===r}));-1!==i&&e.audioSources.splice(i,1)}},setStream:function(e,t){e.stream=t},setIsAudioOnly:function(e,t){e.isAudioOnly=t},setAudioFollowsVideo:function(e,t){e.audioFollowsVideo=t},addTrackIdMidMapping:function(e,t){e.trackIdMidMap[t.mid]=t.trackId},addSourceRemoteTrack:function(e,t){e.sourceRemoteTracks.push(t);var n=e.videoSources.findIndex((function(e){return e.sourceId===t.sourceId}));if(-1!==n){var r=t.transceiver.mid;e.videoSources[n].mid=r,e.transceiverSourceState[r]=e.videoSources[n]}},replaceSourceRemoteTrack:function(e,t){var n=t.sourceRemoteTrack,r=t.remoteTrackIndex;e.sourceRemoteTracks[r]=n;var o=e.videoSources.findIndex((function(e){return e.sourceId===n.sourceId}));-1!==o&&(e.videoSources[o].mid=n.transceiver.mid,e.transceiverSourceState[n.transceiver.mid]=e.videoSources[o])},removeSourceRemoteTrack:function(e,t){var n=e.sourceRemoteTracks.findIndex((function(e){return e.sourceId===t}));-1!==n&&e.sourceRemoteTracks.splice(n,1)},removeTransceiverSourceState:function(e,t){var n=Object.keys(e.transceiverSourceState).find((function(n){return e.transceiverSourceState[n].sourceId===t})),r=Object.keys(e.transceiverSourceState).find((function(t){return null===e.transceiverSourceState[t].sourceId}));if(-1!==n&&null!==t){var o=Object.values(e.sourceRemoteTracks).find((function(e){return e.sourceId===t})).transceiver.mid;if("0"===e.transceiverSourceState[n].mid)if(o!==r){var i=e.transceiverSourceState[o];e.transceiverSourceState[n]=d(d({},e.transceiverSourceState[r]),{},{mid:n}),e.transceiverSourceState[r]=d(d({},i),{},{mid:r}),delete e.transceiverSourceState[o]}else o=e.videoSources.find((function(e){return e.sourceId===t})).mid,delete e.transceiverSourceState[o],e.transceiverSourceState[n]=e.videoSources[n];else e.transceiverSourceState[n]=d(d({},e.transceiverSourceState[o]),{},{mid:"".concat(n)}),delete e.transceiverSourceState[o]}else-1!==n&&"0"!==e.transceiverSourceState[n].mid&&(e.transceiverSourceState[n]=d(d({},e.transceiverSourceState[0]),{},{mid:"".concat(n)}),delete e.transceiverSourceState[0])},setMainLabel:function(e,t){e.mainLabel=t},updateTransceiverSourceState:function(e,t){var n=t.source,r=e.transceiverSourceState[e.videoSources[0].mid],o=Object.keys(e.transceiverSourceState).find((function(t){return e.transceiverSourceState[t].mid===n.mid})),i=e.transceiverSourceState[o];e.transceiverSourceState[e.videoSources[0].mid]=d(d({},i),{},{mid:e.videoSources[0].mid}),e.transceiverSourceState[o]=d(d({},r),{},{mid:o})}},getters:{getVideoSources:function(e){return e.videoSources},getAudioSources:function(e){return e.audioSources},getVideoHasMain:function(e){return-1!==e.videoSources.findIndex((function(e){return null===e.sourceId}))},getAudioHasMain:function(e){return-1!==e.audioSources.findIndex((function(e){return null===e.sourceId}))},getSelectedVideoSource:function(e){return e.selectedVideoSource},getTransceiverSourceState:function(e){return e.transceiverSourceState},getTrackIdMidMap:function(e){return e.trackIdMidMap}}},Ke={medias:{active:[],inactive:[],layers:[]},selectedQuality:{name:"Auto"},mainTransceiverMedias:{active:[],inactive:[],layers:[]}},Xe={namespaced:!0,state:Ke,mutations:{setMainTransceiverMedias:function(e,t){e.mainTransceiverMedias=t},setMedias:function(e,t){e.medias=t},setSelectedQuality:function(e,t){e.selectedQuality=t},selectQuality:function(e,t){e.selectedQuality=t}},getters:{getActiveMedias:function(e){return e.medias},getActiveMainTransceiverMedias:function(e){return e.mainTransceiverMedias.active}}},Ye={video:null,playing:!1,muted:!1,player:null,srcObject:null,pip:null,autoPlayMuted:!1,volume:"1",isMobile:!1,dropup:"",fullscreen:!1,isLive:!1,isLoading:!0,trackWarning:!1,castOptions:{},castAvailable:!1,castIsConnected:!1,castDevice:{},viewerCount:null,reconnection:{status:!1,error:null,timeout:null},currentElementRef:"player",isMigrating:!1,viewerMigratingEvent:!1,migrateListenerIsSet:!1,isSplittedView:!1,previousSplitState:!1,isGrid:!1,isSelectingLayer:!1,hideToast:!1,selectingLayerTimeouts:null},Je={namespaced:!0,state:Ye,mutations:{setVideo:function(e,t){e.video=t},setDrmAudio:function(e,t){e.drmAudio=t},setPlaying:function(e,t){e.isMigrating||(e.playing=t)},setPip:function(e,t){e.pip=t},stopVideo:function(e){e.player.stop(),e.player.currentTime=null},setSrcObject:function(e,t){e.srcObject=t},setStateSrcObject:function(e,t){null!==t&&(e.srcObject=t)},setCurrentElementRef:function(e,t){e.currentElementRef=t},setVideoVolume:function(e,t){e.video.volume=t,e.drmAudio&&(e.drmAudio.volume=t)},setVideoMuted:function(e,t){e.video.muted=t,e.muted=t,e.drmAudio&&(e.drmAudio.muted=t)},setVideoAutoplay:function(e,t){e.video.autoplay=t,e.drmAudio&&(e.drmAudio.autoplay=t)},setVideoSource:function(e,t){t||(e.video.src=""),e.video.srcObject=t},setAutoPlayMuted:function(e,t){e.autoPlayMuted=t},setDropup:function(e,t){e.dropup=t!=e.dropup?t:""},setMobile:function(e,t){e.isMobile=t},setIsLive:function(e,t){!t&&document.pictureInPictureElement&&document.exitPictureInPicture(),e.isLive=t},setIsLoading:function(e,t){e.isLoading=t,e.castOptions.loading=t},toggleFullscreen:function(e){e.fullscreen=!e.fullscreen},setTrackWarning:function(e,t){e.trackWarning=t},setCastOptions:function(e,t){e.castOptions=t},setCastDevice:function(e,t){e.castDevice=t},setCastAvailable:function(e,t){e.castAvailable=t},setCastIsConnected:function(e,t){e.castIsConnected=t},setViewerCount:function(e,t){e.viewerCount=t},handleReconnection:function(e,t){var n=t.error,r=t.timeout;e.reconnection.error=n,e.reconnection.timeout=r,e.reconnection.status=!0,setTimeout((function(){e.reconnection.status=!1,e.reconnection.error=null,e.reconnection.timeout=null}),r)},setIsMigrating:function(e,t){e.isMigrating=t},setViewerMigratingEvent:function(e,t){e.viewerMigratingEvent=t},setMigrateListenerIsSet:function(e,t){e.migrateListenerIsSet=t},setIsSplittedView:function(e,t){e.isSplittedView=t},setPreviousSplitState:function(e,t){e.isMigrating||(e.previousSplitState=t)},setIsGrid:function(e,t){e.isGrid=t},setIsSelectingLayer:function(e,t){e.isSelectingLayer=t},setHideToastError:function(e,t){e.hideToast=t},setSelectingLayerTimeout:function(e,t){e.selectingLayerTimeouts=t}},getters:{}},Ze={millicastView:null,eventListeners:{reconnect:null,stats:null,broadcastEvent:null},trackEvent:{audio:{track:null,transceiver:[null]},video:{track:null,transceiver:[null]}}},et={namespaced:!0,state:Ze,mutations:{setMillicastView:function(e,t){e.millicastView=t}}},tt=(n("45fc"),["play","volume","pip","fullscreen","cast","liveBadge","userCount","settings"]),nt={audioOnly:!1,autoplay:!0,videoOnly:!1,controls:!0,directorUrl:null,hideButtons:[],muted:!0,placeholderImg:null,streamId:null,token:null,forcePlayoutDelay:!1,multisource:!1,audioFollowsVideo:!1,layout:null,showLabels:!0,startingQuality:null,hideToast:null,mainLabel:null,drm:!1,metadata:!1,mediaBufferMs:0,showTimer:!1,abrStrategy:null,abrBandwidth:null};function rt(e){var t=e.streamId,n=e.audioOnly,r=e.videoOnly,o=e.token,i=e.image,s=e.directorUrl,a=e.hideButtons,c=e.autoplay,u=e.muted,l=e.noDelay,f=e.multisource,p=e.audioFollowsVideo,h=e.layout,m=e.showLabels,v=e.startingQuality,g=e.hideToast,b=e.mainLabel,y=e.drm,w=e.forcePlayoutDelayMin,S=e.forcePlayoutDelayMax,E=e.metadata,C=e.mediaBufferMs,O=e.showTimer,k=e.abrStrategy,I=e.abrBandwidth,x={};x.streamId=t,x.videoOnly=null!==r&&void 0!==r&&r,x.audioOnly=null!==n&&void 0!==n&&n,x.token=o,x.placeholderImg=i,x.directorUrl=s,x.hideButtons=null!==a&&void 0!==a?a:[],x.muted=null!==u&&void 0!==u&&u,lt.commit("Controls/setVideoMuted",u),x.autoplay=null===c||void 0===c||c,lt.commit("Controls/setVideoAutoplay",c),x.multisource=null!==f&&void 0!==f&&f,x.audioFollowsVideo=null!==p&&void 0!==p&&p,x.layout=h,x.showLabels=m,x.drm=null!==y&&void 0!==y&&y,x.metadata=E,f&&lt.commit("Controls/setIsSplittedView",!0),p&&lt.commit("Sources/setAudioFollowsVideo",!0),l&&(x.forcePlayoutDelay={min:0,max:0}),x.layout&&"grid"===x.layout&&lt.commit("Controls/setIsGrid",!0),null!==v&&(x.startingQuality=v,lt.commit("Controls/setIsSelectingLayer",!0)),null!==g&&(x.hideToast=g,lt.commit("Controls/setHideToastError",g)),b&&(x.mainLabel=b,lt.commit("Sources/setMainLabel",x.mainLabel)),w&&S&&parseInt(w)&&parseInt(S)&&(x.forcePlayoutDelay={min:parseInt(w),max:parseInt(S)}),parseInt(C)&&(x.mediaBufferMs=parseInt(C)),x.showTimer=null!==O&&void 0!==O&&O;var T=["quality","bandwidth","performance"];k&&T.some((function(e){return e===k.toLowerCase()}))&&(x.abrStrategy=k),isNaN(I)||(x.abrBandwidth=parseInt(I)),lt.commit("Params/setViewerOptions",d(d({},nt),x))}var ot={NODE_ENV:"",VUE_APP_TURN_ENDPOINT:"",VUE_APP_LIVEWS_ENDPOINT:"",VUE_APP_DIRECTOR_ENDPOINT:"",VUE_APP_PUBLIC_PATH:"",VUE_APP_REPORT_URL:"",VUE_APP_CHROMECAST_ID:""};function it(e){var t,n,r,o,i,s,a,c={NODE_ENV:null!==(t=null===e||void 0===e?void 0:e.NODE_ENV)&&void 0!==t?t:Object({NODE_ENV:"production",VUE_APP_DEFAULT_TURN_ENDPOINT:"",VUE_APP_DEFAULT_LIVEWS_ENDPOINT:"",VUE_APP_DEFAULT_DIRECTOR_ENDPOINT:"https://director.millicast.com/",VUE_APP_DEFAULT_PUBLIC_PATH:"/",VUE_APP_DEFAULT_CHROMECAST_ID:"EC3A02DA",VUE_APP_DEFAULT_REPORT_URL:"https://playback-report.millicast.com",BASE_URL:"/"}).DEFAULT_NODE_ENV,VUE_APP_TURN_ENDPOINT:null!==(n=null===e||void 0===e?void 0:e.VUE_APP_TURN_ENDPOINT)&&void 0!==n?n:"",VUE_APP_LIVEWS_ENDPOINT:null!==(r=null===e||void 0===e?void 0:e.VUE_APP_LIVEWS_ENDPOINT)&&void 0!==r?r:"",VUE_APP_DIRECTOR_ENDPOINT:null!==(o=null===e||void 0===e?void 0:e.VUE_APP_DIRECTOR_ENDPOINT)&&void 0!==o?o:"https://director.millicast.com/",VUE_APP_PUBLIC_PATH:null!==(i=null===e||void 0===e?void 0:e.VUE_APP_PUBLIC_PATH)&&void 0!==i?i:"/",VUE_APP_REPORT_URL:null!==(s=null===e||void 0===e?void 0:e.VUE_APP_REPORT_URL)&&void 0!==s?s:"https://playback-report.millicast.com",VUE_APP_CHROMECAST_ID:null!==(a=null===e||void 0===e?void 0:e.VUE_APP_CHROMECAST_ID)&&void 0!==a?a:"EC3A02DA"};lt.commit("Params/setEnvironmentOptions",d(d({},ot),c))}var st={viewer:nt,environment:ot},at={namespaced:!0,state:st,mutations:{setViewerOptions:function(e,t){e.viewer=t},setEnvironmentOptions:function(e,t){e.environment=t}}},ct={type:"",message:"",showError:!1},ut={namespaced:!0,state:ct,mutations:{setMessage:function(e,t){e.message=t},setType:function(e,t){e.type=t},setShowError:function(e,t){e.showError=t}}},lt=_e({state:{sources:[]},mutations:{},actions:{},modules:{Sources:Qe,Layers:Xe,Controls:Je,ViewConnection:et,Params:at,Errors:ut}}),dt=lt.state,ft=function(){var e;return null===(e=dt.Params.viewer.streamId)||void 0===e||null===(e=e.match(/^(.*?)\/.*$/))||void 0===e?void 0:e[1]},pt=function(){var e;return null===(e=dt.Params.viewer.streamId)||void 0===e||null===(e=e.match(/^.*?\/(.*)$/))||void 0===e?void 0:e[1]},ht=(n("99af"),n("12a8"),n("5319"),new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"})),mt=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function vt(e){return Object.assign({muted:!1,timeout:250,inline:!1},e)}function gt(e,t){var n=e.muted,r=e.timeout,o=e.inline,i=t(),s=i.element,a=i.source,c=void 0,u=void 0,l=void 0;return s.muted=n,!0===n&&s.setAttribute("muted","muted"),!0===o&&s.setAttribute("playsinline","playsinline"),s.src=a,new Promise((function(e){c=s.play(),u=setTimeout((function(){l(!1,new Error("Timeout "+r+" ms has been reached"))}),r),l=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.remove(),s.srcObject=null,clearTimeout(u),e({result:t,error:n})},void 0!==c?c.then((function(){return l(!0)})).catch((function(e){return l(!1,e)})):l(!0)}))}function bt(e){return e=vt(e),gt(e,(function(){return{element:document.createElement("video"),source:URL.createObjectURL(mt)}}))}function yt(e){return e=vt(e),gt(e,(function(){return{element:document.createElement("audio"),source:URL.createObjectURL(ht)}}))}var wt={audio:yt,video:bt},St=wt,Et=lt.commit,Ct=lt.state,Ot=function(){kt(),It(),xt()},kt=function(){var e;(Ct.Params.environment.VUE_APP_DIRECTOR_ENDPOINT||Ct.Params.viewer.directorUrl)&&M["Director"].setEndpoint(null!==(e=Ct.Params.viewer.directorUrl)&&void 0!==e?e:Ct.Params.environment.VUE_APP_DIRECTOR_ENDPOINT)},It=function(){Ct.Params.environment.VUE_APP_LIVEWS_ENDPOINT&&M["Director"].setLiveDomain(Ct.Params.environment.VUE_APP_LIVEWS_ENDPOINT)},xt=function(){Ct.Params.environment.VUE_APP_TURN_ENDPOINT&&M["PeerConnection"].setTurnServerLocation(Ct.Params.environment.VUE_APP_TURN_ENDPOINT)},Tt=function(e,t){if(!t||!e)throw new Error("Stream ID not provided.");Ot();var n=function(){var n=M["Director"].getSubscriber(t,e,Ct.Params.viewer.token,Ct.Params.viewer.drm);return n.catch((function(e){var t="".concat(e);if(!t.includes("stream not being published")){var n=t.replace("FetchError: ","");Et("Errors/setMessage",n),Et("Errors/setType","SubscriberError"),Et("Errors/setShowError",!0)}})),n},r=new M["View"](t,n);window.millicastView=r,window.__defineGetter__("peer",(function(){return r.getRTCPeerConnection()})),Et("ViewConnection/setMillicastView",r)},jt=function(){var e=l(c().m((function e(){var t,n,r,o,i;return c().w((function(e){while(1)switch(e.p=e.n){case 0:if(t=Ct.ViewConnection.millicastView,!t.isActive()){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,At();case 2:return n={enableDRM:Ct.Params.viewer.drm,events:["active","inactive","layers","viewercount"],absCaptureTime:!0},Ct.Params.viewer.audioOnly&&(n.disableVideo=!0),Ct.Params.viewer.videoOnly&&(n.disableAudio=!0),Ct.Params.viewer.forcePlayoutDelay&&(n.forcePlayoutDelay=Ct.Params.viewer.forcePlayoutDelay),Ct.Params.viewer.metadata&&(n.metadata=Ct.Params.viewer.metadata),Ct.Params.viewer.abrStrategy&&(n.abrConfiguration={strategy:Ct.Params.viewer.abrStrategy},Ct.Params.viewer.abrBandwidth&&(n.abrConfiguration=d(d({},n.abrConfiguration),{},{metadata:{bitrate:Ct.Params.viewer.abrBandwidth}}))),e.n=3,t.connect(n);case 3:Lt(),e.n=6;break;case 4:if(e.p=4,i=e.v,o=null===(r=i.response)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message,Et("Controls/setIsLoading",!1),Et("Controls/setIsLive",!1),t.reconnect(),o){e.n=5;break}return e.a(2);case 5:if(o.toLowerCase().includes("stream not being published")){e.n=6;break}throw new Error("".concat(o.charAt(0).toUpperCase()).concat(o.slice(1)));case 6:return e.a(2)}}),e,null,[[1,4]])})));return function(){return e.apply(this,arguments)}}(),Pt=function(){var e=Ct.ViewConnection.millicastView;e.on("track",function(){var e=l(c().m((function e(t){var n,r,o;return c().w((function(e){while(1)switch(e.n){case 0:if(!Ct.Params.viewer.drm){e.n=1;break}return e.a(2);case 1:if("video"===(null===(n=t.track)||void 0===n?void 0:n.kind)&&Et("Sources/addTrackIdMidMapping",{trackId:null===(r=t.track)||void 0===r?void 0:r.id,mid:null===(o=t.transceiver)||void 0===o?void 0:o.mid}),!t.streams.length){e.n=2;break}return e.n=2,Rt(t.streams[0]);case 2:Ct.ViewConnection.trackEvent[t.track.kind].transceiver[0]?Ct.ViewConnection.trackEvent[t.track.kind].transceiver.push(t.transceiver):Ct.ViewConnection.trackEvent[t.track.kind].transceiver[0]=t.transceiver,Ct.ViewConnection.trackEvent[t.track.kind].track=!0;case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ct.Params.viewer.metadata&&e.on("metadata",(function(e){var t=new CustomEvent("metadata",{detail:{metadata:e}});window.dispatchEvent(t)}))},Rt=function(){var e=l(c().m((function e(t){var n,r,o,s,a;return c().w((function(e){while(1)switch(e.n){case 0:if(n=Ct.Controls.video,r=Ct.Controls.drmAudio,Lt(),Et("Controls/setSrcObject",t),!n.srcObject||n.srcObject.id===t.id||Ct.Controls.viewerMigratingEvent){e.n=1;break}return e.a(2);case 1:if(!n.srcObject||n.srcObject.id===t.id||!Ct.Controls.viewerMigratingEvent){e.n=3;break}return Et("Controls/setPreviousSplitState",Ct.Controls.isSplittedView),Et("Controls/setIsMigrating",!0),Et("Controls/setIsSplittedView",!1),e.n=2,Object(i["nextTick"])();case 2:o="player"===Ct.Controls.currentElementRef?"player2":"player",s=document.getElementById(o),a=document.getElementById("drm-audio-"+o),s.srcObject=t,s.autoplay=Ct.Controls.playing,s.muted=Ct.Controls.muted,On(),Cn(s),s.onloadedmetadata=l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:Et("Controls/setVideo",s),Et("Controls/setDrmAudio",a),Et("Controls/setCurrentElementRef",o),Et("Controls/setIsMigrating",!1),Et("Controls/setIsSplittedView",Ct.Controls.previousSplitState),document.pictureInPictureElement&&s.requestPictureInPicture();case 1:return e.a(2)}}),e)}))),Et("Controls/setViewerMigratingEvent",!1),Et("Controls/setMigrateListenerIsSet",!1),Lt(),e.n=4;break;case 3:En({videoPlayer:n,srcObject:t,drmAudio:r});case 4:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(){var e=l(c().m((function e(){var t,n;return c().w((function(e){while(1)switch(e.n){case 0:if(Et("Controls/setVideoAutoplay",Ct.Params.viewer.autoplay),!Ct.Params.viewer.autoplay){e.n=2;break}return e.n=1,St.video({muted:Ct.Params.viewer.muted});case 1:t=e.v,n=Ct.Params.viewer.muted?Ct.Params.viewer.muted:!t.result,Et("Controls/setVideoMuted",n),Et("Controls/setAutoPlayMuted",n);case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Vt=function(){var e;Ct.ViewConnection.eventListeners.reconnect=null!==(e=Ct.ViewConnection.eventListeners.reconnect)&&void 0!==e?e:Ct.ViewConnection.millicastView.on("reconnect",(function(e){var t=e.timeout,n=e.error,r=null===n||void 0===n?void 0:n.toString().toLowerCase();null!==r&&void 0!==r&&r.toLowerCase().includes("stream not being published")?(Et("Controls/setIsLoading",!1),Et("Controls/setIsLive",!1)):(Et("Controls/setPreviousSplitState",Ct.Controls.isSplittedView),Et("Controls/setVideoSource",null),Et("Controls/setSrcObject",null),Et("Controls/setIsSplittedView",!1),Et("Controls/setViewerMigratingEvent",!1),Et("Controls/setMigrateListenerIsSet",!1),Et("Controls/handleReconnection",{timeout:t,error:n}))}))},Mt=function(){var e;null===(e=Ct.ViewConnection.millicastView)||void 0===e||e.stop(),Et("Controls/setVideoSource",null),Et("Controls/setSrcObject",null)},Lt=function(){Ct.Controls.viewerMigratingEvent||Ct.Controls.migrateListenerIsSet||!Ct.ViewConnection.millicastView.signaling||setTimeout((function(){Ct.ViewConnection.millicastView.signaling.on("migrate",(function(){Et("Controls/setViewerMigratingEvent",!0)})),Et("Controls/setMigrateListenerIsSet",!0)}),50)},_t=(n("4160"),n("3c65"),n("7d54"),n("a732"),n("159b"),lt.commit),Dt=lt.state,Nt=null,Bt=null,Ut=null,Ft=function(){var e=l(c().m((function e(){var t,n;return c().w((function(e){while(1)switch(e.n){case 0:if(Ut){e.n=2;break}return e.n=1,new Promise((function(e){return setTimeout(e,20)}));case 1:Ut=Dt.Params.environment.VUE_APP_CHROMECAST_ID,e.n=0;break;case 2:t=function(){var e=l(c().m((function e(t){var n,r,o;return c().w((function(e){while(1)switch(e.n){case 0:n=window,r=n.cast,o=t,e.n=o===r.framework.CastState.NO_DEVICES_AVAILABLE?1:o===r.framework.CastState.NOT_CONNECTED?2:o===r.framework.CastState.CONNECTED?3:5;break;case 1:return _t("Controls/setCastAvailable",!1),e.a(3,6);case 2:return _t("Controls/setCastAvailable",!0),e.a(3,6);case 3:return e.n=4,zt();case 4:return e.a(3,6);case 5:return e.a(3,6);case 6:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(e){var t=window,n=t.cast;switch(e.sessionState){case n.framework.SessionState.SESSION_ENDED:Bt=null,xn(),_t("Controls/setCastIsConnected",!1);break;default:break}},window["__onGCastApiAvailable"]=function(){var e=l(c().m((function e(r){var o;return c().w((function(e){while(1)switch(e.n){case 0:r&&(o=setInterval(l(c().m((function e(){var r,i,s,a;return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,null===(r=window.cast)||void 0===r?void 0:r.framework.CastContext.getInstance();case 1:if(Nt=e.v,!Nt){e.n=6;break}if(!window.chrome.cast||!window.chrome.cast.AutoJoinPolicy){e.n=4;break}return Nt.setOptions({autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.PAGE_SCOPED,receiverApplicationId:Ut}),i=window.cast.framework.CastContextEventType,s=i.CAST_STATE_CHANGED,a=i.SESSION_STATE_CHANGED,e.n=2,Nt.addEventListener(s,function(){var e=l(c().m((function e(n){var r;return c().w((function(e){while(1)switch(e.n){case 0:return r=n.castState,e.n=1,t(r);case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.n=3,Nt.addEventListener(a,function(){var e=l(c().m((function e(t){return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,n(t);case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.n=5;break;case 4:_t("Controls/setCastAvailable",!1);case 5:clearInterval(o);case 6:return e.a(2)}}),e)}))),50));case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}();case 3:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=function(){var e=l(c().m((function e(){var t,n,r,o,i,s,a,u,l,d,f,p;return c().w((function(e){while(1)switch(e.n){case 0:return i=window,s=i.chrome,a=Dt.Controls.castOptions,u=a.streamId,l=a.token,d={audioSource:Dt.Sources.selectedAudioSource,videoSource:Dt.Sources.selectedVideoSource,audioMediaId:null!==(t=null===(n=Dt.ViewConnection.trackEvent)||void 0===n||null===(n=n.audio)||void 0===n?void 0:n.transceiver.mid)&&void 0!==t?t:null,videoMediaId:null!==(r=null===(o=Dt.ViewConnection.trackEvent)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.transceiver.mid)&&void 0!==r?r:null},e.n=1,Nt.getCurrentSession();case 1:Bt=e.v,f=new s.cast.media.MediaInfo(u,""),f.customData={streamId:u,token:l,multiSourceOptions:d},f.streamType=s.cast.media.StreamType.LIVE,p=new s.cast.media.LoadRequest(f),Bt.loadMedia(p).then((function(){Tn(),_t("Controls/setCastDevice",Bt.getCastDevice()),_t("Controls/setCastIsConnected",!0)})).catch((function(e){console.log(e)}));case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();function Gt(e){if(Array.isArray(e))return e}function Ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wt(e){return Gt(e)||h(e)||m(e)||Ht()}n("13d5"),n("4e82"),n("9485"),n("4fad"),n("c1f9");var qt=lt.commit,$t=lt.state,Qt=["bps","kbps","mbps","gbps"],Kt={2:["High","Low"],3:["High","Medium","Low"]},Xt=[],Yt=function(e){var t=e.data,n=[],r=[],o={0:t.medias[0]},i=Object.values(o),s=Object.entries(t.medias),a=Wt(s),c=a.slice(1),u=Object.fromEntries(c);if(qt("Layers/setMedias",t.medias),tn(u),i.forEach((function(e){var t,o,i,s,a;1===(null===e||void 0===e?void 0:e.active.length)&&(null===e||void 0===e||null===(t=e.active[0])||void 0===t?void 0:t.layers.length)>1?(null===(o=e.active[0])||void 0===o||null===(o=o.layers)||void 0===o||o.forEach((function(t){n.some((function(e){return e.spatialLayerId===t.spatialLayerId}))||(t.id=e.active[0].id,t.selectId=t.spatialLayerId,t.disabled=!t.bitrate,n.push(t))})),null===(i=e.inactive[0])||void 0===i||null===(i=i.layers)||void 0===i||i.forEach((function(e){r.some((function(t){return t.spatialLayerId===e.spatialLayerId}))||r.push(e)}))):(null===(s=e.active)||void 0===s||s.forEach((function(e){n.some((function(t){return t.id===e.id}))||(e.selectId=e.id,e.disabled=!e.bitrate,n.push(e))})),null===(a=e.inactive)||void 0===a||a.forEach((function(e){r.some((function(t){return t.id===e.id}))||r.push(e)})))})),n.sort((function(e,t){return t.bitrate-e.bitrate})),n.length>=2){n.sort((function(e,t){return t.height-e.height}));var l=Kt[n.length]||[];n.forEach((function(e,t){e.name=e.height?"".concat(e.height,"p"):l[t]||en(e.bitrate)})),n.unshift({name:"Auto"})}n.length!=$t.Layers.mainTransceiverMedias.active.length&&qt("Layers/setSelectedQuality",{name:"Auto"}),qt("Layers/setMainTransceiverMedias",{active:n,inactive:r})},Jt=function(){qt("Layers/setMainTransceiverMedias",{active:[],inactive:[]}),qt("Layers/setSelectedQuality",{name:"Auto"})},Zt=function(e){var t,n,r,o={};o.encodingId=e.id,o.encodingId||null===e.spatialLayerId||(o.spatialLayerId=parseInt(e.spatialLayerId));var i=$t.Sources.selectedVideoSource,s=null===i||void 0===i?void 0:i.mid;null!==(t=$t.Layers.medias[s])&&void 0!==t&&t.layers||(s="0");var a=null===(n=$t.Layers.medias[s])||void 0===n?void 0:n.layers,c=a.find((function(t){return t.simulcastIdx===e.simulcastIdx}));null===(r=$t.ViewConnection.millicastView)||void 0===r||r.project(i.sourceId,[{mediaId:i.mid,layer:c,media:"video",promote:!c}]),qt("Layers/selectQuality",e)},en=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e/1e3;return n<1||n>1&&t+1>Qt.length?"".concat(Math.round(100*e)/100," ").concat(Qt[t]):n>1?en(n,t+1):void 0},tn=function(e){var t=$t.Controls,n=t.isSplittedView,r=t.isGrid;if(n&&!r){var o=Object.keys(Xt),i=Object.keys(e),s=i.filter((function(e){return!o.includes(e)})),a=s.reduce((function(t,n){var r=e[n].active.length>0?e[n].active:null;return null!=r&&(t[n]=r),t}),{}),c=Object.keys(a);if(0===c.length)return;var u=$t.Sources.transceiverSourceState,l=c.reduce((function(e,t){return e.push(u[t]),e}),[]);l.forEach((function(e){var t;null!==e.sourceId&&e.mid in a&&(a[e.mid].sort((function(e,t){return t.id-e.id})),null===(t=$t.ViewConnection.millicastView)||void 0===t||t.project(e.name,[{mediaId:e.mid,layer:{encodingId:a[e.mid].pop().id},trackId:e.trackId,media:"video"}]))})),Xt=e}},nn=function(e){e||(Xt=[])};Object(i["watch"])((function(){return $t.Controls.isSplittedView}),nn,{deep:!0});var rn=lt.commit,on=lt.state,sn=lt.getters,an=function(e){var t=e.sourceId||null;e.tracks.forEach((function(e){"video"===e.media&&(cn(t),ln("video",t,e.trackId),1===on.Sources.videoSources.length&&rn("Sources/setIsAudioOnly",!1)),"audio"===e.media&&(ln("audio",t,e.trackId),1===on.Sources.audioSources.length&&rn("Sources/setIsAudioOnly",!on.Sources.videoSources.length))})),un()?setTimeout(dn,1e3):on.Controls.trackWarning&&rn("Controls/setTrackWarning",!1)},cn=function(){var e=l(c().m((function e(t){var n,r;return c().w((function(e){while(1)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:n=on.Sources.sourceRemoteTracks.findIndex((function(e){return e.sourceId===t})),r=new MediaStream,setTimeout(l(c().m((function e(){var o,i;return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,on.ViewConnection.millicastView.addRemoteTrack("video",[r]);case 1:o=e.v,i={transceiver:o,mediaStream:r,sourceId:t},-1!==n?rn("Sources/replaceSourceRemoteTrack",{sourceRemoteTrack:i,remoteTrackIndex:n}):rn("Sources/addSourceRemoteTrack",i);case 2:return e.a(2)}}),e)}))),50);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){return!sn["Sources/getVideoHasMain"]&&on.Sources.videoSources.length||!sn["Sources/getAudioHasMain"]&&on.Sources.audioSources.length},ln=function(e,t,n){var r={name:null===t?on.Params.viewer.mainLabel:t,sourceId:t,trackId:n,mid:null===t?"video"===e?"0":"1":null},o="video"===e?on.Sources.videoSources:on.Sources.audioSources,i=Array.from(o);if(!i.some((function(e){return e.sourceId===r.sourceId}))){if(null===r.sourceId){i.unshift(r);var s="video"===e?on.Sources.selectedVideoSource:on.Sources.selectedAudioSource;s.name!==on.Params.viewer.mainLabel&&(rn("Sources/setSelectedSource",{kind:e,selectedSource:r}),hn({kind:e,source:r}),rn("Sources/setMainLabel",on.Params.viewer.mainLabel))}else i.push(r);rn("Sources/setSources",{kind:e,sources:i})}},dn=function(){un()&&!on.Sources.trackWarning&&(""===on.Controls.dropup&&rn("Controls/setDropup","settings"),rn("Controls/setTrackWarning",!0))},fn=function(e){on.Layers.mainTransceiverMedias.active.length&&Zt({name:"Auto"});var t=on.Sources.videoSources.findIndex((function(t){return t.sourceId===e})),n=on.Sources.audioSources.findIndex((function(t){return t.sourceId===e}));-1!==t&&(pn("video",e),on.Sources.videoSources.length||rn("Sources/setIsAudioOnly",!0)),-1!==n&&pn("audio",e)},pn=function(e,t){var n,r,o="video"===e?on.Sources.selectedVideoSource:on.Sources.selectedAudioSource,i="video"===e?on.Sources.videoSources:on.Sources.audioSources;i=i.filter((function(e){return e.sourceId!==t})),i.length?t!==o.sourceId&&null!==t||(o=i[0],on.Sources.isAudioOnly||rn("Sources/setMainLabel",i[0].name)):o={name:"none"},"video"===e&&(n=Object.keys(on.Sources.transceiverSourceState).find((function(e){return on.Sources.transceiverSourceState[e].sourceId===t})),null!==t&&(r=Object.values(on.Sources.sourceRemoteTracks).find((function(e){return e.sourceId===t})).transceiver.mid),on.Controls.isSplittedView&&(null!==on.Sources.selectedVideoSource.sourceId&&null===t?(vn(on.Sources.selectedVideoSource.sourceId,"".concat(n),on.Sources.selectedVideoSource.trackId),on.Params.viewer.showLabels&&(document.getElementById("sideLabel".concat(on.Sources.selectedVideoSource.mid)).textContent=on.Sources.selectedVideoSource.sourceId)):null===on.Sources.selectedVideoSource.sourceId&&null!==t?n!==r&&(vn(on.Sources.transceiverSourceState[r].sourceId,on.Sources.transceiverSourceState[n].mid),on.Params.viewer.showLabels&&(document.getElementById("sideLabel".concat(on.Sources.transceiverSourceState[n].mid)).textContent=on.Sources.transceiverSourceState[r].sourceId)):null!==on.Sources.selectedVideoSource.sourceId&&null!==t&&n!==r&&(vn(on.Sources.transceiverSourceState[r].sourceId,on.Sources.selectedVideoSource.mid),on.Params.viewer.showLabels&&(document.getElementById("sideLabel".concat(on.Sources.transceiverSourceState[on.Sources.selectedVideoSource.mid].mid)).textContent=on.Sources.transceiverSourceState[r].sourceId))),rn("Sources/removeTransceiverSourceState",t)),rn("Sources/removeSourceRemoteTrack",t),rn("Sources/removeSource",{kind:e,sourceId:t}),hn({kind:e,source:o})},hn=function(){var e=l(c().m((function e(t){var n,r,o,i;return c().w((function(e){while(1)switch(e.n){case 0:if(n=t.kind,r=t.source,o=null,i=null,"video"===n?(Jt(),o=on.ViewConnection.trackEvent.video.track,i=on.Sources.selectedVideoSource):"audio"===n&&(o=on.ViewConnection.trackEvent.audio.track,i=on.Sources.selectedVideoSource,i=on.Sources.selectedAudioSource),rn("Sources/setSelectedSource",{kind:n,selectedSource:r}),!r||"none"===(null===r||void 0===r?void 0:r.name)||!o){e.n=2;break}return e.n=1,mn({kind:n,source:r});case 1:"none"!==i.name&&rn("Controls/setTrackWarning",!1);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),mn=function(){var e=l(c().m((function e(t){var n,r,o,i,s,a,u,l,f,p;return c().w((function(e){while(1)switch(e.n){case 0:if(n=t.kind,r=t.source,o=null===r||void 0===r?void 0:r.sourceId,i=null,s=null,"video"===n?(i=on.Sources.videoSources,s=null===(a=on.ViewConnection.trackEvent)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.transceiver):"audio"===n&&(i=on.Sources.audioSources,s=null===(u=on.ViewConnection.trackEvent)||void 0===u||null===(u=u.audio)||void 0===u?void 0:u.transceiver),!on.Controls.castIsConnected){e.n=1;break}zt(),e.n=2;break;case 1:if(null===o&&!i.length){e.n=2;break}return p=null!==(l=null===(f=s)||void 0===f?void 0:f.mid)&&void 0!==l?l:null,e.n=2,on.ViewConnection.millicastView.project(o,[d(d({trackId:r.trackId,mediaId:p},"video"===n&&{promote:!0}),{},{media:n})]);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),vn=function(){var e=l(c().m((function e(t,n,r,o){return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,on.ViewConnection.millicastView.project(t,[{trackId:r,mediaId:n,media:"video",layer:o}]);case 1:return e.a(2)}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),gn=function(){var e=l(c().m((function e(t){var n,r,o,s,a,u;return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,Object(i["nextTick"])();case 1:a="sidePlayer"+(null===(n=t.transceiver)||void 0===n?void 0:n.mid),u=document.getElementById(a),u.srcObject=t.mediaStream,vn(t.sourceId,null!==(r=null===(o=t.transceiver)||void 0===o?void 0:o.mid)&&void 0!==r?r:null,on.Sources.transceiverSourceState[null===(s=t.transceiver)||void 0===s?void 0:s.mid].trackId),u.muted=!0,u.autoPlay=!0,u.playsInline=!0,u.play();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),bn=function(){var e=l(c().m((function e(){var t;return c().w((function(e){while(1)switch(e.n){case 0:t=on.ViewConnection.millicastView.webRTCPeer.peer.getTransceivers().splice(2).map((function(e){return e.mid})),on.ViewConnection.millicastView.unproject(t);case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),yn=lt.commit,wn=lt.state,Sn=null,En=function(e){var t=e.videoPlayer,n=e.srcObject,r=e.volume,o=e.muted,i=e.autoplay,s=e.drmAudio;t&&(yn("Controls/setVideo",t),yn("Controls/setCurrentElementRef",t.id)),s&&yn("Controls/setDrmAudio",s),n&&!wn.Params.viewer.drm&&yn("Controls/setVideoSource",n),r&&yn("Controls/setVideoVolume",r),o&&yn("Controls/setVideoMuted",o),i&&yn("Controls/setVideoAutoplay",i),Cn(wn.Controls.video)},Cn=function(e){e.onplay=function(){return yn("Controls/setPlaying",!0)},e.addEventListener("emptied",kn),e.addEventListener("pause",kn),e.onenterpictureinpicture=function(){return yn("Controls/setPip",!0)},e.onleavepictureinpicture=function(){return yn("Controls/setPip",!1)}},On=function(){wn.Controls.video.removeEventListener("emptied",kn),wn.Controls.video.removeEventListener("pause",kn)},kn=function(){yn("Controls/setPlaying",!1)},In=function(){window.Version=Object({NODE_ENV:"production",VUE_APP_DEFAULT_TURN_ENDPOINT:"",VUE_APP_DEFAULT_LIVEWS_ENDPOINT:"",VUE_APP_DEFAULT_DIRECTOR_ENDPOINT:"https://director.millicast.com/",VUE_APP_DEFAULT_PUBLIC_PATH:"/",VUE_APP_DEFAULT_CHROMECAST_ID:"EC3A02DA",VUE_APP_DEFAULT_REPORT_URL:"https://playback-report.millicast.com",BASE_URL:"/"}).PACKAGE_VERSION,window.Logger=M["Logger"];var e=ft(),t=pt();Tt(e,t),jn()},xn=function(){var e=l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:jt();case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Tn=function(){var e=l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:Mt();case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),jn=function(){Pt(),Pn()},Pn=function(){var e,t=wn.ViewConnection.millicastView;wn.ViewConnection.eventListeners.broadcastEvent=null!==(e=wn.ViewConnection.eventListeners.broadcastEvent)&&void 0!==e?e:t.on("broadcastEvent",(function(e){var t=e.name;switch(t){case"active":An(e);break;case"stopped":Vn(e);break;case"inactive":Mn(e);break;case"layers":Ln(e);break;case"viewercount":_n(e);break;default:break}}))},Rn=function(e){var t=e.data.sourceId;if(wn.Params.viewer.drm&&!t){var n=e.data.tracks.map((function(e){var t=e.media,n="video"===t?"0":"1";return d(d({},e),{},{mediaId:n})})),r=wn.Controls.video,o=wn.Controls.drmAudio,i={videoElement:r,audioElement:o,videoEncryptionParams:e.data.encryption,videoMid:"0",mediaBufferMs:wn.Params.viewer.mediaBufferMs},s=n.find((function(e){return"audio"===e.media}));s&&(i.audioMid=s.mediaId);var a=wn.ViewConnection.millicastView;a.configureDRM(i)}},An=function(e){if(e.data.encryption&&wn.Params.viewer.drm&&Rn(e),an(e.data),yn("Controls/setIsLive",!0),wn.Controls.isSelectingLayer||yn("Controls/setIsLoading",!1),Vt(),wn.Controls.video.srcObject||wn.Params.viewer.drm||yn("Controls/setVideoSource",wn.Controls.srcObject),null!=Sn){var t=setTimeout((function(){console.warn("Starting quality selected, but no layer event available."),yn("Controls/setIsLoading",!1)}),5e3);Sn=t}},Vn=function(){yn("Controls/setIsLoading",!1),yn("Controls/setIsLive",!1)},Mn=function(e){var t,n=e.data,r=wn.Sources.selectedVideoSource,o=wn.Sources.selectedAudioSource,i=(null===r.sourceId||null===o.sourceId)&&null===n.sourceId;fn(null!==(t=null===n||void 0===n?void 0:n.sourceId)&&void 0!==t?t:null),e.data.streamId||yn("Controls/setUserCount",null),wn.Sources.videoSources.length+wn.Sources.audioSources.length===0?(Jt(),yn("Controls/setTrackWarning",!1),yn("Controls/setIsLive",!1),yn("Controls/setPlaying",!1),yn("Controls/setVideoSource",null)):i&&(""===wn.Controls.dropup&&yn("Controls/setDropup","settings"),yn("Controls/setTrackWarning",i))},Ln=function(e){"0"in e.data.medias?Yt(e):Jt();var t=wn.Layers.mainTransceiverMedias.active;if(0===t.length)return console.warn("No active layers available, will wait for next event. Switching to Auto until then."),null!=Sn&&clearTimeout(Sn),Sn=null,void yn("Controls/setIsLoading",!1);if(wn.Controls.isSelectingLayer&&null!==wn.Params.viewer.startingQuality){var n,r={},o=wn.Params.viewer.startingQuality,i=["auto","high","medium","low"].indexOf(o.toLowerCase());if(/^\d{3,4}$/.test(o))r=t.find((function(e){return e.height===parseInt(o)})),console.log("Selected media, height:",null===(n=r)||void 0===n?void 0:n.id);else if(i>=0){var s;r="low"===o.toLowerCase()?t[t.length-1]:t[i],console.log("Selected media, level:",null===(s=r)||void 0===s?void 0:s.id)}else console.warn("Not valid starting quality, switching to Auto"),r={name:"Auto"};void 0==r&&(console.warn("Not valid starting quality, switching to Auto"),r={name:"Auto"}),setTimeout((function(){Dn(r),null!=Sn&&clearTimeout(Sn),Sn=null,yn("Controls/setIsSelectingLayer",!1),yn("Controls/setIsLoading",!1)}),1500)}},_n=function(e){yn("Controls/setViewerCount",e.data.viewercount)},Dn=function(e){Zt(e)},Nn=function(){var e=l(c().m((function e(t){var n,r;return c().w((function(e){while(1)switch(e.n){case 0:return n=t.kind,r=t.source,e.n=1,hn({kind:n,source:r});case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bn=function(){var e=l(c().m((function e(t){return c().w((function(e){while(1)switch(e.n){case 0:gn(t);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Un=function(){var e=l(c().m((function e(t,n,r,o){return c().w((function(e){while(1)switch(e.n){case 0:vn(t,n,r,o);case 1:return e.a(2)}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),Fn=function(){var e=l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:bn();case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),zn=function(){var e=l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:Ft();case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}n("8172"),n("efec"),n("a9e3");function Wn(e,t){if("object"!=Hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function qn(e){var t=Wn(e,"string");return"symbol"==Hn(t)?t:t+""}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qn(r.key),r)}}function Qn(e,t,n){return t&&$n(e.prototype,t),n&&$n(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Kn=Object.defineProperty,Xn=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,Zn=(e,t,n)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,er=(e,t)=>{for(var n in t||(t={}))Yn.call(t,n)&&Zn(e,n,t[n]);if(Xn)for(var n of Xn(t))Jn.call(t,n)&&Zn(e,n,t[n]);return e},tr=e=>"function"===typeof e,nr=e=>"string"===typeof e,rr=e=>nr(e)&&e.trim().length>0,or=e=>"number"===typeof e,ir=e=>"undefined"===typeof e,sr=e=>"object"===typeof e&&null!==e,ar=e=>pr(e,"tag")&&rr(e.tag),cr=e=>window.TouchEvent&&e instanceof TouchEvent,ur=e=>pr(e,"component")&&dr(e.component),lr=e=>tr(e)||sr(e),dr=e=>!ir(e)&&(nr(e)||lr(e)||ur(e)),fr=e=>sr(e)&&["height","width","right","left","top","bottom"].every(t=>or(e[t])),pr=(e,t)=>(sr(e)||tr(e))&&t in e,hr=(e=>()=>e++)(0);function mr(e){return cr(e)?e.targetTouches[0].clientX:e.clientX}function vr(e){return cr(e)?e.targetTouches[0].clientY:e.clientY}var gr,br,yr,wr=e=>{ir(e.remove)?e.parentNode&&e.parentNode.removeChild(e):e.remove()},Sr=e=>ur(e)?Sr(e.component):ar(e)?Object(i["defineComponent"])({render(){return e}}):"string"===typeof e?e:Object(i["toRaw"])(Object(i["unref"])(e)),Er=e=>{if("string"===typeof e)return e;const t=pr(e,"props")&&sr(e.props)?e.props:{},n=pr(e,"listeners")&&sr(e.listeners)?e.listeners:{};return{component:Sr(e),props:t,listeners:n}},Cr=()=>"undefined"!==typeof window,Or=class{constructor(){this.allHandlers={}}getHandlers(e){return this.allHandlers[e]||[]}on(e,t){const n=this.getHandlers(e);n.push(t),this.allHandlers[e]=n}off(e,t){const n=this.getHandlers(e);n.splice(n.indexOf(t)>>>0,1)}emit(e,t){const n=this.getHandlers(e);n.forEach(e=>e(t))}},kr=e=>["on","off","emit"].every(t=>pr(e,t)&&tr(e[t]));(function(e){e["SUCCESS"]="success",e["ERROR"]="error",e["WARNING"]="warning",e["INFO"]="info",e["DEFAULT"]="default"})(gr||(gr={})),function(e){e["TOP_LEFT"]="top-left",e["TOP_CENTER"]="top-center",e["TOP_RIGHT"]="top-right",e["BOTTOM_LEFT"]="bottom-left",e["BOTTOM_CENTER"]="bottom-center",e["BOTTOM_RIGHT"]="bottom-right"}(br||(br={})),function(e){e["ADD"]="add",e["DISMISS"]="dismiss",e["UPDATE"]="update",e["CLEAR"]="clear",e["UPDATE_DEFAULTS"]="update_defaults"}(yr||(yr={}));var Ir="Vue-Toastification",xr={type:{type:String,default:gr.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},Tr={type:xr.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},jr={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:xr.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Pr={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},Rr={transition:{type:[Object,String],default:Ir+"__bounce"}},Ar={position:{type:String,default:br.TOP_RIGHT},draggable:xr.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:xr.trueBoolean,pauseOnHover:xr.trueBoolean,closeOnClick:xr.trueBoolean,timeout:Pr.timeout,hideProgressBar:Pr.hideProgressBar,toastClassName:xr.classNames,bodyClassName:xr.classNames,icon:Tr.customIcon,closeButton:jr.component,closeButtonClassName:jr.classNames,showCloseButtonOnHover:jr.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new Or}},Vr={id:{type:[String,Number],required:!0,default:0},type:xr.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},Mr={container:{type:[Object,Function],default:()=>document.body},newestOnTop:xr.trueBoolean,maxToasts:{type:Number,default:20},transition:Rr.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:e=>e},filterToasts:{type:Function,default:e=>e},containerClassName:xr.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},Lr={CORE_TOAST:Ar,TOAST:Vr,CONTAINER:Mr,PROGRESS_BAR:Pr,ICON:Tr,TRANSITION:Rr,CLOSE_BUTTON:jr},_r=Object(i["defineComponent"])({name:"VtProgressBar",props:Lr.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:this.timeout+"ms",animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?Ir+"__progress-bar":""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function Dr(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])(e.style),class:Object(i["normalizeClass"])(e.cpClass)},null,6)}_r.render=Dr;var Nr=_r,Br=Object(i["defineComponent"])({name:"VtCloseButton",props:Lr.CLOSE_BUTTON,computed:{buttonComponent(){return!1!==this.component?Sr(this.component):"button"},classes(){const e=[Ir+"__close-button"];return this.showOnHover&&e.push("show-on-hover"),e.concat(this.classNames)}}}),Ur=Object(i["createTextVNode"])(" × ");function Fr(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.buttonComponent),Object(i["mergeProps"])({"aria-label":e.ariaLabel,class:e.classes},e.$attrs),{default:Object(i["withCtx"])(()=>[Ur]),_:1},16,["aria-label","class"])}Br.render=Fr;var zr=Br,Gr={},Hr={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Wr=Object(i["createElementVNode"])("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),qr=[Wr];function $r(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Hr,qr)}Gr.render=$r;var Qr=Gr,Kr={},Xr={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Yr=Object(i["createElementVNode"])("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),Jr=[Yr];function Zr(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Xr,Jr)}Kr.render=Zr;var eo=Kr,to={},no={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},ro=Object(i["createElementVNode"])("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),oo=[ro];function io(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",no,oo)}to.render=io;var so=to,ao={},co={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},uo=Object(i["createElementVNode"])("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),lo=[uo];function fo(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",co,lo)}ao.render=fo;var po=ao,ho=Object(i["defineComponent"])({name:"VtIcon",props:Lr.ICON,computed:{customIconChildren(){return pr(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return nr(this.customIcon)?this.trimValue(this.customIcon):pr(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return pr(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:dr(this.customIcon)?Sr(this.customIcon):this.iconTypeComponent},iconTypeComponent(){const e={[gr.DEFAULT]:eo,[gr.INFO]:eo,[gr.SUCCESS]:Qr,[gr.ERROR]:po,[gr.WARNING]:so};return e[this.type]},iconClasses(){const e=[Ir+"__icon"];return this.hasCustomIcon?e.concat(this.customIconClass):e}},methods:{trimValue(e,t=""){return rr(e)?e.trim():t}}});function mo(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.component),{class:Object(i["normalizeClass"])(e.iconClasses)},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.customIconChildren),1)]),_:1},8,["class"])}ho.render=mo;var vo=ho,go=Object(i["defineComponent"])({name:"VtToast",components:{ProgressBar:Nr,CloseButton:zr,Icon:vo},inheritAttrs:!1,props:Object.assign({},Lr.CORE_TOAST,Lr.TOAST),data(){const e={isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}};return e},computed:{classes(){const e=[Ir+"__toast",`${Ir}__toast--${this.type}`,""+this.position].concat(this.toastClassName);return this.disableTransitions&&e.push("disable-transition"),this.rtl&&e.push(Ir+"__toast--rtl"),e},bodyClasses(){const e=[`${Ir}__toast-${nr(this.content)?"body":"component-body"}`].concat(this.bodyClassName);return e},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return fr(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:pr,getVueComponentFromObj:Sr,closeToast(){this.eventBus.emit(yr.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(this.beingDragged&&this.dragStart!==this.dragPos.x||this.closeToast())},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const e=this.$el;e.addEventListener("touchstart",this.onDragStart,{passive:!0}),e.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const e=this.$el;e.removeEventListener("touchstart",this.onDragStart),e.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(e){this.beingDragged=!0,this.dragPos={x:mr(e),y:vr(e)},this.dragStart=mr(e),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(e){this.beingDragged&&(e.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:mr(e),y:vr(e)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,fr(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),bo=["role"];function yo(e,t){const n=Object(i["resolveComponent"])("Icon"),r=Object(i["resolveComponent"])("CloseButton"),o=Object(i["resolveComponent"])("ProgressBar");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(e.classes),style:Object(i["normalizeStyle"])(e.draggableStyle),onClick:t[0]||(t[0]=(...t)=>e.clickHandler&&e.clickHandler(...t)),onMouseenter:t[1]||(t[1]=(...t)=>e.hoverPause&&e.hoverPause(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.hoverPlay&&e.hoverPlay(...t))},[e.icon?(Object(i["openBlock"])(),Object(i["createBlock"])(n,{key:0,"custom-icon":e.icon,type:e.type},null,8,["custom-icon","type"])):Object(i["createCommentVNode"])("v-if",!0),Object(i["createElementVNode"])("div",{role:e.accessibility.toastRole||"alert",class:Object(i["normalizeClass"])(e.bodyClasses)},["string"===typeof e.content?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.content),1)],2112)):(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.getVueComponentFromObj(e.content)),Object(i["mergeProps"])({key:1,"toast-id":e.id},e.hasProp(e.content,"props")?e.content.props:{},Object(i["toHandlers"])(e.hasProp(e.content,"listeners")?e.content.listeners:{}),{onCloseToast:e.closeToast}),null,16,["toast-id","onCloseToast"]))],10,bo),e.closeButton?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,component:e.closeButton,"class-names":e.closeButtonClassName,"show-on-hover":e.showCloseButtonOnHover,"aria-label":e.accessibility.closeButtonLabel,onClick:Object(i["withModifiers"])(e.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):Object(i["createCommentVNode"])("v-if",!0),e.timeout?(Object(i["openBlock"])(),Object(i["createBlock"])(o,{key:2,"is-running":e.isRunning,"hide-progress-bar":e.hideProgressBar,timeout:e.timeout,onCloseToast:e.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):Object(i["createCommentVNode"])("v-if",!0)],38)}go.render=yo;var wo=go,So=Object(i["defineComponent"])({name:"VtTransition",props:Lr.TRANSITION,emits:["leave"],methods:{hasProp:pr,leave(e){e instanceof HTMLElement&&(e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.width=getComputedStyle(e).width,e.style.position="absolute")}}});function Eo(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(i["TransitionGroup"],{tag:"div","enter-active-class":e.transition.enter?e.transition.enter:e.transition+"-enter-active","move-class":e.transition.move?e.transition.move:e.transition+"-move","leave-active-class":e.transition.leave?e.transition.leave:e.transition+"-leave-active",onLeave:e.leave},{default:Object(i["withCtx"])(()=>[Object(i["renderSlot"])(e.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}So.render=Eo;var Co=So,Oo=Object(i["defineComponent"])({name:"VueToastification",devtools:{hide:!0},components:{Toast:wo,VtTransition:Co},props:Object.assign({},Lr.CORE_TOAST,Lr.CONTAINER,Lr.TRANSITION),data(){const e={count:0,positions:Object.values(br),toasts:{},defaults:{}};return e},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const e=this.eventBus;e.on(yr.ADD,this.addToast),e.on(yr.CLEAR,this.clearToasts),e.on(yr.DISMISS,this.dismissToast),e.on(yr.UPDATE,this.updateToast),e.on(yr.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(e){tr(e)&&(e=await e()),wr(this.$el),e.appendChild(this.$el)},setToast(e){ir(e.id)||(this.toasts[e.id]=e)},addToast(e){e.content=Er(e.content);const t=Object.assign({},this.defaults,e.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[e.type],e),n=this.defaults.filterBeforeCreate(t,this.toastArray);n&&this.setToast(n)},dismissToast(e){const t=this.toasts[e];ir(t)||ir(t.onClose)||t.onClose(),delete this.toasts[e]},clearToasts(){Object.keys(this.toasts).forEach(e=>{this.dismissToast(e)})},getPositionToasts(e){const t=this.filteredToasts.filter(t=>t.position===e).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?t.reverse():t},updateDefaults(e){ir(e.container)||this.setup(e.container),this.defaults=Object.assign({},this.defaults,e)},updateToast({id:e,options:t,create:n}){this.toasts[e]?(t.timeout&&t.timeout===this.toasts[e].timeout&&t.timeout++,this.setToast(Object.assign({},this.toasts[e],t))):n&&this.addToast(Object.assign({},{id:e},t))},getClasses(e){const t=[Ir+"__container",e];return t.concat(this.defaults.containerClassName)}}});function ko(e,t){const n=Object(i["resolveComponent"])("Toast"),r=Object(i["resolveComponent"])("VtTransition");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",null,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.positions,t=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:t},[Object(i["createVNode"])(r,{transition:e.defaults.transition,class:Object(i["normalizeClass"])(e.getClasses(t))},{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.getPositionToasts(t),e=>(Object(i["openBlock"])(),Object(i["createBlock"])(n,Object(i["mergeProps"])({key:e.id},e),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}Oo.render=ko;var Io=Oo,xo=(e={},t=!0)=>{const n=e.eventBus=e.eventBus||new Or;t&&Object(i["nextTick"])(()=>{const t=Object(i["createApp"])(Io,er({},e)),n=t.mount(document.createElement("div")),r=e.onMounted;if(ir(r)||r(n,t),e.shareAppContext){const n=e.shareAppContext;!0===n?console.warn(`[${Ir}] App to share context with was not provided.`):(t._context.components=n._context.components,t._context.directives=n._context.directives,t._context.mixins=n._context.mixins,t._context.provides=n._context.provides,t.config.globalProperties=n.config.globalProperties)}});const r=(e,t)=>{const r=Object.assign({},{id:hr(),type:gr.DEFAULT},t,{content:e});return n.emit(yr.ADD,r),r.id};function o(e,{content:t,options:r},o=!1){const i=Object.assign({},r,{content:t});n.emit(yr.UPDATE,{id:e,options:i,create:o})}return r.clear=()=>n.emit(yr.CLEAR,void 0),r.updateDefaults=e=>{n.emit(yr.UPDATE_DEFAULTS,e)},r.dismiss=e=>{n.emit(yr.DISMISS,e)},r.update=o,r.success=(e,t)=>r(e,Object.assign({},t,{type:gr.SUCCESS})),r.info=(e,t)=>r(e,Object.assign({},t,{type:gr.INFO})),r.error=(e,t)=>r(e,Object.assign({},t,{type:gr.ERROR})),r.warning=(e,t)=>r(e,Object.assign({},t,{type:gr.WARNING})),r},To=()=>{const e=()=>console.warn(`[${Ir}] This plugin does not support SSR!`);return new Proxy(e,{get(){return e}})};function jo(e){return Cr()?kr(e)?xo({eventBus:e},!1):xo(e,!0):To()}var Po=Symbol("VueToastification"),Ro=new Or,Ao=(e,t)=>{!0===(null==t?void 0:t.shareAppContext)&&(t.shareAppContext=e);const n=jo(er({eventBus:Ro},t));e.provide(Po,n)},Vo=e=>{if(e)return jo(e);const t=Object(i["getCurrentInstance"])()?Object(i["inject"])(Po,void 0):void 0;return t||jo(Ro)},Mo=Ao,Lo={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},_o=function(){function e(){Gn(this,e),this.toast=Vo(),this.store=lt}return Qn(e,[{key:"showToast",value:function(e,t,n){this.toast=Vo(),this.toast.clear(),this.shouldShowError(e)&&this.showToaster(e,t,n)}},{key:"showToaster",value:function(e,t,n){switch(e){case Lo.ERROR:this.toast.error(t,n);break;case Lo.WARNING:this.toast.warning(t,n);break;case Lo.INFO:this.toast.info(t,n);break;case Lo.SUCCESS:this.toast.success(t,n);break;default:break}}},{key:"shouldShowError",value:function(e){var t,n=null===(t=this.store)||void 0===t||null===(t=t._state)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.Controls.hideToast;return!(n&&n.includes(e))}},{key:"clear",value:function(){this.toast=Vo(),this.toast.clear()}},{key:"updateDefaults",value:function(e){this.toast=Vo(),this.toast.updateDefaults(e)}}])}(),Do=_o,No={name:"VideoPlayerMedia",data:function(){return{accountId:null,streamName:null,eventListeners:{reconnect:null,stats:null,broadcastEvent:null,toast:null}}},mounted:function(){var e=this;return l(c().m((function t(){var n,r;return c().w((function(t){while(1)switch(t.n){case 0:r=document.getElementById(e.currentElementRef),e.viewer.drm&&(n=document.getElementById(e.currentElementRef)),En({videoPlayer:r,srcObject:null,volume:1,muted:e.viewer.muted,autoplay:e.viewer.autoplay,drmAudio:n});case 1:return t.a(2)}}),t)})))()},computed:d(d(d(d(d(d(d({},Be("ViewConnection",{millicastView:function(e){return e.millicastView}})),Be("Layers",{selectedQuality:function(e){return e.selectedQuality}})),Be("Sources",{isAudioOnly:function(e){return e.isAudioOnly},stream:function(e){return e.stream},selectedVideoSource:function(e){return e.selectedVideoSource},selectedAudioSource:function(e){return e.selectedAudioSource},audioSources:function(e){return e.audioSources},videoSources:function(e){return e.videoSources},mainLabel:function(e){return e.mainLabel}})),Be("Controls",{video:function(e){return e.video},drmAudio:function(e){return e.drmAudio},dropup:function(e){return e.dropup},playerMuted:function(e){return e.muted},isLive:function(e){return e.isLive},reconnection:function(e){return e.reconnection},reconnectionStatus:function(e){return e.reconnection.status},currentElementRef:function(e){return e.currentElementRef},isMigrating:function(e){return e.isMigrating},isSplittedView:function(e){return e.isSplittedView},previousSplitState:function(e){return e.previousSplitState},isGrid:function(e){return e.isGrid},fullscreen:function(e){return e.fullscreen},playing:function(e){return e.playing}})),Be("Params",{viewer:function(e){return e.viewer}})),Fe("Sources",["getVideoHasMain","getAudioHasMain"])),{},{displayAudioOnly:function(){return this.isAudioOnly&&this.isLive&&!this.viewer.drm||null===this.viewer.placeholderImg&&!this.isLive&&!this.viewer.drm}}),methods:d(d(d(d(d(d({},Ue("Sources",["addVideoSource","addAudioSource","setStream"])),Ue("Layers",["addLayers","selectQuality","deleteLayers"])),Ue("Controls",["setVideoMuted","setDropup","setTrackWarning","stopVideo","setAutoPlayMuted","userParamOptions","setIsSplittedView"])),Ue("ViewConnection",["setMillicastView"])),ze("Sources",["updateBroadcastState"])),{},{stop:function(){var e;null===(e=this.millicastView)||void 0===e||e.stop(),this.stopCurrentVideo()},stopCurrentVideo:function(){this.eventListeners.stats=null,this.stopVideo()}}),watch:{reconnectionStatus:function(e){var t,n=this;if(this.toast=new Do,this.toast.clear(),e){var r;this.setIsSplittedView(!1);var o,i="Connection lost. Retrying...";if(null!==(r=this.reconnection)&&void 0!==r&&r.timeout)t={timeout:null===(o=this.reconnection)||void 0===o?void 0:o.timeout};this.toast.showToast("warning",i,t)}else{var s=function(e){["connected"].includes(e)&&(n.setIsSplittedView(n.previousSplitState),n.millicastView.removeListener("connectionStateChange",s),n.toast.clear())};this.millicastView.on("connectionStateChange",s)}},displayAudioOnly:function(){var e=l(c().m((function e(){var t,n,r,o,s,a;return c().w((function(e){while(1)switch(e.n){case 0:return t=this.video.srcObject,n=this.video.volume,r=this.video.muted,o=this.video.autoplay,e.n=1,Object(i["nextTick"])();case 1:s=document.getElementById(this.currentElementRef),this.viewer.drm&&(a=document.getElementById("drm-audio-"+this.currentElementRef)),En({videoPlayer:s,srcObject:t,volume:n,muted:r,autoplay:o,drmAudio:a});case 2:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),viewer:function(){var e=this;return l(c().m((function t(){var n;return c().w((function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,Tn();case 1:return t.n=2,Object(i["nextTick"])();case 2:return In(),t.p=3,t.n=4,xn();case 4:setTimeout((function(){e.setAutoPlayMuted(!1)}),6e3),t.n=6;break;case 5:t.p=5,n=t.v,e.toast.showToast("error",n.message);case 6:return t.a(2)}}),t,null,[[3,5]])})))()},playerMuted:function(){!this.playerMuted&&this.drmAudio&&this.drmAudio.paused&&this.playing&&this.drmAudio.play()}}},Bo=(n("daa2"),n("6b0d")),Uo=n.n(Bo);const Fo=Uo()(No,[["render",V],["__scopeId","data-v-161a15bc"]]);var zo=Fo,Go=["onClick","id"],Ho=["id"];function Wo(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(e.isGrid?"sources":"list-side")},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.sourceRemoteTracks,(function(t,n){var r,a,c,u;return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(e.isGrid?"grid-item":"list-item"),style:"scroll-snap-align: end",key:"p"+n},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["videoText",e.isGrid?"videoGrid":""])},[Object(i["createElementVNode"])("video",{onClick:function(){var e;return o.enableClick&&s.switchProjection(null===(e=t.transceiver)||void 0===e?void 0:e.mid)},id:"sidePlayer".concat(null===(r=t.transceiver)||void 0===r?void 0:r.mid),ref_for:!0,ref:"sidePlayer".concat(null===(a=t.transceiver)||void 0===a?void 0:a.mid),class:Object(i["normalizeClass"])(!e.isGrid&&e.isSplittedView?"hires-class":""),autoplay:"",muted:"",playsinline:""},null,10,Go),e.viewer.showLabels?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,id:"sideLabel".concat(null===(c=t.transceiver)||void 0===c?void 0:c.mid),ref_for:!0,ref:"sideLabel".concat(null===(u=t.transceiver)||void 0===u?void 0:u.mid)},Object(i["toDisplayString"])(t.sourceId),9,Ho)):Object(i["createCommentVNode"])("",!0)],2)],2)})),128))],2)}var qo={name:"VideoPlayerSideVideoSources",data:function(){return{indexSourceProjectedInMain:null,indexMainMediaSource:0,playerRef:null,enableClick:!0,toast:new Do}},computed:d(d(d(d(d({},Be("Sources",["sourceRemoteTracks","videoSources","audioSources","transceiverSourceState","audioFollowsVideo"])),Be("Controls",{fullscreen:function(e){return e.fullscreen},isGrid:function(e){return e.isGrid},isSplittedView:function(e){return e.isSplittedView},currentElementRef:function(e){return e.currentElementRef}})),Fe("Sources",["getVideoHasMain","getSelectedVideoSource"])),Be("ViewConnection",{millicastView:function(e){return e.millicastView}})),Be("Params",{viewer:function(e){return e.viewer}})),mounted:function(){var e=this;return l(c().m((function t(){return c().w((function(t){while(1)switch(t.n){case 0:Nn({kind:"video",source:e.videoSources[0]}),e.setMainLabel(e.videoSources[0].name),e.sourceRemoteTracks.forEach(function(){var e=l(c().m((function e(t){return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,Bn(t);case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.playerRef=document.getElementById("player");case 1:return t.a(2)}}),t)})))()},unmounted:function(){var e=this;return l(c().m((function t(){return c().w((function(t){while(1)switch(t.n){case 0:e.videoSources.forEach((function(t){e.transceiverSourceState[t.mid]=t})),Fn();case 1:return t.a(2)}}),t)})))()},watch:{"sourceRemoteTracks.length":{handler:function(){var e=l(c().m((function e(t,n){var r;return c().w((function(e){while(1)switch(e.n){case 0:if(!(t>n)){e.n=2;break}return r=t-1,e.n=1,Bn(this.sourceRemoteTracks[r]);case 1:e.n=3;break;case 2:this.sourceRemoteTracks.forEach(function(){var e=l(c().m((function e(t){return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,Bn(t);case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.a(2)}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}},methods:d(d(d(d({},Ue("Controls",["toggleFullscreen","setIsSplittedView"])),Ue("Sources",["setMainLabel","setPreviousMainLabel","updateTransceiverSourceState"])),Fe("Layers",["getActiveMedias","getActiveMainTransceiverMedias"])),{},{switchProjection:function(e){var t=this;return l(c().m((function n(){var r,o,s,a,u,l,d;return c().w((function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,Object(i["nextTick"])();case 1:return t.enableClick=!1,t.playerRef=document.getElementById(t.currentElementRef),o=t.transceiverSourceState[e],a=t.videoSources[0].mid,u=o.name,l=t.audioSources.find((function(e){return e.name===u})),t.getVideoHasMain&&(t.viewer.showLabels&&(t.$refs["sideLabel".concat(e)][0].textContent=t.transceiverSourceState[a].name),d=t.transceiverSourceState[a].sourceId,a=t.transceiverSourceState[a].mid,a in t.getActiveMedias()&&(s=t.getActiveMedias()[a].layers.slice(-1)[0]),Un(d,e,t.transceiverSourceState[a].trackId,s),t.updateTransceiverSourceState({source:o})),t.setMainLabel(null!==(r=o.sourceId)&&void 0!==r?r:o.name),n.n=2,Nn({kind:"video",source:o});case 2:if(t.isGrid&&t.setIsSplittedView(!1),!l||!t.audioFollowsVideo){n.n=6;break}return n.p=3,n.n=4,Nn({kind:"audio",source:l});case 4:n.n=6;break;case 5:n.p=5,n.v,t.toast.showToast("error","There was an error selecting the desired source, try again",{timeout:5e3});case 6:t.enableClick=!0;case 7:return n.a(2)}}),n,null,[[3,5]])})))()}})};n("da1f");const $o=Uo()(qo,[["render",Wo],["__scopeId","data-v-aac4ed3c"]]);var Qo=$o,Ko={key:0,class:"align-middle"},Xo=["textContent"];function Yo(e,t,n,r,o,s){return e.isLoading?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("h4",Ko,[Object(i["createElementVNode"])("span",{class:Object(i["normalizeClass"])(["badge badge-secondary",{"badge-danger":e.isLive}]),textContent:Object(i["toDisplayString"])(s.text),style:{border:"0px"}},null,10,Xo)]))}var Jo={name:"VideoPlayerControlsBadge",computed:d(d({},Be("Controls",{isLive:function(e){return e.isLive},isLoading:function(e){return e.isLoading}})),{},{text:function(){return this.isLive?"LIVE":"NOT LIVE"}})};const Zo=Uo()(Jo,[["render",Yo]]);var ei=Zo;function ti(e,t,n,r,o,s){return e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,class:"dropdown-item",onClick:t[0]||(t[0]=function(){return n.click&&n.click.apply(n,arguments)})},[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])(["align-middle control-icon",{"ml-viewer-bi-fullscreen":!o.fullscreen,"ml-viewer-bi-fullscreen-exit":o.fullscreen}])},null,2),t[2]||(t[2]=Object(i["createTextVNode"])(" Full Screen ",-1))])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",{key:1,class:Object(i["normalizeClass"])(["h3 align-middle control-icon",{"ml-viewer-bi-fullscreen":!o.fullscreen,"ml-viewer-bi-fullscreen-exit":o.fullscreen}]),onClick:t[1]||(t[1]=function(){return n.click&&n.click.apply(n,arguments)})},null,2))}var ni={name:"VideoPlayerControlsFullscreen",props:{click:Function},data:function(){return{fullscreen:!1}},mounted:function(){var e,t=this;document.onfullscreenchange=function(){t.fullscreen=!!document.fullscreenElement};var n=null!==(e=document.getElementById("player"))&&void 0!==e?e:document.getElementById("player2");n.onwebkitfullscreenchange=function(){t.fullscreen=n.fullscreenElement},this.fullscreen=!!document.fullscreenElement||n.fullscreenElement},computed:d({},Be("Controls",{isMobile:function(e){return e.isMobile}}))};const ri=Uo()(ni,[["render",ti]]);var oi=ri;function ii(e,t,n,r,o,s){return e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,class:"dropdown-item",onClick:t[0]||(t[0]=function(){return s.togglePip&&s.togglePip.apply(s,arguments)})},[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])(["align-middle control-icon",{"ml-viewer-bi-pip":!e.pip,"ml-viewer-bi-pip-fill":e.pip}])},null,2),t[2]||(t[2]=Object(i["createTextVNode"])(" Miniplayer ",-1))])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,class:"mobile-setting",onClick:t[1]||(t[1]=function(){return s.togglePip&&s.togglePip.apply(s,arguments)})},[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])(["h3 align-middle control-icon",{"ml-viewer-bi-pip":!e.pip,"ml-viewer-bi-pip-fill":e.pip}])},null,2)]))}var si={name:"VideoPlayerControlsPip",computed:d(d({},Be("Controls",{isMobile:function(e){return e.isMobile},pip:function(e){return e.pip},video:function(e){return e.video}})),Be("Params",{viewer:function(e){return e.viewer}})),methods:{togglePip:function(){this.pip||!this.video.srcObject&&!this.viewer.drm||"VIDEO"!==this.video.nodeName?document.exitPictureInPicture():this.video.requestPictureInPicture()}}};n("a2a5");const ai=Uo()(si,[["render",ii],["__scopeId","data-v-2b6bbb5b"]]);var ci=ai;function ui(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("i",{class:Object(i["normalizeClass"])(["h3 align-middle control-icon",{"ml-viewer-bi-play-fill":!e.playing,"ml-viewer-bi-pause-fill":e.playing}]),onClick:t[0]||(t[0]=function(){return s.togglePlay&&s.togglePlay.apply(s,arguments)})},null,2)}var li={name:"VideoPlayerControlsPlay",computed:d(d({},Be("Controls",{video:function(e){return e.video},drmAudio:function(e){return e.drmAudio},playing:function(e){return e.playing}})),Be("Params",{viewer:function(e){return e.viewer}})),methods:{togglePlay:function(){var e=l(c().m((function e(){var t,n,r;return c().w((function(e){while(1)switch(e.n){case 0:if(!this.playing){e.n=3;break}return e.n=1,this.video.pause();case 1:return e.n=2,null===(n=this.drmAudio)||void 0===n?void 0:n.pause();case 2:e.n=6;break;case 3:if(null===(null===(t=this.video)||void 0===t?void 0:t.srcObject)&&!this.viewer.drm){e.n=6;break}return e.n=4,xn();case 4:return e.n=5,this.video.play();case 5:return e.n=6,null===(r=this.drmAudio)||void 0===r?void 0:r.play();case 6:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};const di=Uo()(li,[["render",ui]]);var fi=di,pi={class:"dropup"},hi={key:0,class:"badge bg-light ms-2"},mi={class:"dropdown-header d-flex m-0 col-12"},vi={class:"p-0 ml-auto",style:{color:"#9e9e9e"}};function gi(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerControlsSettingsQuality"),c=Object(i["resolveComponent"])("VideoPlayerControlsSettingsLayout"),u=Object(i["resolveComponent"])("VideoPlayerControlsSettingsSplitView"),l=Object(i["resolveComponent"])("VideoPlayerControlsSettingsVideoTrack"),d=Object(i["resolveComponent"])("VideoPlayerControlsSettingsAudioTrack"),f=Object(i["resolveComponent"])("VideoPlayerControlsSettingsStats"),p=Object(i["resolveComponent"])("VideoPlayerControlsSettingsReportIssue"),h=Object(i["resolveComponent"])("VideoPlayerControlsSettingsDropdown");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[""!==e.dropup?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Teleport"],{key:0,to:"#viewer-container"},[Object(i["createElementVNode"])("div",{class:"backdrop",onClick:t[0]||(t[0]=function(t){return e.setDropup("")})})])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",pi,[Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-gear-fill h3 align-middle control-icon",onClick:t[1]||(t[1]=function(t){return e.setDropup("settings")})},[e.trackWarning?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",hi,g(t[2]||(t[2]=[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-exclamation-circle-fill p-0"},null,-1)])))):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",{ref:"settings",class:Object(i["normalizeClass"])(["dropdown-menu dropdown-menu-right",{show:"settings"===e.dropup}]),style:{"margin-bottom":"0.9rem"}},[Object(i["createElementVNode"])("div",mi,[t[3]||(t[3]=Object(i["createElementVNode"])("h6",{class:"p-0 m-0"},"Settings",-1)),Object(i["createElementVNode"])("div",vi,Object(i["toDisplayString"])(o.viewerVersion),1)]),e.getActiveMainTransceiverMedias.length>1?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0})):Object(i["createCommentVNode"])("",!0),e.getVideoSources.length>1&&e.isSplittedView?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:1})):Object(i["createCommentVNode"])("",!0),e.getVideoSources.length>1?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:2})):Object(i["createCommentVNode"])("",!0),e.getVideoSources.length>1||!e.getVideoHasMain&&e.getVideoSources.length?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:3,unsupportedFlagEmoji:s.unsupportedFlagEmoji,sourceFlagEmojiToPng:s.sourceFlagEmojiToPng},null,8,["unsupportedFlagEmoji","sourceFlagEmojiToPng"])):Object(i["createCommentVNode"])("",!0),e.getAudioSources.length>1||!e.getAudioHasMain&&e.getAudioSources.length?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:4,unsupportedFlagEmoji:s.unsupportedFlagEmoji,sourceFlagEmojiToPng:s.sourceFlagEmojiToPng},null,8,["unsupportedFlagEmoji","sourceFlagEmojiToPng"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(f),Object(i["createVNode"])(p,{streamId:n.streamId},null,8,["streamId"])],2),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["dropdown-menu dropdown-menu-right",{show:o.showDropup}]),style:Object(i["normalizeStyle"])([{width:o.settingsWidth},{"margin-bottom":"0.9rem"}])},[Object(i["createVNode"])(h,{selected:o.selected,items:o.items,compare:o.compare,handleClick:o.handleClick,title:o.dropupTitle,unsupportedFlagEmoji:s.unsupportedFlagEmoji,sourceFlagEmojiToPng:s.sourceFlagEmojiToPng},null,8,["selected","items","compare","handleClick","title","unsupportedFlagEmoji","sourceFlagEmojiToPng"])],6)])],64)}n("a15b"),n("f5b2");var bi={class:"back-header mr-2"},yi={class:"bi ml-viewer-bi-camera-video-fill"},wi={key:0,class:"badge bg-danger"},Si=["innerHTML"],Ei={key:1};function Ci(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:"dropdown-item d-flex align-items-center pr-0 justify-content-between",onClick:t[0]||(t[0]=function(t){return e.setDropup("videoTracks")})},[Object(i["createElementVNode"])("span",bi,[Object(i["createElementVNode"])("i",yi,["none"===this.selectedVideoSource.name?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",wi)):Object(i["createCommentVNode"])("",!0)]),t[1]||(t[1]=Object(i["createTextVNode"])(" Video Source: ",-1))]),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["dropdown-item-name mr-auto",["none"===this.selectedVideoSource.name?"none":"",null===this.selectedVideoSource.sourceId?"main":""]])},[n.unsupportedFlagEmoji(this.selectedVideoSource.name)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,innerHTML:n.sourceFlagEmojiToPng(this.selectedVideoSource.name)},null,8,Si)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ei,Object(i["toDisplayString"])(this.selectedVideoSource.name),1))],2),t[2]||(t[2]=Object(i["createElementVNode"])("div",{class:"back-arrow"},[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-chevron-right ml-auto py-0"})],-1))])}var Oi={name:"VideoPlayerControlsSettingsQuality",props:{unsupportedFlagEmoji:Function,sourceFlagEmojiToPng:Function},computed:d({},Be("Sources",{selectedVideoSource:function(e){return e.selectedVideoSource}})),methods:d({},Ue("Controls",["setDropup"]))};n("d8d3");const ki=Uo()(Oi,[["render",Ci],["__scopeId","data-v-7ef173a6"]]);var Ii=ki,xi={class:"back-header mr-2"},Ti={class:"bi ml-viewer-bi-soundwave"},ji={key:0,class:"badge bg-danger"},Pi=["innerHTML"],Ri={key:1};function Ai(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:"dropdown-item d-flex align-items-center pr-0 justify-content-between",onClick:t[0]||(t[0]=function(t){return e.setDropup("audioTracks")})},[Object(i["createElementVNode"])("span",xi,[Object(i["createElementVNode"])("i",Ti,["none"===this.selectedAudioSource.name?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ji)):Object(i["createCommentVNode"])("",!0)]),t[1]||(t[1]=Object(i["createTextVNode"])(" Audio Source: ",-1))]),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["dropdown-item-name mr-auto",["none"===this.selectedAudioSource.name?"none":"",null===this.selectedAudioSource.sourceId?"main":""]])},[n.unsupportedFlagEmoji(this.selectedAudioSource.name)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,innerHTML:n.sourceFlagEmojiToPng(this.selectedAudioSource.name)},null,8,Pi)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ri,Object(i["toDisplayString"])(this.selectedAudioSource.name),1))],2),t[2]||(t[2]=Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-chevron-right ml-auto py-0"})],-1))])}var Vi={name:"VideoPlayerControlsSettingsQuality",props:{unsupportedFlagEmoji:Function,sourceFlagEmojiToPng:Function},computed:d({},Be("Sources",{selectedAudioSource:function(e){return e.selectedAudioSource}})),methods:d({},Ue("Controls",["setDropup"]))};n("4cb6");const Mi=Uo()(Vi,[["render",Ai],["__scopeId","data-v-c75512c2"]]);var Li=Mi,_i={class:"dropdown-item-name mr-auto"};function Di(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:"dropdown-item d-flex align-items-center pr-0 justify-content-between",onClick:t[0]||(t[0]=function(t){return e.setDropup("qualities")})},[t[1]||(t[1]=Object(i["createElementVNode"])("span",{class:"back-header mr-2"},[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-sliders"}),Object(i["createTextVNode"])(" Video Quality: ")],-1)),Object(i["createElementVNode"])("div",_i,Object(i["toDisplayString"])(this.selectedQuality.name),1),t[2]||(t[2]=Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-chevron-right ml-auto py-0"})],-1))])}var Ni={name:"VideoPlayerControlsSettingsQuality",computed:d({},Be("Layers",{selectedQuality:function(e){return e.selectedQuality}})),methods:d({},Ue("Controls",["setDropup"]))};const Bi=Uo()(Ni,[["render",Di]]);var Ui=Bi;function Fi(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerStatsTable");return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:Object(i["normalizeClass"])(["dropdown-item",{disabled:!e.isLive}]),onClick:t[0]||(t[0]=function(){return s.toggleStats&&s.toggleStats.apply(s,arguments)})},[t[1]||(t[1]=Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-info-circle-fill align-middle control-icon"},null,-1)),t[2]||(t[2]=Object(i["createTextVNode"])(" Media Stats ",-1)),o.showStats?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Teleport"],{key:0,to:"#vplayer"},[Object(i["createVNode"])(a,{close:s.toggleStats},null,8,["close"])])):Object(i["createCommentVNode"])("",!0)],2)}var zi={class:"table table-sm table-dark table-borderless fixed-top"},Gi={key:0,class:"d-flex align-items-center"},Hi=["value"],Wi={colspan:"2",class:"text-right"},qi={key:0,class:"row mx-0"},$i={class:"col-6"},Qi={key:1,class:"row mx-0"},Ki={class:"col-6"},Xi={key:2,class:"row mx-0"},Yi={class:"col-5 overflow-ellipsis"},Ji={class:"col-1"},Zi={key:3,class:"row mx-0"},es={class:"col-6"},ts={key:4,class:"row mx-0"},ns={class:"col-6"},rs={key:5,class:"row mx-0"},os={class:"col-6"},is={key:6,class:"row mx-0"},ss={class:"col-6"},as={key:7,class:"row mx-0"},cs={class:"col-6"},us={key:8,class:"row mx-0"},ls={class:"col-6"},ds={key:9,class:"row mx-0"},fs={class:"col-6"},ps={key:10,class:"row mx-0"},hs={class:"col-6"},ms={key:11,class:"row mx-0"},vs={class:"col-6"},gs={key:12,class:"row mx-0"},bs={class:"col-6"},ys={key:13,class:"row mx-0"},ws={class:"col-6"},Ss={key:14,class:"row mx-0"},Es=["textContent"],Cs={key:15,class:"row mx-0"},Os=["textContent"],ks={key:16,class:"row mx-0"},Is=["textContent"],xs={key:17,class:"row mx-0"},Ts=["textContent"],js={key:18,class:"row mx-0"},Ps=["textContent"],Rs={key:19,class:"row mx-0"},As=["textContent"],Vs={key:20,class:"row mx-0"},Ms={key:21,class:"row mx-0"},Ls={class:"col-12",align:"center"};function _s(e,t,n,r,o,s){var a,c,u,l,d,f,p,h,m,v,b,y,w;return Object(i["openBlock"])(),Object(i["createElementBlock"])("table",zi,[Object(i["createElementVNode"])("thead",null,[Object(i["createElementVNode"])("tr",{class:Object(i["normalizeClass"])(["row mx-0 align-items-center",s.multiviewStatsAvailable?"justify-content-between":"justify-content-end"])},[s.multiviewStatsAvailable?(Object(i["openBlock"])(),Object(i["createElementBlock"])("th",Gi,[t[5]||(t[5]=Object(i["createElementVNode"])("span",null,"Source:",-1)),Object(i["withDirectives"])(Object(i["createElementVNode"])("select",{class:"ml-2 source-select","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.selectedSourceMid=e}),onChange:t[1]||(t[1]=function(){return s.handleSourceChange&&s.handleSourceChange.apply(s,arguments)})},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.getTransceiverSourceState,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("option",{key:e.sourceId,value:e.mid},Object(i["toDisplayString"])(e.name),9,Hi)})),128))],544),[[i["vModelSelect"],o.selectedSourceMid]])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("th",Wi,[Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-x-lg",onClick:t[2]||(t[2]=function(){return n.close&&n.close.apply(n,arguments)})})])],2),t[6]||(t[6]=Object(i["createElementVNode"])("tr",{class:"row mx-0 text-left"},[Object(i["createElementVNode"])("th",{scope:"col",class:"col-6"},"Name"),Object(i["createElementVNode"])("th",{scope:"col",class:"col-6"},"Value")],-1))]),s.hasStats?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tbody",{key:0,style:Object(i["normalizeStyle"])([e.isMobile?"overflow-x: auto;":"overflow-x: hidden;"]),class:"text-left videoStats"},[e.streamId?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",qi,[t[7]||(t[7]=Object(i["createElementVNode"])("td",{class:"col-6"},"Stream Id",-1)),Object(i["createElementVNode"])("td",$i,Object(i["toDisplayString"])(e.streamId),1)])):Object(i["createCommentVNode"])("",!0),null!==(a=e.millicastView)&&void 0!==a&&null!==(a=a.signaling)&&void 0!==a&&a.subscriberId?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Qi,[t[8]||(t[8]=Object(i["createElementVNode"])("td",{class:"col-6"},"Server Id",-1)),Object(i["createElementVNode"])("td",Ki,Object(i["toDisplayString"])(e.millicastView.signaling.subscriberId),1)])):Object(i["createCommentVNode"])("",!0),null!==(c=e.millicastView)&&void 0!==c&&null!==(c=c.signaling)&&void 0!==c&&c.streamViewId?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Xi,[t[9]||(t[9]=Object(i["createElementVNode"])("td",{class:"col-6"},"Stream View Id",-1)),Object(i["createElementVNode"])("td",Yi,Object(i["toDisplayString"])(e.millicastView.signaling.streamViewId),1),Object(i["createElementVNode"])("td",Ji,[Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-copy",onClick:t[3]||(t[3]=function(t){return s.copyText(e.millicastView.signaling.streamViewId)})})])])):Object(i["createCommentVNode"])("",!0),o.stats.currentRoundTripTime?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Zi,[t[10]||(t[10]=Object(i["createElementVNode"])("td",{class:"col-6"},"RTT",-1)),Object(i["createElementVNode"])("td",es,Object(i["toDisplayString"])(s.formatMilliseconds(o.stats.currentRoundTripTime)),1)])):Object(i["createCommentVNode"])("",!0),null!==(u=s.video)&&void 0!==u&&u.frameWidth&&null!==(l=s.video)&&void 0!==l&&l.frameHeight?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ts,[t[11]||(t[11]=Object(i["createElementVNode"])("td",{class:"col-6"},"Video Resolution",-1)),Object(i["createElementVNode"])("td",ns,Object(i["toDisplayString"])("".concat(s.video.frameWidth,"x").concat(s.video.frameHeight)),1)])):Object(i["createCommentVNode"])("",!0),null!==(d=s.video)&&void 0!==d&&d.framesPerSecond?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",rs,[t[12]||(t[12]=Object(i["createElementVNode"])("td",{class:"col-6"},"FPS",-1)),Object(i["createElementVNode"])("td",os,Object(i["toDisplayString"])(s.video.framesPerSecond),1)])):Object(i["createCommentVNode"])("",!0),null!==(f=s.video)&&void 0!==f&&f.bitrate?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",is,[t[13]||(t[13]=Object(i["createElementVNode"])("td",{class:"col-6"},"Video Bitrate",-1)),Object(i["createElementVNode"])("td",ss,Object(i["toDisplayString"])(s.formatBitrate(s.video.bitrateBitsPerSecond)),1)])):Object(i["createCommentVNode"])("",!0),null!==(p=s.audio)&&void 0!==p&&p.bitrate?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",as,[t[14]||(t[14]=Object(i["createElementVNode"])("td",{class:"col-6"},"Audio Bitrate",-1)),Object(i["createElementVNode"])("td",cs,Object(i["toDisplayString"])(s.formatBitrate(s.audio.bitrateBitsPerSecond)),1)])):Object(i["createCommentVNode"])("",!0),null!==(h=s.video)&&void 0!==h&&h.totalBytesReceived?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",us,[t[15]||(t[15]=Object(i["createElementVNode"])("td",{class:"col-6"},"Video Total Received",-1)),Object(i["createElementVNode"])("td",ls,Object(i["toDisplayString"])(s.formatTotalBytes(s.video.totalBytesReceived)),1)])):Object(i["createCommentVNode"])("",!0),null!==(m=s.audio)&&void 0!==m&&m.totalBytesReceived?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ds,[t[16]||(t[16]=Object(i["createElementVNode"])("td",{class:"col-6"},"Audio Total Received",-1)),Object(i["createElementVNode"])("td",fs,Object(i["toDisplayString"])(s.formatTotalBytes(s.audio.totalBytesReceived)),1)])):Object(i["createCommentVNode"])("",!0),void 0!==(null===(v=s.video)||void 0===v?void 0:v.totalPacketsLost)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ps,[t[17]||(t[17]=Object(i["createElementVNode"])("td",{class:"col-6"},"Video Packet Loss",-1)),Object(i["createElementVNode"])("td",hs,Object(i["toDisplayString"])(s.video.totalPacketsLost),1)])):Object(i["createCommentVNode"])("",!0),void 0!==(null===(b=s.audio)||void 0===b?void 0:b.totalPacketsLost)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ms,[t[18]||(t[18]=Object(i["createElementVNode"])("td",{class:"col-6"},"Audio Packet Loss",-1)),Object(i["createElementVNode"])("td",vs,Object(i["toDisplayString"])(s.audio.totalPacketsLost),1)])):Object(i["createCommentVNode"])("",!0),void 0!==(null===(y=s.video)||void 0===y?void 0:y.jitter)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",gs,[t[19]||(t[19]=Object(i["createElementVNode"])("td",{class:"col-6"},"Video Jitter",-1)),Object(i["createElementVNode"])("td",bs,Object(i["toDisplayString"])(s.formatMilliseconds(s.video.jitter)),1)])):Object(i["createCommentVNode"])("",!0),void 0!==(null===(w=s.audio)||void 0===w?void 0:w.jitter)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ys,[t[20]||(t[20]=Object(i["createElementVNode"])("td",{class:"col-6"},"Audio Jitter",-1)),Object(i["createElementVNode"])("td",ws,Object(i["toDisplayString"])(s.formatMilliseconds(s.audio.jitter)),1)])):Object(i["createCommentVNode"])("",!0),s.videoCaptureTimestamp?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Ss,[t[21]||(t[21]=Object(i["createElementVNode"])("td",{class:"col-6"},"Capture timestamp",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.videoCaptureTimestamp),class:"col-6"},null,8,Es)])):Object(i["createCommentVNode"])("",!0),s.videoCaptureDelta?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Cs,[t[22]||(t[22]=Object(i["createElementVNode"])("td",{class:"col-6"},"Capture delta time",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.videoCaptureDelta),class:"col-6"},null,8,Os)])):Object(i["createCommentVNode"])("",!0),s.codecs?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",ks,[t[23]||(t[23]=Object(i["createElementVNode"])("td",{class:"col-6"},"Codecs",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.codecs),class:"col-6 text-break"},null,8,Is)])):Object(i["createCommentVNode"])("",!0),s.timestamp?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",xs,[t[24]||(t[24]=Object(i["createElementVNode"])("td",{class:"col-6 text-break"},"Timestamp",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.timestamp),class:"col-6"},null,8,Ts)])):Object(i["createCommentVNode"])("",!0),s.serverId?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",js,[t[25]||(t[25]=Object(i["createElementVNode"])("td",{class:"col-6 text-break"},"Server",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.serverId),class:"col-6"},null,8,Ps)])):Object(i["createCommentVNode"])("",!0),s.clusterId?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Rs,[t[26]||(t[26]=Object(i["createElementVNode"])("td",{class:"col-6 text-break"},"Cluster",-1)),Object(i["createElementVNode"])("td",{textContent:Object(i["toDisplayString"])(s.clusterId),class:"col-6"},null,8,As)])):Object(i["createCommentVNode"])("",!0),e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Vs,g(t[27]||(t[27]=[Object(i["createElementVNode"])("td",{class:"col-12 center"},null,-1)])))):Object(i["createCommentVNode"])("",!0),e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",Ms,[Object(i["createElementVNode"])("td",Ls,[Object(i["createElementVNode"])("a",{onClick:t[4]||(t[4]=function(){return n.close&&n.close.apply(n,arguments)}),style:{cursor:"pointer"}},"Close stats")])])):Object(i["createCommentVNode"])("",!0)],4)):Object(i["createCommentVNode"])("",!0)])}n("accc"),n("b680");var Ds=["B","KB","MB","GB","TB"],Ns={name:"VideoPlayerStatsTable",props:{close:Function},data:function(){return{stats:{},statsIndex:0,selectedSourceMid:null,trackIdToStatsIndexMap:{},trackIdMidMap:{}}},mounted:function(){var e,t,n,r=this;this.millicastView.webRTCPeer.initStats(),this.millicastView.webRTCPeer.on("stats",(function(e){var t,n,o,i,s;r.trackIdMidMap=r.getTrackIdMidMap,null===(t=e.video)||void 0===t||null===(t=t.inbounds)||void 0===t||t.forEach((function(e,t){e.trackIdentifier&&(r.trackIdToStatsIndexMap[e.trackIdentifier]=t)})),null===(n=window.peer)||void 0===n||null===(o=n.getReceivers)||void 0===o||null===(i=(s=o.call(n)).forEach)||void 0===i||i.call(s,(function(e){r.stats.videoSynchronizationSources="video"===e.track.kind?e.getSynchronizationSources():r.stats.videoSynchronizationSources})),r.stats=d(d({},r.stats),e)})),this.selectedSourceMid=null!==(e=null===(t=this.getTransceiverSourceState[0])||void 0===t?void 0:t.mid)&&void 0!==e?e:null===(n=Object.values(this.getTransceiverSourceState)[0])||void 0===n?void 0:n.mid},beforeUnmount:function(){this.millicastView.webRTCPeer.stopStats(),this.millicastView.webRTCPeer.removeAllListeners("stats")},methods:{closeTable:function(){this.close()},copyText:function(e){navigator.clipboard.writeText(e)},formatTotalBytes:function(e){return Bs(e)},formatBitrate:function(e){return en(e)},formatMilliseconds:function(e){return"".concat(+(1e3*(e||0)).toFixed(2)," ms")},handleSourceChange:function(){var e,t=null!==(e=this.selectedSourceMid)&&void 0!==e?e:0,n=this.trackIdMidMap[t];this.statsIndex=this.trackIdToStatsIndexMap[n]},selectMidZero:function(){var e,t,n;this.selectedSourceMid=null!==(e=null===(t=this.getTransceiverSourceState[0])||void 0===t?void 0:t.mid)&&void 0!==e?e:null===(n=Object.values(this.getTransceiverSourceState)[0])||void 0===n?void 0:n.mid}},computed:d(d(d(d(d(d({},Be("Params",{streamId:function(e){return e.viewer.streamId}})),Be("Controls",["isMobile","isSplittedView"])),Be("ViewConnection",{millicastView:function(e){return e.millicastView}})),Be("Sources",["sourceRemoteTracks","videoSources"])),Fe("Sources",["getTransceiverSourceState","getTrackIdMidMap"])),{},{hasStats:function(){return Object.keys(this.stats).length>0},audio:function(){var e,t=null===(e=this.stats.audio)||void 0===e?void 0:e.inbounds;return(null===t||void 0===t?void 0:t.length)>0?t[0]:null},video:function(){var e,t=null===(e=this.stats.video)||void 0===e?void 0:e.inbounds,n=null===t||void 0===t?void 0:t.length;if(n){if(!this.selectedSourceMid)return t[0];var r=this.trackIdMidMap[this.selectedSourceMid],o=this.trackIdToStatsIndexMap[r];return t[o]}return null},codecs:function(){var e,t,n=[];return null!==(e=this.video)&&void 0!==e&&e.mimeType&&n.push(this.video.mimeType),null!==(t=this.audio)&&void 0!==t&&t.mimeType&&n.push(this.audio.mimeType),n.join()},timestamp:function(){var e,t,n,r=null!==(e=null===(t=this.video)||void 0===t?void 0:t.timestamp)&&void 0!==e?e:null===(n=this.audio)||void 0===n?void 0:n.timestamp;return r?new Date(r).toISOString():null},videoCaptureTimestamp:function(){var e,t,n;if(null!==(e=this.stats.videoSynchronizationSources)&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&e.captureTimestamp&&null!==(t=this.stats.videoSynchronizationSources)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.timestamp){var r=Us(this.stats.videoSynchronizationSources[0].captureTimestamp);n=new Date(r).toISOString()}return n},videoCaptureDelta:function(){var e,t,n;if(null!==(e=this.stats.videoSynchronizationSources)&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&e.captureTimestamp&&null!==(t=this.stats.videoSynchronizationSources)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.timestamp){var r,o=Us(this.stats.videoSynchronizationSources[0].captureTimestamp);n=(null===(r=this.stats.videoSynchronizationSources)||void 0===r?void 0:r[0].timestamp)-o,n="".concat(n," ms")}return n},serverId:function(){var e;return null===(e=this.millicastView)||void 0===e||null===(e=e.signaling)||void 0===e?void 0:e.serverId},clusterId:function(){var e;return null===(e=this.millicastView)||void 0===e||null===(e=e.signaling)||void 0===e?void 0:e.clusterId},multiviewStatsAvailable:function(){var e=this.videoSources.length>1&&this.isSplittedView&&Object.keys(this.trackIdToStatsIndexMap).length;return e||this.selectMidZero(),e}})},Bs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e/1024;return n<1||n>1&&t+1>Ds.length?"".concat(Math.round(100*e)/100," ").concat(Ds[t]):n>1?Bs(n,t+1):void 0},Us=function(e){return e-22089888e5};n("6e6d");const Fs=Uo()(Ns,[["render",_s],["__scopeId","data-v-c123dc6c"]]);var zs=Fs,Gs={name:"VideoPlayerControlsSettingsStats",components:{VideoPlayerStatsTable:zs},data:function(){return{stats:{},showStats:!1}},computed:d({},Be("Controls",["isLive"])),methods:d(d({},Ue("Controls",["setDropup"])),{},{toggleStats:function(){this.showStats=!this.showStats,this.setDropup()}})};n("778f");const Hs=Uo()(Gs,[["render",Fi],["__scopeId","data-v-00e40a59"]]);var Ws=Hs;function qs(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerReportModal");return o.showReportButton?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,class:"dropdown-item",onClick:t[0]||(t[0]=function(){return s.toggleReport&&s.toggleReport.apply(s,arguments)})},[t[1]||(t[1]=Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-flag-fill align-middle control-icon"},null,-1)),t[2]||(t[2]=Object(i["createTextVNode"])(" Report Playback Issue ",-1)),o.showReportModal?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Teleport"],{key:0,to:"#vplayer"},[Object(i["createVNode"])(a,{streamId:n.streamId,close:s.toggleReport},null,8,["streamId","close"])])):Object(i["createCommentVNode"])("",!0)])):Object(i["createCommentVNode"])("",!0)}var $s={class:"header"},Qs=["textContent"],Ks={class:"form-group"},Xs={class:"form-group"},Ys={class:"form-group"};function Js(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("base-button"),c=Object(i["resolveComponent"])("base-modal");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{toggle:n.close},{"modal-header":Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",$s,[t[4]||(t[4]=Object(i["createElementVNode"])("span",{class:"ml-viewer-bi-flag-fill align-middle"},null,-1)),Object(i["createElementVNode"])("h3",{textContent:Object(i["toDisplayString"])(o.title)},null,8,Qs)])]})),"modal-body":Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("form",{id:"reportForm",onSubmit:t[3]||(t[3]=Object(i["withModifiers"])((function(){return s.sendReport&&s.sendReport.apply(s,arguments)}),["prevent"]))},[Object(i["createElementVNode"])("div",Ks,[t[5]||(t[5]=Object(i["createElementVNode"])("label",{for:"name-input"},"Name",-1)),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"text",class:"form-control",id:"name-input",placeholder:"Full name","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.report.name=e}),required:""},null,512),[[i["vModelText"],o.report.name]])]),Object(i["createElementVNode"])("div",Xs,[t[6]||(t[6]=Object(i["createElementVNode"])("label",{for:"email-input"},"Email",-1)),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"email",class:"form-control",id:"email-input",placeholder:"name@example.com","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.report.email=e}),required:""},null,512),[[i["vModelText"],o.report.email]])]),Object(i["createElementVNode"])("div",Ys,[t[7]||(t[7]=Object(i["createElementVNode"])("label",{for:"description-input"},"Description",-1)),Object(i["withDirectives"])(Object(i["createElementVNode"])("textarea",{class:"form-control",id:"description-input",rows:"4","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.report.description=e}),required:""},null,512),[[i["vModelText"],o.report.description]])])],32)]})),"modal-footer":Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{btype:"btn-secondary",onClick:n.close},{default:Object(i["withCtx"])((function(){return g(t[8]||(t[8]=[Object(i["createTextVNode"])("Cancel",-1)]))})),_:1},8,["onClick"]),Object(i["createVNode"])(a,{type:"submit",btype:"btn-p",form:"reportForm",disabled:o.isLoading},{default:Object(i["withCtx"])((function(){return g(t[9]||(t[9]=[Object(i["createTextVNode"])("Submit",-1)]))})),_:1},8,["disabled"])]})),_:1},8,["toggle"])}n("f4b3"),n("e9c4");var Zs={name:"VideoPlayerReportModal",props:{close:Function,streamId:String},data:function(){return{title:"Report playback issue",report:{from:"Viewer",name:"",email:"",description:"",diagnostics:{},url:""},toast:new Do,isLoading:!1}},methods:{sendReport:function(){var e=this;return l(c().m((function t(){var n,r,o,i,s,a,u,l;return c().w((function(t){while(1)switch(t.p=t.n){case 0:if(!e.isLoading){t.n=1;break}return t.a(2);case 1:return e.report.diagnostics=M["Logger"].diagnose(),t.p=2,e.isLoading=!0,s={"Content-Type":"application/json"},e.report.diagnostics.serverId=null!==(n=null===(r=e.report.diagnostics)||void 0===r?void 0:r.subscriberId)&&void 0!==n?n:"NOT_CONNECTED",e.report.diagnostics.clusterId=null!==(o=null===(i=e.report.diagnostics)||void 0===i?void 0:i.clusterId)&&void 0!==o?o:"NOT_CONNECTED",t.n=3,fetch(e.reportUrl+"/reports",{method:"POST",headers:s,body:JSON.stringify(e.report)});case 3:e.toast.showToast("success","Report sent successfully",{timeout:3e3}),t.n=5;break;case 4:t.p=4,l=t.v,u="Error: couldn't send report",null!==(a=l.response)&&void 0!==a&&a.data&&(u+=", "+l.response.data),e.toast.showToast("error",u,{timeout:3e3});case 5:return t.p=5,e.isLoading=!1,e.close(),t.f(5);case 6:return t.a(2)}}),t,null,[[2,4,5,6]])})))()}},computed:d(d({},Be("ViewConnection",{millicastView:function(e){return e.millicastView}})),Be("Params",{reportUrl:function(e){return e.environment.VUE_APP_REPORT_URL}})),mounted:function(){this.report.url=window.location.href}};n("455f");const ea=Uo()(Zs,[["render",Js],["__scopeId","data-v-9b9b9a64"]]);var ta=ea,na={name:"VideoPlayerControlsSettingsReportIssue",components:{VideoPlayerReportModal:ta},props:{streamId:String},data:function(){return{showReportModal:!1,showReportButton:!1}},methods:d(d({},Ue("Controls",["setDropup"])),{},{toggleReport:function(){this.showReportModal=!this.showReportModal,this.setDropup("")}}),computed:d({},Be("Params",{reportUrl:function(e){return this.showReportButton=!!e.environment.VUE_APP_REPORT_URL,e.environment.VUE_APP_REPORT_URL}})),watch:{reportUrl:function(e){this.showReportButton=!!e}}};const ra=Uo()(na,[["render",qs]]);var oa=ra,ia=["onClick"],sa={class:"form-check p-0"},aa={class:"row"},ca={class:"col-1 mr-1"},ua={class:"bi ml-viewer-bi-check p-0"},la=["innerHTML"],da={key:1};function fa(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("h6",{class:"dropdown-header back-header",onClick:t[0]||(t[0]=function(t){return e.setDropup("settings")})},[t[1]||(t[1]=Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-chevron-left p-0"},null,-1)),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(n.title),1)]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(n.items,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:e.selectId,class:Object(i["normalizeClass"])([{disabled:e.disabled},"dropdown-item"]),onClick:function(t){return s.handleSelect(e)}},[Object(i["createElementVNode"])("div",sa,[Object(i["createElementVNode"])("div",aa,[Object(i["createElementVNode"])("div",ca,[Object(i["withDirectives"])(Object(i["createElementVNode"])("i",ua,null,512),[[i["vShow"],n.compare(n.selected,e)]])]),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["item-name",[null===(null===e||void 0===e?void 0:e.sourceId)?"main":""]])},[null!==e&&void 0!==e&&e.name&&n.unsupportedFlagEmoji(null===e||void 0===e?void 0:e.name)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,innerHTML:n.sourceFlagEmojiToPng(null===e||void 0===e?void 0:e.name)},null,8,la)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",da,Object(i["toDisplayString"])(null===e||void 0===e?void 0:e.name),1))],2)])])],10,ia)})),128))],64)}var pa={name:"VideoPlayerControlsSettingsDropdown",components:{},props:{title:String,handleClick:Function,selected:Object,items:Array,compare:Function,unsupportedFlagEmoji:Function,sourceFlagEmojiToPng:Function},computed:{},methods:d(d({},Ue("Controls",["setDropup"])),{},{handleSelect:function(e){this.handleClick(e),this.setDropup("")}})};n("7442");const ha=Uo()(pa,[["render",fa],["__scopeId","data-v-491ccd6e"]]);var ma=ha;function va(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(t){return e.setIsSplittedView(!e.isSplittedView)})},[t[1]||(t[1]=Object(i["createElementVNode"])("i",{class:"ml-viewer-bi-layout-sidebar-inset-reverse align-middle control-icon"},null,-1)),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.isSplittedView?"Hide":"Show")+" Multi View ",1)])}var ga={name:"VideoPlayerControlsSettingsSplitView",computed:d({},Be("Controls",["isSplittedView"])),methods:d({},Ue("Controls",["setIsSplittedView"]))};const ba=Uo()(ga,[["render",va]]);var ya=ba;function wa(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(t){return e.setIsGrid(!e.isGrid)})},[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])([e.isGrid?"bi ml-viewer-bi-grid":"bi ml-viewer-bi-grid-1x2","align-middle control-icon"])},null,2),t[1]||(t[1]=Object(i["createTextVNode"])(" Change layout ",-1))])}var Sa={name:"VideoPlayerControlsSettingsLayout",computed:d({},Be("Controls",["isGrid"])),methods:d({},Ue("Controls",["setIsGrid"]))};const Ea=Uo()(Sa,[["render",wa]]);var Ca=Ea,Oa=n("9224"),ka={name:"VideoPlayerControlsSettings",components:{VideoPlayerControlsSettingsVideoTrack:Ii,VideoPlayerControlsSettingsAudioTrack:Li,VideoPlayerControlsSettingsQuality:Ui,VideoPlayerControlsSettingsStats:Ws,VideoPlayerControlsSettingsReportIssue:oa,VideoPlayerControlsSettingsDropdown:ma,VideoPlayerControlsSettingsSplitView:ya,VideoPlayerControlsSettingsLayout:Ca},props:{streamId:String},data:function(){return{viewerVersion:"",showDropup:!1,settingsWidth:"0px",selected:{},items:[],dropupTitle:"",handleClick:function(){},compare:function(){},audioFollowVideoData:{mid:null,name:"AudioFollowVideo",sourceId:"AudioFollowVideo",trackId:null},toast:null}},computed:d(d(d(d(d({},Fe("Layers",["getActiveMainTransceiverMedias"])),Fe("Sources",["getVideoSources","getAudioSources","getVideoHasMain","getAudioHasMain"])),Be("Layers",{selectedQuality:function(e){return e.selectedQuality}})),Be("Sources",{selectedVideoSource:function(e){return e.selectedVideoSource},selectedAudioSource:function(e){return e.selectedAudioSource},audioFollowsVideo:function(e){return e.audioFollowsVideo}})),Be("Controls",{dropup:function(e){return e.dropup},trackWarning:function(e){return e.trackWarning},isSplittedView:function(e){return e.isSplittedView}})),methods:d(d(d({},Ue("Controls",["setDropup","toggleFullscreen"])),Ue("Sources",["setMainLabel","setAudioFollowsVideo"])),{},{compareItems:function(e,t){return(null===e||void 0===e?void 0:e.name)===(null===t||void 0===t?void 0:t.name)&&((null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)||"Auto"===(null===t||void 0===t?void 0:t.name))},compareSources:function(e,t){return(null===e||void 0===e?void 0:e.sourceId)===(null===t||void 0===t?void 0:t.sourceId)},setDropupSettings:function(e,t,n,r,o){this.selected=e,this.items=t,this.dropupTitle=n,this.handleClick=r,this.compare=o},unsupportedFlagEmoji:function(e){var t,n=navigator.userAgent,r=-1!==n.indexOf("Chrome"),o=null!==e.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/g);return!!r&&(t="Windows"==navigator.userAgentData.platform,o&&t)},sourceFlagEmojiToPng:function(e){var t=e.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/g);return t.forEach((function(t){var n=Array.from(t,(function(e){return e.codePointAt()})).map((function(e){return String.fromCharCode(e-127397).toLowerCase()})).join("");e=e.replace(t," <img src='https://flagcdn.com/20x15/".concat(n,'.png\' alt="FlagEmoji"}>'))})),e}}),mounted:function(){this.viewerVersion=Oa["a"]?"v"+Oa["a"]:"",this.toast=new Do},watch:{dropup:function(e){var t=this;if("videoTracks"===e||"audioTracks"===e||"qualities"===e){switch(this.settingsWidth=this.$refs.settings.clientWidth+"px",e){case"videoTracks":var n=function(){var e=l(c().m((function e(n){return c().w((function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Nn({kind:"video",source:n});case 1:return e.n=2,t.setMainLabel(n.name);case 2:e.n=4;break;case 3:e.p=3,e.v,t.toast.showToast("error","There was an error selecting the desired source, try again",{timeout:5e3});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t){return e.apply(this,arguments)}}();this.setDropupSettings(this.selectedVideoSource,this.getVideoSources,"Video Source",n,this.compareSources);break;case"audioTracks":var r=function(){var e=l(c().m((function e(n){return c().w((function(e){while(1)switch(e.p=e.n){case 0:if("AudioFollowVideo"!==n.name){e.n=1;break}t.setAudioFollowsVideo(!0),e.n=5;break;case 1:return t.setAudioFollowsVideo(!1),e.p=2,e.n=3,Nn({kind:"audio",source:n});case 3:e.n=5;break;case 4:e.p=4,e.v,t.toast.showToast("error","There was an error selecting the desired source, try again",{timeout:5e3});case 5:return e.a(2)}}),e,null,[[2,4]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){return[t.audioFollowVideoData].concat(g(t.getAudioSources))},i=function(){return t.audioFollowsVideo?t.audioFollowVideoData:t.selectedAudioSource};this.setDropupSettings(i(),o(),"Audio Source",r,this.compareSources);break;case"qualities":var s=function(e){Dn(e)};this.setDropupSettings(this.selectedQuality,this.getActiveMainTransceiverMedias,"Video Quality",s,this.compareItems);break}this.showDropup=!0}else this.showDropup=!1},getActiveMainTransceiverMedias:function(){"qualities"===this.dropup&&(this.items=this.getActiveMainTransceiverMedias)},getVideoSources:function(){"videoTracks"===this.dropup&&(this.items=this.getActiveMainTransceiverMedias)},getAudioSources:function(){"audioTracks"===this.dropup&&(this.items=this.getAudioSources)}}};n("3c34");const Ia=Uo()(ka,[["render",gi],["__scopeId","data-v-464a8bef"]]);var xa=Ia,Ta={key:0,class:"align-middle"},ja={class:"badge",style:{border:"0px"}};function Pa(e,t,n,r,o,s){return s.count?(Object(i["openBlock"])(),Object(i["createElementBlock"])("h4",Ta,[Object(i["createElementVNode"])("span",ja,[t[0]||(t[0]=Object(i["createElementVNode"])("i",{class:"bi ml-viewer-bi-person-fill"},null,-1)),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(s.count),1)])])):Object(i["createCommentVNode"])("",!0)}var Ra={name:"VideoPlayerControlsUserCount",computed:d(d({},Be("Controls",["viewerCount"])),{},{count:function(){var e;return null===(e=this.viewerCount)||void 0===e?void 0:e.toLocaleString("en")}})};n("c03e");const Aa=Uo()(Ra,[["render",Pa],["__scopeId","data-v-48f1b614"]]);var Va=Aa,Ma={class:"d-inline"};function La(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ma,[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])(["h3 align-middle control-icon",s.volumeIcon]),onClick:t[0]||(t[0]=function(){return s.toggleMuted&&s.toggleMuted.apply(s,arguments)}),onMousemove:t[1]||(t[1]=function(){return s.toggleVolumeSlider&&s.toggleVolumeSlider.apply(s,arguments)})},null,34),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"range",class:Object(i["normalizeClass"])(["align-middle mr-2 slider",{show:o.showVolume,volumeMobile:!0}]),id:"volumeSlider",min:"0",max:"1",step:".01","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.volume=e}),onMousemove:t[3]||(t[3]=function(){return s.toggleVolumeSlider&&s.toggleVolumeSlider.apply(s,arguments)})},null,34),[[i["vModelText"],o.volume]])])}var _a={name:"VideoPlayerControlsVolume",data:function(){return{volume:1,showVolume:!1}},watch:{volume:function(e){0!==this.volume||this.muted?this.muted&&this.toggleMuted():this.toggleMuted(),this.setVideoVolume(e)}},computed:d(d({},Be("Controls",{muted:function(e){return e.muted}})),{},{volumeIcon:function(){return this.muted||0===this.volume?"ml-viewer-bi-volume-mute-fill":this.volume<.1?"ml-viewer-bi-volume-off-fill":this.volume<.5?"ml-viewer-bi-volume-down-fill":"ml-viewer-bi-volume-up-fill"}}),methods:d(d({},Ue("Controls",["setVideoMuted","setVideoVolume"])),{},{toggleVolumeSlider:function(){var e=this;this.showVolumeTimeout&&clearTimeout(this.showVolumeTimeout),this.showVolume=!0,this.showVolumeTimeout=setTimeout((function(){e.showVolume=!1}),4e3)},toggleMuted:function(){this.setVideoMuted(!this.muted)}})};n("c7df");const Da=Uo()(_a,[["render",La],["__scopeId","data-v-0cf82b5a"]]);var Na=Da,Ba={class:"row"},Ua={key:0},Fa=["textContent"],za={key:0,class:"col-6 text-right"},Ga={key:1,class:"col-5 pl-0 pr-1 text-right"},Ha={key:1,class:"dropup"};function Wa(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("VideoPlayerControlsPlay"),c=Object(i["resolveComponent"])("VideoPlayerControlsVolume"),u=Object(i["resolveComponent"])("VideoPlayerControlsSettings"),l=Object(i["resolveComponent"])("VideoPlayerControlsCast"),d=Object(i["resolveComponent"])("VideoPlayerControlsPip"),f=Object(i["resolveComponent"])("VideoPlayerControlsFullscreen");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ba,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([e.isMobile?"col-7 text-left pr-0":"col-6 text-left"])},[n.isConnected?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ua,[n.showButton("play")?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0})):Object(i["createCommentVNode"])("",!0),n.showButton("volume")?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:1})):Object(i["createCommentVNode"])("",!0),e.viewer.showTimer&&!e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:2,class:"h5 align-middle p-2",textContent:Object(i["toDisplayString"])(n.currentTime)},null,8,Fa)):Object(i["createCommentVNode"])("",!0)]))],2),e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ga,[n.showButton("settings")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,streamId:n.streamId},null,8,["streamId"])):Object(i["createCommentVNode"])("",!0),n.showButton("cast")&&e.castAvailable||e.isLive&&s.pipEnabled&&n.showButton("pip")&&s.isVideoTag||n.showButton("fullscreen")?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ha,[Object(i["createElementVNode"])("i",{class:"h3 align-middle control-icon bi ml-viewer-bi-three-dots-vertical",onClick:t[0]||(t[0]=function(t){return e.setDropup("mobile")})}),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["dropdown-menu dropdown-menu-right",{show:"mobile"===e.dropup}]),style:{"margin-bottom":"0.9rem"}},[t[1]||(t[1]=Object(i["createElementVNode"])("div",{class:"dropdown-header d-flex m-0 col-12"},[Object(i["createElementVNode"])("h6",{class:"p-0 m-0"},"Options")],-1)),n.showButton("cast")&&e.castAvailable?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:0})):Object(i["createCommentVNode"])("",!0),s.pipEnabled?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:1})):Object(i["createCommentVNode"])("",!0),n.showButton("fullscreen")?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:2,click:e.toggleFullscreen},null,8,["click"])):Object(i["createCommentVNode"])("",!0)],2)])):Object(i["createCommentVNode"])("",!0)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",za,[n.showButton("settings")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,streamId:n.streamId},null,8,["streamId"])):Object(i["createCommentVNode"])("",!0),n.showButton("cast")&&e.castAvailable?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:1})):Object(i["createCommentVNode"])("",!0),s.pipEnabled?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:2})):Object(i["createCommentVNode"])("",!0),n.showButton("fullscreen")?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:3,click:e.toggleFullscreen},null,8,["click"])):Object(i["createCommentVNode"])("",!0)]))])}var qa={key:0};function $a(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("google-cast-launcher");return e.castAvailable&&!e.options.loading?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:Object(i["normalizeClass"])([e.isMobile?"dropdown-item d-flex row mx-0":"mobile-setting"]),onClick:t[0]||(t[0]=function(){return s.clickCast&&s.clickCast.apply(s,arguments)})},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([e.isMobile?"":"mobile-setting"])},[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])(["align-middle control-icon",e.isMobile?"mobile-icon":"h3"])},[Object(i["createVNode"])(a,{ref:"cast"},null,512)],2)],2),e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",qa,g(t[1]||(t[1]=[Object(i["createElementVNode"])("span",{class:"align-middle"},"Cast",-1)])))):Object(i["createCommentVNode"])("",!0)],2)):Object(i["createCommentVNode"])("",!0)}var Qa={name:"VideoPlayerControlsCast",computed:d({},Be("Controls",{isMobile:function(e){return e.isMobile},castAvailable:function(e){return e.castAvailable},options:function(e){return e.castOptions}})),methods:{clickCast:function(){this.$refs.cast.click()}}};n("a706");const Ka=Uo()(Qa,[["render",$a],["__scopeId","data-v-f9fa5040"]]);var Xa=Ka,Ya={name:"VideoPlayer",components:{VideoPlayerControlsFullscreen:oi,VideoPlayerControlsPip:ci,VideoPlayerControlsPlay:fi,VideoPlayerControlsSettings:xa,VideoPlayerControlsVolume:Na,VideoPlayerControlsCast:Xa},props:{showButton:Function,streamId:String,isConnected:Boolean,currentTime:String},data:function(){return{dropupShow:!1}},computed:d(d(d({},Be("Controls",{video:function(e){return e.video},dropup:function(e){return e.dropup},isMobile:function(e){return e.isMobile},isLive:function(e){return e.isLive},castAvailable:function(e){return e.castAvailable}})),Be("Params",{viewer:function(e){return e.viewer}})),{},{isVideoTag:function(){var e;return"VIDEO"===(null===(e=this.video)||void 0===e?void 0:e.nodeName)},pipEnabled:function(){return this.showButton("pip")&&document.pictureInPictureEnabled&&this.isLive&&this.isVideoTag}}),methods:d({},Ue("Controls",["setDropup","toggleFullscreen"])),beforeMount:function(){return l(c().m((function e(){return c().w((function(e){while(1)switch(e.n){case 0:return e.n=1,zn();case 1:return e.a(2)}}),e)})))()}};n("ff91");const Ja=Uo()(Ya,[["render",Wa],["__scopeId","data-v-fcfaa484"]]);var Za=Ja,ec={name:"VideoPlayerContainer",components:{VideoPlayerMedia:zo,VideoPlayerControlsBadge:ei,VideoPlayerControlsUserCount:Va,VideoPlayerControlsContainer:Za,VideoPlayerSideVideoSources:Qo},data:function(){return{show:!0,timeInterval:0,secondsElapsed:0,cast:{isConnected:!1},controlsTimeout:0,mobileFullscreen:!1,toast:new Do}},mounted:function(){var e,t=this;null===(e=screen.orientation)||void 0===e||e.addEventListener("change",this.handleOrientationChange),this.controlsTimeout=setTimeout((function(){t.show=!1}),4e3),this.timeInterval=setInterval((function(){t.playing&&t.secondsElapsed++}),1e3),this.setCastOptions({streamId:this.viewer.streamId,token:this.viewer.token,loading:this.isLoading})},beforeUnmount:function(){clearInterval(this.timeInterval)},computed:d(d(d(d(d({},Be("Params",{viewer:function(e){return e.viewer}})),Be("Errors",{type:function(e){return e.type},message:function(e){return e.message},showError:function(e){return e.showError}})),Be("Sources",{videoSources:function(e){return e.videoSources},audioSources:function(e){return e.audioSources},selectedVideoSource:function(e){return e.selectedVideoSource},selectedAudioSource:function(e){return e.selectedAudioSource},sourceRemoteTracks:function(e){return e.sourceRemoteTracks}})),Be("Controls",{video:function(e){return e.video},playing:function(e){return e.playing},player:function(e){return e.player},fullscreen:function(e){return e.fullscreen},dropup:function(e){return e.dropup},isLoading:function(e){return e.isLoading},volume:function(e){return e.volume},playerMuted:function(e){return e.muted},castIsConnected:function(e){return e.castIsConnected},castDevice:function(e){return e.castDevice},srcObject:function(e){return e.srcObject},autoPlayMuted:function(e){return e.autoPlayMuted},isLive:function(e){return e.isLive},isSplittedView:function(e){return e.isSplittedView},hideToast:function(e){return e.hideToast},isGrid:function(e){return e.isGrid}})),{},{currentTime:function(){var e=this.secondsElapsed,t=Math.floor(e/60);return t=t>=10?t:"0"+t,e=Math.floor(e%60),e=e>=10?e:"0"+e,t+":"+e}}),methods:d(d(d(d(d({},Ue("Layers",["deleteLayers"])),Ue("Errors",["setShowError"])),Ue("Sources",["deleteSource","setMainLabel"])),Ue("Controls",["setVideo","setIsLive","setIsLoading","setTrackWarning","setDropup","setVideoVolume","setVideoMuted","setPlaying","setCastOptions","setAutoPlayMuted","toggleFullscreen","setIsSplittedView"])),{},{showControls:function(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.show=!0,this.hideControls()},hideControls:function(){var e=this;this.playing&&""===this.dropup&&(this.controlsTimeout=setTimeout((function(){e.show=!1}),4e3))},showButton:function(e){var t=!this.viewer.hideButtons.includes(e);if(t&&"fullscreen"===e){var n,r,o,i=null!==(n=document.getElementById("player"))&&void 0!==n?n:document.getElementById("player2");i||(i=document.createElement("video")),t&&(t=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||(null===(r=i)||void 0===r?void 0:r.requestFullscreen)||(null===(o=i)||void 0===o?void 0:o.webkitEnterFullscreen)),t||console.warn("Fullscreen disabled due to incompatibility with the browser.")}return t},handleOrientationChange:function(){var e=screen.orientation.type;"portrait-primary"===e&&tc()&&!this.mobileFullscreen?this.leaveFullScreen():"landscape-primary"===e&&this.goFullScreen()},goFullScreen:function(){var e,t,n,r,o,i,s,a,c,u,l=document.getElementById("vplayer"),d=null!==(e=document.getElementById("player"))&&void 0!==e?e:document.getElementById("player2");null!==(t=null!==(n=null!==(r=null!==(o=null===l||void 0===l||null===(i=l.requestFullscreen)||void 0===i?void 0:i.call(l))&&void 0!==o?o:null===l||void 0===l||null===(s=l.webkitRequestFullscreen)||void 0===s?void 0:s.call(l))&&void 0!==r?r:null===l||void 0===l||null===(a=l.mozRequestFullScreen)||void 0===a?void 0:a.call(l))&&void 0!==n?n:null===l||void 0===l||null===(c=l.msRequestFullscreen)||void 0===c?void 0:c.call(l))&&void 0!==t||null===d||void 0===d||null===(u=d.webkitEnterFullscreen)||void 0===u||u.call(d)},leaveFullScreen:function(){var e,t,n,r,o,i,s,a,c,u,l;null!==(e=null!==(t=null!==(n=null===(r=(o=document).exitFullscreen)||void 0===r?void 0:r.call(o))&&void 0!==n?n:null===(i=(s=document).webkitExitFullscreen)||void 0===i?void 0:i.call(s))&&void 0!==t?t:null===(a=(c=document).mozCancelFullScreen)||void 0===a?void 0:a.call(c))&&void 0!==e||null===(u=(l=document).msExitFullscreen)||void 0===u||u.call(l)},tapUnmute:function(){this.setVideoMuted(!1),this.setAutoPlayMuted(!1)},handleWholeScreen:function(){var e;this.isGrid&&(this.setIsSplittedView(!this.isSplittedView),Nn({kind:"video",source:this.videoSources[0]}),this.setMainLabel(null!==(e=this.videoSources[0].sourceId)&&void 0!==e?e:this.videoSources[0].name))}}),watch:{playing:function(e){e?this.hideControls():this.showControls()},fullscreen:function(){document.pictureInPictureElement&&document.exitPictureInPicture(),tc()?(this.mobileFullscreen=!1,this.leaveFullScreen()):(this.mobileFullscreen=!0,this.goFullScreen())},dropup:function(){this.showControls()},token:function(){this.setCastOptions({streamId:this.viewer.streamId,token:this.viewer.token,loading:this.isLoading})},castIsConnected:function(e){if(e){this.setPlaying(!1),this.setIsLoading(!1);var t=this.castDevice;this.cast={isConnected:e,device:t},this.showControls()}else this.cast={isConnected:e}},viewer:function(){this.setCastOptions({streamId:this.viewer.streamId,token:this.viewer.token,loading:this.isLoading})},showError:function(e){e&&"SubscriberError"===this.type?this.toast.showToast("error",this.message):this.setShowError(!1)}}},tc=function(){return document.fullscreenElement||document.webkitFullscreenElement};n("aaf0");const nc=Uo()(ec,[["render",x],["__scopeId","data-v-46e5ffe6"]]);var rc=nc,oc=(n("cd74"),n("ab8b"),n("da96"),n("87d4")),ic={name:"App",components:{VideoPlayerContainer:rc},props:{paramsOptions:Object},methods:d(d({},Ue("Controls",["setMobile"])),{},{updateParams:function(){var e,t,n,r,o,i,s,a,c,u,l,d,f,p,h,m,v,g,b,y,w,S,E,C,O,k,I,x,T,j,P,R,A,V,M;this.paramsOptions&&rt({streamId:(null===(t=this.paramsOptions)||void 0===t?void 0:t.accountId)+"/"+(null===(n=this.paramsOptions)||void 0===n?void 0:n.streamName),audioOnly:null!==(r=null===(o=this.paramsOptions)||void 0===o?void 0:o.audioOnly)&&void 0!==r&&r,videoOnly:null!==(i=null===(s=this.paramsOptions)||void 0===s?void 0:s.videoOnly)&&void 0!==i&&i,token:null===(a=this.paramsOptions)||void 0===a?void 0:a.token,image:null===(c=this.paramsOptions)||void 0===c?void 0:c.image,directorUrl:null===(u=this.paramsOptions)||void 0===u?void 0:u.directorUrl,hideButtons:!1===this.paramsOptions.controls?tt:null!==(l=this.paramsOptions.hideButtons)&&void 0!==l?l:[],autoplay:null===(d=this.paramsOptions.autoplay)||void 0===d||d,muted:null!==(f=this.paramsOptions.muted)&&void 0!==f&&f,noDelay:null!==(p=null===(h=this.paramsOptions)||void 0===h?void 0:h.noDelay)&&void 0!==p&&p,multisource:null!==(m=null===(v=this.paramsOptions)||void 0===v?void 0:v.multisource)&&void 0!==m&&m,audioFollowsVideo:null!==(g=null===(b=this.paramsOptions)||void 0===b?void 0:b.audioFollowsVideo)&&void 0!==g&&g,layout:null!==(y=null===(w=this.paramsOptions)||void 0===w?void 0:w.layout)&&void 0!==y?y:null,showLabels:null===(S=null===(E=this.paramsOptions)||void 0===E?void 0:E.showLabels)||void 0===S||S,startingQuality:null===(C=this.paramsOptions)||void 0===C?void 0:C.startingQuality,hideToast:null===(O=this.paramsOptions)||void 0===O?void 0:O.hideToast,mainLabel:null!==(k=null===(I=this.paramsOptions)||void 0===I?void 0:I.mainLabel)&&void 0!==k?k:"Main",drm:null!==(x=this.paramsOptions.drm)&&void 0!==x&&x,forcePlayoutDelayMin:null===(T=this.paramsOptions)||void 0===T?void 0:T.forcePlayoutDelayMin,forcePlayoutDelayMax:null===(j=this.paramsOptions)||void 0===j?void 0:j.forcePlayoutDelayMax,metadata:null===(P=this.paramsOptions)||void 0===P?void 0:P.metadata,mediaBufferMs:null===(R=this.paramsOptions)||void 0===R?void 0:R.mediaBufferMs,showTimer:null===(A=this.paramsOptions)||void 0===A?void 0:A.showTimer,abrStrategy:null===(V=this.paramsOptions)||void 0===V?void 0:V.abrStrategy,abrBandwidth:null===(M=this.paramsOptions)||void 0===M?void 0:M.abrBandwidth});it(null===(e=this.paramsOptions)||void 0===e?void 0:e.environment),console.log("Parsed options",this.paramsOptions)}}),mounted:function(){var e=this;return l(c().m((function t(){var n,r,o,i;return c().w((function(t){while(1)switch(t.n){case 0:return r=document.getElementById("viewer-container"),t.n=1,new Do;case 1:o=t.v,o.updateDefaults({container:r,containerClassName:"toast-custom"}),e.updateParams(),null!==(n=e.paramsOptions)&&void 0!==n&&n.startingQuality&&o.showToast("info","Fetching starting quality layer",{timeout:1500}),oc["ElementQueries"].listen(),oc["ElementQueries"].init(),window.addEventListener("load",(function(){new oc["ResizeSensor"](r,(function(){e.setMobile(r.clientWidth<=575)}))})),i=document.createElement("script"),i.setAttribute("src","//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),i.async=!0,document.head.appendChild(i);case 2:return t.a(2)}}),t)})))()},watch:{paramsOptions:function(){this.updateParams()}}};n("7d09");const sc=Uo()(ic,[["render",s],["__scopeId","data-v-681a40a4"]]);var ac=sc,cc={class:"modal fade show",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{display:"block"}},uc={class:"modal-dialog modal-dialog-scrollable",role:"document"},lc={class:"modal-content"},dc={class:"modal-header"},fc=["textContent"],pc={class:"modal-body"},hc={class:"modal-footer"};function mc(e,t,n,r,o,s){var a=Object(i["resolveComponent"])("base-button");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",cc,[(Object(i["openBlock"])(),Object(i["createBlock"])(i["Teleport"],{to:"#viewer-container"},[Object(i["createElementVNode"])("div",{onClick:t[0]||(t[0]=function(){return n.toggle&&n.toggle.apply(n,arguments)}),class:"backdrop"})])),Object(i["createElementVNode"])("div",uc,[Object(i["createElementVNode"])("div",lc,[Object(i["createElementVNode"])("div",dc,[Object(i["renderSlot"])(e.$slots,"modal-header",{},(function(){return[Object(i["createElementVNode"])("h5",{class:"modal-title",textContent:Object(i["toDisplayString"])(n.title)},null,8,fc),Object(i["createElementVNode"])("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[1]||(t[1]=function(){return n.toggle&&n.toggle.apply(n,arguments)})},g(t[2]||(t[2]=[Object(i["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1)])))]}),!0)]),Object(i["createElementVNode"])("div",pc,[Object(i["renderSlot"])(e.$slots,"modal-body",{},void 0,!0)]),Object(i["createElementVNode"])("div",hc,[Object(i["renderSlot"])(e.$slots,"modal-footer",{},(function(){return[Object(i["createVNode"])(a,{btype:"btn-p",onClick:n.toggle},{default:Object(i["withCtx"])((function(){return g(t[3]||(t[3]=[Object(i["createTextVNode"])("OK",-1)]))})),_:1},8,["onClick"])]}),!0)])])])])}var vc={name:"BaseModal",props:{title:String,toggle:Function}};n("3143");const gc=Uo()(vc,[["render",mc],["__scopeId","data-v-742b9a28"]]);var bc=gc;function yc(e,t,n,r,o,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{type:"button",class:Object(i["normalizeClass"])(["btn shadow-none",[n.btype]])},[Object(i["renderSlot"])(e.$slots,"default",{},void 0,!0)],2)}var wc={name:"BaseButton",props:["btype","bstyle","bcolor"]};n("b3ad");const Sc=Uo()(wc,[["render",yc],["__scopeId","data-v-7037ab8a"]]);var Ec=Sc,Cc=function(e,t){return 0===t.filter((function(t){return t.type===e.type})).length&&e},Oc={install:function(e,t){t.store?(t.store.registerModule("Controls",Je),t.store.registerModule("Layers",Xe),t.store.registerModule("Errors",ut),t.store.registerModule("Params",at),t.store.registerModule("Sources",Qe),t.store.registerModule("ViewConnection",et)):e.use(lt),e.use(Mo,{transition:"Vue-Toastification__fade",maxToasts:2,newestOnTop:!0,position:"top-center",closeOnClick:!1,closeButton:!1,pauseOnFocusLoss:!1,pauseOnHover:!1,draggable:!1,timeout:!1,filterBeforeCreate:Cc}),e.component("base-modal",bc),e.component("base-button",Ec),e.component("VideoPlayer",ac)}};t["default"]=Oc},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("e8b5"),i=n("68ee"),s=n("861d"),a=n("23cb"),c=n("07fa"),u=n("fc6a"),l=n("8418"),d=n("b622"),f=n("1dde"),p=n("f36a"),h=f("slice"),m=d("species"),v=Array,g=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,r,d,f=u(this),h=c(f),b=a(e,h),y=a(void 0===t?h:t,h);if(o(f)&&(n=f.constructor,i(n)&&(n===v||o(n.prototype))?n=void 0:s(n)&&(n=n[m],null===n&&(n=void 0)),n===v||void 0===n))return p(f,b,y);for(r=new(void 0===n?v:n)(g(y-b,0)),d=0;b<y;b++,d++)b in f&&l(r,d,f[b]);return r.length=d,r}})},fc6a:function(e,t,n){"use strict";var r=n("44ad"),o=n("1d80");e.exports=function(e){return r(o(e))}},fce3:function(e,t,n){"use strict";var r=n("d039"),o=n("cfe9"),i=o.RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},fdbc:function(e,t,n){"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){"use strict";var r=n("04f8");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},feb0:function(e,t,n){},ff91:function(e,t,n){"use strict";n("5306")}})}));
//# sourceMappingURL=millicast-vue-viewer-plugin.umd.min.js.map